if (self.CavalryLogger) { CavalryLogger.start_js(["LB8DG"]); }

__d("MessengerEmojiConfig",[],(function(a,b,c,d,e,f){e.exports={emoji_colors:[0,127995,127996,127997,127998,127999]}}),null);
__d("URLMatcherConfig",[],(function(a,b,c,d,e,f){e.exports={tlds:"(?:\\.(com|\ud55c\uad6d|\uc0bc\uc131|\ub2f7\ucef4|\ub2f7\ub137|\u9999\u6e2f|\u9999\u683c\u91cc\u62c9|\u9910\u5385|\u98df\u54c1|\u98de\u5229\u6d66|\u96fb\u8a0a\u76c8\u79d1|\u96c6\u56e2|\u901a\u8ca9|\u8d2d\u7269|\u8c37\u6b4c|\u8bfa\u57fa\u4e9a|\u8054\u901a|\u7f51\u7edc|\u7f51\u7ad9|\u7f51\u5e97|\u7f51\u5740|\u7ec4\u7ec7\u673a\u6784|\u79fb\u52a8|\u73e0\u5b9d|\u70b9\u770b|\u6fb3\u9580|\u6e38\u620f|\u6de1\u9a6c\u9521|\u673a\u6784|\u66f8\u7c4d|\u65f6\u5c1a|\u65b0\u95fb|\u65b0\u52a0\u5761|\u653f\u5e9c|\u653f\u52a1|\u624b\u8868|\u624b\u673a|\u6211\u7231\u4f60|\u6148\u5584|\u5fae\u535a|\u5e7f\u4e1c|\u5de5\u884c|\u5bb6\u96fb|\u5a31\u4e50|\u5929\u4e3b\u6559|\u5927\u62ff|\u5927\u4f17\u6c7d\u8f66|\u5728\u7ebf|\u5609\u91cc\u5927\u9152\u5e97|\u5609\u91cc|\u5546\u6807|\u5546\u5e97|\u5546\u57ce|\u53f0\u7063|\u53f0\u6e7e|\u516c\u76ca|\u516c\u53f8|\u516b\u5366|\u5065\u5eb7|\u4fe1\u606f|\u4f5b\u5c71|\u4f01\u4e1a|\u4e2d\u6587\u7f51|\u4e2d\u570b|\u4e2d\u56fd|\u4e2d\u4fe1|\u4e16\u754c|\u30dd\u30a4\u30f3\u30c8|\u30d5\u30a1\u30c3\u30b7\u30e7\u30f3|\u30bb\u30fc\u30eb|\u30b9\u30c8\u30a2|\u30b3\u30e0|\u30b0\u30fc\u30b0\u30eb|\u30af\u30e9\u30a6\u30c9|\u307f\u3093\u306a|\u10d2\u10d4|\u0e44\u0e17\u0e22|\u0e04\u0e2d\u0e21|\u0dbd\u0d82\u0d9a\u0dcf|\u0d2d\u0d3e\u0d30\u0d24\u0d02|\u0cad\u0cbe\u0cb0\u0ca4|\u0c2d\u0c3e\u0c30\u0c24\u0c4d|\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe|\u0b2d\u0b3e\u0b30\u0b24|\u0aad\u0abe\u0ab0\u0aa4|\u0a2d\u0a3e\u0a30\u0a24|\u09ad\u09be\u09f0\u09a4|\u09ad\u09be\u09b0\u09a4|\u09ac\u09be\u0982\u09b2\u09be|\u0938\u0902\u0917\u0920\u0928|\u092d\u093e\u0930\u094b\u0924|\u092d\u093e\u0930\u0924\u092e\u094d|\u092d\u093e\u0930\u0924|\u0928\u0947\u091f|\u0915\u0949\u092e|\u0680\u0627\u0631\u062a|\u067e\u0627\u06a9\u0633\u062a\u0627\u0646|\u0647\u0645\u0631\u0627\u0647|\u0645\u0648\u0642\u0639|\u0645\u0648\u0628\u0627\u064a\u0644\u064a|\u0645\u0644\u064a\u0633\u064a\u0627|\u0645\u0635\u0631|\u0643\u0648\u0645|\u0643\u0627\u062b\u0648\u0644\u064a\u0643|\u0642\u0637\u0631|\u0641\u0644\u0633\u0637\u064a\u0646|\u0639\u0645\u0627\u0646|\u0639\u0631\u0628|\u0639\u0631\u0627\u0642|\u0634\u0628\u0643\u0629|\u0633\u0648\u0631\u064a\u0629|\u0633\u0648\u062f\u0627\u0646|\u062a\u0648\u0646\u0633|\u0628\u06be\u0627\u0631\u062a|\u0628\u064a\u062a\u0643|\u0628\u0627\u0632\u0627\u0631|\u0628\u0627\u0631\u062a|\u0627\u06cc\u0631\u0627\u0646|\u0627\u0645\u0627\u0631\u0627\u062a|\u0627\u0644\u0645\u063a\u0631\u0628|\u0627\u0644\u0639\u0644\u064a\u0627\u0646|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|\u0627\u0644\u062c\u0632\u0627\u0626\u0631|\u0627\u0644\u0627\u0631\u062f\u0646|\u0627\u0631\u0627\u0645\u0643\u0648|\u0627\u062a\u0635\u0627\u0644\u0627\u062a|\u0627\u0628\u0648\u0638\u0628\u064a|\u05e7\u05d5\u05dd|\u0570\u0561\u0575|\u049b\u0430\u0437|\u0443\u043a\u0440|\u0441\u0440\u0431|\u0441\u0430\u0439\u0442|\u0440\u0444|\u0440\u0443\u0441|\u043e\u0440\u0433|\u043e\u043d\u043b\u0430\u0439\u043d|\u043c\u043e\u0441\u043a\u0432\u0430|\u043c\u043e\u043d|\u043c\u043a\u0434|\u043a\u043e\u043c|\u043a\u0430\u0442\u043e\u043b\u0438\u043a|\u0435\u044e|\u0434\u0435\u0442\u0438|\u0431\u0435\u043b|\u0431\u0433|\u03b5\u03bb|zw|zuerich|zone|zm|zippo|zip|zero|zara|zappos|za|yun|yt|youtube|you|yokohama|yoga|yodobashi|ye|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xn--zfr164b|xn--ygbi2ammx|xn--yfro4i67o|xn--y9a3aq|xn--xkc2dl3a5ee0h|xn--xkc2al3hye2a|xn--xhq521b|xn--wgbl6a|xn--wgbh1c|xn--w4rs40l|xn--w4r85el8fhu5dnra|xn--vuq861b|xn--vhquv|xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--unup4y|xn--tiq49xqyj|xn--tckwe|xn--t60b56a|xn--ses554g|xn--s9brj9c|xn--rvc1e0am3e|xn--rovu88b|xn--rhqv96g|xn--qxam|xn--qcka1pmc|xn--q9jyb4c|xn--pssy2u|xn--pgbs0dh|xn--pbt977c|xn--p1ai|xn--p1acf|xn--ogbpf8fl|xn--o3cw4h|xn--nyqy26a|xn--nqv7fs00ema|xn--nqv7f|xn--node|xn--ngbrx|xn--ngbe9e0a|xn--ngbc5azd|xn--mxtq1m|xn--mk1bu44c|xn--mix891f|xn--mgbx4cd0ab|xn--mgbtx2b|xn--mgbt3dhd|xn--mgbpl2fh|xn--mgbi4ecexp|xn--mgbgu82a|xn--mgberp4a5d4ar|xn--mgbca7dzdo|xn--mgbc0a9azcg|xn--mgbbh1a71e|xn--mgbbh1a|xn--mgbb9fbpob|xn--mgbayh7gpa|xn--mgbai9azgqp6j|xn--mgbab2bd|xn--mgbaam7a8h|xn--mgbaakc7dvf|xn--mgba7c0bbn0a|xn--mgba3a4f16a|xn--mgba3a3ejt|xn--mgb9awbf|xn--lgbbat1ad8j|xn--l1acc|xn--kput3i|xn--kpu716f|xn--kpry57d|xn--kprw13d|xn--kcrx77d1x4a|xn--jvr189m|xn--jlq61u9w7b|xn--j6w193g|xn--j1amh|xn--j1aef|xn--io0a7i|xn--imr513n|xn--i1b6b1a6a2e|xn--hxt814e|xn--h2brj9c8c|xn--h2brj9c|xn--h2breg3eve|xn--gk3at1e|xn--gecrj9c|xn--gckr3f0f|xn--g2xx48c|xn--fzys8d69uvgm|xn--fzc2c9e2c|xn--fpcrj9c3d|xn--flw351e|xn--fjq720a|xn--fiqz9s|xn--fiqs8s|xn--fiq64b|xn--fiq228c5hs|xn--fhbei|xn--fct429k|xn--estv75g|xn--efvy88h|xn--eckvdtc9d|xn--e1a4c|xn--d1alf|xn--d1acj3b|xn--czru2d|xn--czrs0t|xn--czr694b|xn--clchc0ea0b2g2a9gcd|xn--cg4bki|xn--cck2b3b|xn--c2br7g|xn--c1avg|xn--bck1b9a5dre4c|xn--b4w605ferd|xn--9krt00a|xn--9et52u|xn--9dbq2a|xn--90ais|xn--90ae|xn--90a3ac|xn--8y0a063a|xn--80aswg|xn--80asehdb|xn--80aqecdr1a|xn--80ao21a|xn--80adxhks|xn--6qq986b3xl|xn--6frz82g|xn--5tzm5g|xn--5su34j936bgsg|xn--55qx5d|xn--55qw42g|xn--54b7fta0cc|xn--4gbrim|xn--45q11c|xn--45brj9c|xn--45br5cyl|xn--42c2d9a|xn--3pxu8k|xn--3oq18vl8pn36a|xn--3hcrj9c|xn--3e0b707e|xn--3ds443g|xn--3bst00m|xn--30rr7y|xn--2scrj9c|xn--1qqw23a|xn--1ck2e1b|xn--11b4c3d|xin|xihuan|xfinity|xerox|xbox|wtf|wtc|ws|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|wf|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|warman|wanggou|wang|walter|walmart|wales|vuelos|vu|voyage|voto|voting|vote|volvo|volkswagen|vodka|vn|vlaanderen|vivo|viva|vistaprint|vista|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vi|vg|vet|versicherung|verm\xf6gensberatung|verm\xf6gensberater|verisign|ventures|vegas|ve|vc|vanguard|vana|vacations|va|uz|uy|us|ups|uol|uno|university|unicom|uk|ug|uconnect|ubs|ubank|ua|tz|tw|tvs|tv|tushu|tunes|tui|tube|tt|trv|trust|travelersinsurance|travelers|travelchannel|travel|training|trading|trade|tr|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|to|tn|tmall|tm|tl|tkmaxx|tk|tjx|tjmaxx|tj|tirol|tires|tips|tiffany|tienda|tickets|tiaa|theatre|theater|thd|th|tg|tf|teva|tennis|temasek|telefonica|telecity|tel|technology|tech|team|tdk|td|tci|tc|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|sz|systems|symantec|sydney|sy|sx|swiss|swiftcover|swatch|sv|suzuki|surgery|surf|support|supply|supplies|sucks|su|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statoil|statefarm|statebank|starhub|star|staples|stada|st|srt|srl|sr|spreadbetting|spot|sport|spiegel|space|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|so|sncf|sn|smile|smart|sm|sling|sl|skype|sky|skin|ski|sk|sj|site|singles|sina|silk|si|shriram|showtime|show|shouji|shopping|shop|shoes|shiksha|shia|shell|shaw|sharp|shangrila|sh|sg|sfr|sexy|sex|sew|seven|ses|services|sener|select|seek|security|secure|seat|search|se|sd|scot|scor|scjohnson|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sca|sc|sbs|sbi|sb|saxo|save|sas|sarl|sapo|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|sa|ryukyu|rwe|rw|run|ruhr|rugby|ru|rsvp|rs|room|rogers|rodeo|rocks|rocher|ro|rmit|rip|rio|ril|rightathome|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|re|raid|radio|racing|qvc|quest|quebec|qpon|qa|py|pwc|pw|pub|pt|ps|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|pr|post|porn|politie|poker|pohl|pnc|pn|pm|plus|plumbing|playstation|play|place|pl|pk|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|piaget|physio|photos|photography|photo|phone|philips|phd|pharmacy|ph|pg|pfizer|pf|pet|pe|pccw|pay|passagens|party|parts|partners|pars|paris|panerai|panasonic|page|pa|ovh|ott|otsuka|osaka|origins|organic|org|orange|oracle|open|ooo|onyourside|online|onl|onion|ong|one|omega|om|ollo|oldnavy|olayangroup|olayan|okinawa|office|off|observer|obi|nz|nyc|nu|ntt|nrw|nra|nr|np|nowtv|nowruz|now|norton|northwesternmutual|nokia|no|nl|nissay|nissan|ninja|nikon|nike|nico|ni|nhk|ngo|ng|nfl|nf|nexus|nextdirect|next|news|newholland|new|neustar|network|netflix|netbank|net|nec|ne|nc|nba|navy|natura|nationwide|name|nagoya|nadex|nab|na|mz|my|mx|mw|mv|mutual|museum|mu|mtr|mtn|mt|msd|ms|mr|mq|mp|movistar|movie|mov|motorcycles|moto|moscow|mortgage|mormon|mopar|monster|money|monash|mom|moi|moe|moda|mobily|mobile|mobi|mo|mn|mma|mm|mls|mlb|ml|mk|mitsubishi|mit|mint|mini|mil|microsoft|miami|mh|mg|metlife|merckmsd|meo|menu|men|memorial|meme|melbourne|meet|media|med|me|md|mckinsey|mc|mba|mattel|maserati|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|macys|ma|ly|lv|luxury|luxe|lupin|lundbeck|lu|ltda|ltd|lt|ls|lr|lplfinancial|lpl|love|lotto|lotte|london|lol|loft|locus|locker|loans|loan|lk|lixil|living|live|lipsy|link|linde|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|liaison|li|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lc|lb|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancome|lancia|lancaster|lamer|lamborghini|ladbrokes|lacaixa|la|kz|kyoto|ky|kw|kuokgroup|kred|krd|kr|kpn|kpmg|kp|kosher|komatsu|koeln|kn|km|kiwi|kitchen|kindle|kinder|kim|kia|ki|kh|kg|kfh|kerryproperties|kerrylogistics|kerryhotels|ke|kddi|kaufen|juniper|juegos|jprs|jpmorgan|jp|joy|jot|joburg|jobs|jo|jnj|jmp|jm|jll|jlc|jio|jewelry|jetzt|jeep|je|jcp|jcb|java|jaguar|iwc|iveco|itv|itau|it|istanbul|ist|ismaili|iselect|is|irish|ir|iq|ipiranga|io|investments|intuit|international|intel|int|insure|insurance|institute|ink|ing|info|infiniti|industries|in|immobilien|immo|imdb|imamat|im|il|ikano|ifm|ieee|ie|id|icu|ice|icbc|ibm|hyundai|hyatt|hughes|hu|ht|hsbc|hr|how|house|hotmail|hotels|hoteles|hot|hosting|host|hospital|horse|honeywell|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hn|hm|hkt|hk|hiv|hitachi|hisamitsu|hiphop|hgtv|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|gy|gw|guru|guitars|guide|guge|gucci|guardian|gu|gt|gs|group|grocery|gripe|green|gratis|graphics|grainger|gr|gq|gp|gov|got|gop|google|goog|goodyear|goodhands|goo|golf|goldpoint|gold|godaddy|gn|gmx|gmo|gmbh|gmail|gm|globo|global|gle|glass|glade|gl|giving|gives|gifts|gift|gi|gh|ggee|gg|gf|george|genting|gent|gea|ge|gdn|gd|gbiz|gb|garden|gap|games|game|gallup|gallo|gallery|gal|ga|fyi|futbol|furniture|fund|fun|fujixerox|fujitsu|ftr|frontier|frontdoor|frogans|frl|fresenius|free|fr|fox|foundation|forum|forsale|forex|ford|football|foodnetwork|food|foo|fo|fm|fly|flowers|florist|flir|flights|flickr|fk|fj|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fiat|fi|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|everbank|events|eus|eurovision|eu|etisalat|et|esurance|estate|esq|es|erni|ericsson|er|equipment|epson|epost|enterprises|engineering|engineer|energy|emerck|email|eg|ee|education|edu|edeka|eco|ec|eat|earth|dz|dvr|dvag|durban|dupont|duns|dunlop|duck|dubai|dtv|drive|download|dot|domains|doha|dog|dodge|doctor|docs|do|dnp|dm|dk|dj|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|de|dds|dclk|day|datsun|dating|date|data|dance|dad|dabur|cz|cyou|cymru|cy|cx|cw|cv|cuisinella|cu|csc|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cr|courses|coupons|coupon|country|corsica|coop|cool|cookingchannel|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|comcast|com|cologne|college|coffee|codes|coach|co|cn|cm|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cl|ck|cityeats|city|citic|citi|citadel|cisco|circle|cipriani|ci|church|chrysler|chrome|christmas|chintai|cheap|chat|chase|channel|chanel|ch|cg|cfd|cfa|cf|cern|ceo|center|ceb|cd|cc|cbs|cbre|cbn|cba|catholic|catering|cat|casino|cash|caseih|case|casa|cartier|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|cancerresearch|camp|camera|cam|calvinklein|call|cal|cafe|cab|ca|bzh|bz|by|bw|bv|buzz|buy|business|builders|build|bugatti|budapest|bt|bs|brussels|brother|broker|broadway|bridgestone|bradesco|br|box|boutique|bot|boston|bostik|bosch|boots|booking|book|boo|bond|bom|bofa|boehringer|boats|bo|bnpparibas|bnl|bn|bmw|bms|bm|blue|bloomberg|blog|blockbuster|blanco|blackfriday|black|bj|biz|bio|bingo|bing|bike|bid|bible|bi|bharti|bh|bg|bf|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|be|bd|bcn|bcg|bbva|bbt|bbc|bb|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|bananarepublic|banamex|baidu|baby|ba|azure|az|axa|ax|aws|aw|avianca|autos|auto|author|auspost|audio|audible|audi|auction|au|attorney|athleta|at|associates|asia|asda|as|arte|art|arpa|army|archi|aramco|arab|ar|aquarelle|aq|apple|app|apartments|aol|ao|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|am|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|alfaromeo|al|akdn|airtel|airforce|airbus|aigo|aig|ai|agency|agakhan|ag|africa|afl|afamilycompany|af|aetna|aero|aeg|ae|adult|ads|adac|ad|actor|active|aco|accountants|accountant|accenture|academy|ac|abudhabi|abogado|able|abc|abbvie|abbott|abb|abarth|aarp|aaa))"}}),null);
__d("PresenceViewerCapabilities",["ArbiterMixin","Bootloader","CurrentUser","PresenceConfig","debounceAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null,h=Object.assign({},b("ArbiterMixin")),i=b("debounceAcrossTransitions")(function(){return h.inform("viewerChange")},0);function j(a){try{a=JSON.parse(a.payload);a=a.overlay[b("CurrentUser").getID()];a=a.c;a!==g&&i();a!=null&&(g=a)}catch(a){}}Object.assign(h,{get:function(){if(g!=null)return g;b("Bootloader").loadModules(["SkywalkerManager"],function(a){return a.subscribe("presence/fb/"+b("CurrentUser").getID(),j)},"PresenceViewerCapabilities");g=b("PresenceConfig").get("viewer_presence_capabilities");return g}});e.exports=h}),null);
__d("TypingDetector",["ArbiterMixin","Event","Input","Run","SubscriptionsHandler","TypingStates","createObjectFrom","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();function a(a,b){this._input=a,this._ignoreKeys={},this._getValueFn=b}Object.assign(a.prototype,b("ArbiterMixin"),{_timeout:7e3,_currentState:b("TypingStates").INACTIVE,init:function(){this.init=b("emptyFunction"),this.reset(),this._subscriptions=new(b("SubscriptionsHandler"))(),this._subscriptions.addSubscriptions(b("Event").listen(this._input,"keyup",this._update.bind(this)),b("Run").onUnload(this._onunload.bind(this)))},reset:function(){clearTimeout(this._checkTimer),this._checkTimer=null,this._lastKeystrokeAt=null,this._currentState=b("TypingStates").INACTIVE},setIgnoreKeys:function(a){this._ignoreKeys=b("createObjectFrom")(a)},destroy:function(){this._subscriptions.release()},_onunload:function(){this._currentState==b("TypingStates").TYPING&&this._transition(b("TypingStates").QUITTING)},_update:function(a){a=b("Event").getKeyCode(a);var c=this._currentState;if(!this._ignoreKeys[a]){a=this._getValueFn?this._getValueFn():b("Input").getValue(this._input);a.trim().length===0?c==b("TypingStates").TYPING&&this._transition(b("TypingStates").INACTIVE):c==b("TypingStates").TYPING?this._recordKeystroke():c==b("TypingStates").INACTIVE&&(this._transition(b("TypingStates").TYPING),this._recordKeystroke())}},_transition:function(a){this.reset(),this._currentState=a,this.inform("change",a)},_recordKeystroke:function(){this._lastKeystrokeTime=Date.now(),this._checkTimer||(this._checkTimer=setTimeout(this._checkTyping.bind(this),this._timeout))},_checkTyping:function(){var a=this._lastKeystrokeTime+this._timeout,c=Date.now();c>a?this._transition(b("TypingStates").INACTIVE):(clearTimeout(this._checkTimer),this._checkTimer=setTimeout(this._checkTyping.bind(this),a-c+10))}});e.exports=a}),null);
__d("TypingDetectorController",["ActorURI","AsyncRequest","AvailableList","AvailableListConstants","ChatVisibility","Keys","MercuryServerRequestsConfig","MessageRequestUtils","TypingDetector","TypingStates","clearTimeout","emptyFunction","ifRequired","setTimeoutAcrossTransitions","shield"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="/ajax/messaging/typ.php";a=function(){__p&&__p();function a(a,c,d,e,f,g,h,i){__p&&__p();if(!d)return;this.thread=a;this.userID=c;this.input=d;this.source=e;this.threadID=g;this.pageID=i;this.remoteState=b("TypingStates").INACTIVE;this.notifyTimer=null;f=f||{};this.notifyDelay=f.notifyDelay||this.notifyDelay;this._typingDetector=new(b("TypingDetector"))(d,h);this._typingDetector.init(f);this._typingDetector.subscribe("change",this._stateChange.bind(this))}var c=a.prototype;c.setUserAndThread=function(a,b){(this.userID!==a||this.threadID!==b)&&(this.resetState(),this.userID=a,this.threadID=b)};c.setIgnoreEnter=function(a){a=a?[b("Keys").RETURN]:[];this._typingDetector.setIgnoreKeys(a)};c.resetState=function(){this._notifyState(b("TypingStates").INACTIVE),this.remoteState=b("TypingStates").INACTIVE,this._typingDetector.reset(),b("clearTimeout")(this.notifyTimer),this.notifyTimer=null};c.destroy=function(){this.resetState(),this._typingDetector.destroy()};c._stateChange=function(a,c){c!=b("TypingStates").QUITTING?(b("clearTimeout")(this.notifyTimer),this.notifyTimer=b("setTimeoutAcrossTransitions")(b("shield")(this._notifyState,this,c),this.notifyDelay)):this._notifyState(c,!0)};c._notifyState=function(a,c){if(!this.userID&&!this.threadID||this.thread&&!this.pageID&&!b("MessageRequestUtils").shouldSendTypingIndicators(this.thread)||!b("ChatVisibility").isOnline()||a===this.remoteState||b("ifRequired")("ChannelConnection",function(a){return a.disconnected()},function(){return!0}))return;this._sendRequest(a,this.userID,c)};c._sendRequest=function(a,c,d){this.remoteState=a;a={typ:a,to:c,source:this.source,thread:this.threadID};var e=this.pageID?b("ActorURI").create(g,this.pageID):g;c=new(b("AsyncRequest"))().setHandler(this._onTypResponse.bind(this,c)).setErrorHandler(b("emptyFunction")).setData(a).setURI(e).setAllowCrossPageTransition(!0).setOption("asynchronous_DEPRECATED",!d);b("MercuryServerRequestsConfig").msgrRegion&&c.setRequestHeader("X-MSGR-Region",b("MercuryServerRequestsConfig").msgrRegion);c.send()};c._onTypResponse=function(a,c){c=c.getPayload()||{};c.offline&&b("AvailableList").set(a,b("AvailableListConstants").OFFLINE,"typing_response")};return a}();Object.assign(a.prototype,{notifyDelay:1e3});e.exports=a}),null);
__d("AccessibleLayer",["fbt","DOM","Event","Focus"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this._layer=a,this._listener=null}var c=a.prototype;c.enable=function(){this._afterShowSubscription=this._layer.subscribe("aftershow",this._onAfterShow.bind(this)),this._afterHideSubscription=this._layer.subscribe("hide",this._onAfterHide.bind(this))};c.disable=function(){this._listener&&this._listener.remove(),this._afterShowSubscription.unsubscribe(),this._listener=this._afterShowSubscription=null};c._closeListener=function(a){a=this._layer.getCausalElement();a&&(a.tabIndex==null?(a.tabIndex=-1,b("Focus").setWithoutOutline(a)):b("Focus").set(a));this._layer.hide()};c._setupCloseButton=function(){var a=this._layer.getContentRoot(),c=b("DOM").scry(a,".layer_close_elem")[0];c||(c=b("DOM").create("a",{className:"accessible_elem layer_close_elem",href:"#",role:"button"},[g._("Close pop-up and return")]),b("DOM").appendContent(a,c));this._listener=b("Event").listen(c,"click",this._closeListener.bind(this))};c._onAfterShow=function(){this._listener||this._setupCloseButton()};c._onAfterHide=function(){this._listener&&this._listener.remove(),this._listener=null};return a}();e.exports=a}),null);
__d("ContextualDialogARIA",["DOM","getOrCreateDOMID"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this._layer=a}var c=a.prototype;c.enable=function(){this._subscription=this._layer.subscribe("beforeshow",this._addAriaAttribute.bind(this))};c.disable=function(){this._subscription.unsubscribe(),this._subscription=null};c._addAriaAttribute=function(){var a=this._layer.getCausalElement();if(!a)return;var c=b("DOM").scry(this._layer.getRoot(),".accessible_elem");c.length&&a.setAttribute("aria-describedby",b("getOrCreateDOMID")(c[0]))};return a}();e.exports=a}),null);
__d("ContextualDialogDefaultTheme",["cx"],(function(a,b,c,d,e,f,g){a={wrapperClassName:"_53ip",arrowDimensions:{offset:15,length:16}};e.exports=a}),null);
__d("ContextualDialogFitInViewport_PUSHSAFE",["Style","Vector"],(function(a,b,c,d,e,f){__p&&__p();var g=50,h=10;a=function(){"use strict";__p&&__p();function a(a){this._layer=a,this._contentHeight=null,this._contextY=null}var c=a.prototype;c.enable=function(){var a=this._layer.getArrowDimensions();this._arrowOffset=a.offset;a=a.length;this._arrowBuffer=this._arrowOffset+a;this._subscription=this._layer.subscribe(["reposition"],function(a,b){if(!this._layer.isFixed()||b.isVertical())return;this._adjustPosition()}.bind(this))};c.disable=function(){this._subscription.unsubscribe(),this._subscription=null};c._getContentHeight=function(){return b("Vector").getElementDimensions(this._layer._contentWrapper).y};c._getContextY=function(){return b("Vector").getElementPosition(this._layer.getContext(),"viewport").y};c._adjustPosition=function(){var a=this._getContextY(),c=this._getContentHeight();if(a===this._contextY&&c===this._contentHeight)return;this._contextY=a;this._contentHeight=c;var d=b("Vector").getViewportDimensions().y;d=Math.min(Math.max(0,a+c+h-d),Math.max(0,a-g),c-this._arrowOffset-this._arrowBuffer);b("Style").set(this._layer.getContent(),"top",-d+"px")};return a}();e.exports=a}),null);
__d("AbstractContextualDialogKeepInViewportBehavior",["ContextualLayerDimensions","Event","Vector","abstractMethod","throttle"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this._layer=a,this._listeners=[],this._subscription=null,this._minimumTop=null}var c=a.prototype;c.enable=function(){var a=this._layer.getArrowDimensions();this._arrowOffset=a.offset;a=a.length;this._arrowBuffer=this._arrowOffset+a;this._subscription=this._layer.subscribe(["show","hide","reposition"],function(a,b){if(this._layer.isFixed())return;a=="reposition"?(this._calculateMinimumTop(b),this._adjustForScroll()):a=="show"?(this._attachScroll(),this._adjustForScroll()):this._detachScroll()}.bind(this));this._layer.isShown()&&this._attachScroll()};c.disable=function(){this._layer.isShown()&&this._detachScroll(),this._subscription.unsubscribe(),this._subscription=null};c.__adjustForScroll=function(a,c){return b("abstractMethod")("AbstractContextualDialogArrowBehavior","__adjustForScroll")};c._attachScroll=function(){var a=b("throttle")(this._adjustForScroll.bind(this)),c=this._layer.getContextScrollParent()||window;this._listeners=[b("Event").listen(c,"scroll",a),b("Event").listen(window,"resize",a)]};c._detachScroll=function(){while(this._listeners.length)this._listeners.pop().remove();this._listeners=[]};c._getContentHeight=function(){return!this._layer._contentWrapper?0:b("Vector").getElementDimensions(this._layer._contentWrapper).y};c._getContextY=function(){return b("Vector").getElementPosition(this._layer.getContext()).y};c._calculateMinimumTop=function(a){if(a.isVertical())return;this._minimumTop=this._getContextY()-(this._getContentHeight()-this._arrowBuffer)+a.getOffsetY()};c._adjustForScroll=function(){__p&&__p();var a=this._layer.getOrientation(),c=this._layer.getContent();if(a.isVertical()||!c)return;a=b("ContextualLayerDimensions").getViewportRect(this._layer);c=a.b-this._minimumTop;if(c<0)return;a=this._getContentHeight();var d=a-(this._arrowBuffer+this._arrowOffset);d=Math.max(0,Math.min(d,d-(c-a)));this.__adjustForScroll(this._layer,d)};return a}();e.exports=a}),null);
__d("ContextualDialogKeepInViewport",["AbstractContextualDialogKeepInViewportBehavior","Style"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.__adjustForScroll=function(a,c){a=a.getContent();b("Style").set(a,"top",-c+"px")};return c}(b("AbstractContextualDialogKeepInViewportBehavior"));e.exports=a}),null);
__d("LayerMouseHooks",["Arbiter","ContextualThing","Event","Layer"],(function(a,b,c,d,e,f){__p&&__p();var g=new(b("Arbiter"))();a=function(){"use strict";__p&&__p();function a(a){this._layer=a,this._subscriptions=[],this._currentlyActive=!1}var c=a.prototype;c.enable=function(){this._subscriptions=[g.subscribe("mouseenter",this._handleActive.bind(this)),g.subscribe("mouseleave",this._handleInactive.bind(this)),this._layer.subscribe("hide",function(){this._currentlyActive=!1}.bind(this))]};c.disable=function(){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=[];this._currentlyActive=!1};c._handleActive=function(a,b){!this._currentlyActive&&this._isNodeWithinStack(b)&&(this._layer.inform("mouseenter",b),this._currentlyActive=!0)};c._handleInactive=function(a,b){this._currentlyActive&&((!b||!this._isNodeWithinStack(b))&&(this._layer.inform("mouseleave",b),this._currentlyActive=!1))};c._isNodeWithinStack=function(a){return b("ContextualThing").containsIncludingLayers(this._layer.getContentRoot(),a)};return a}();b("Layer").subscribe("show",function(a,c){var d=c.getContentRoot(),e=[b("Event").listen(d,"mouseenter",function(){g.inform("mouseenter",d)}),b("Event").listen(d,"mouseleave",function(a){g.inform("mouseleave",a.getRelatedTarget())})],f=c.subscribe("hide",function(){while(e.length)e.pop().remove();f.unsubscribe();e=f=null})});e.exports=a}),null);
__d("ContextualDialog",["csx","cx","invariant","AccessibleLayer","ContextualDialogARIA","ContextualDialogArrow","ContextualDialogDefaultTheme","ContextualDialogFitInViewport_PUSHSAFE","ContextualDialogKeepInViewport","ContextualLayer","CSS","DOM","Event","JSXDOM","LayerButtons","LayerFormHooks","LayerHideOnTransition","LayerMouseHooks","LayerRefocusOnHide","Style","removeFromArray","shield"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j=0,k=300;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c){b=a.call(this,b,c)||this;b._footer=null;return b}var d=c.prototype;d._configure=function(c,d){Object.assign(c,c.theme||b("ContextualDialogDefaultTheme"));var e=c.arrowBehavior||b("ContextualDialogArrow");c.addedBehaviors=c.addedBehaviors||[];c.addedBehaviors.push(e);a.prototype._configure.call(this,c,d);this._footer=b("DOM").scry(d,"div._572u")[0];this._footer&&(this._footer.children.length===1&&this._footer.children[0].nodeName==="DIV"&&this._footer.children[0].children.length===0?this._footer.parentNode.removeChild(this._footer):b("CSS").addClass(this.getContentRoot(),"_kc"));c.hoverContext&&this._registerHoverHandlers(c.hoverContext,c.hoverShowDelay,c.hoverHideDelay)};d._registerHoverHandlers=function(a,c,d){__p&&__p();var e=this,f=c,g=d;f==null&&(f=j);g==null&&(g=k);var h,i;c=function(a){clearTimeout(i),h=setTimeout(b("shield")(e.show,e),f)};d=function(a){if(e._isHoverLocked())return;clearTimeout(h);i=setTimeout(e.hide.bind(e),g)};var l=b("Event").listen(a,"mouseenter",c),m=b("Event").listen(a,"mouseleave",d),n=this.subscribe("mouseenter",c),o=this.subscribe("mouseleave",d);this.subscribe("destroy",function(){clearTimeout(i),l.remove(),m.remove(),n.unsubscribe(),o.unsubscribe()})};d._getDefaultBehaviors=function(){var c=a.prototype._getDefaultBehaviors.call(this);b("removeFromArray")(c,b("LayerHideOnTransition"));return c.concat([b("AccessibleLayer"),b("LayerRefocusOnHide"),b("ContextualDialogKeepInViewport"),b("ContextualDialogFitInViewport_PUSHSAFE"),b("LayerButtons"),b("LayerFormHooks"),b("LayerMouseHooks"),b("ContextualDialogARIA")])};d._buildWrapper=function(c,d){__p&&__p();this._innerWrapper=b("JSXDOM").div(null,d);var e=a.prototype._buildWrapper.call(this,c,this._innerWrapper);if(c.wrapperClassName){var f=c.wrapperClassName.split(/\s+/);for(var f=f,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(g){if(h>=f.length)break;j=f[h++]}else{h=f.next();if(h.done)break;j=h.value}j=j;b("CSS").addClass(e,j)}}this.replaceEntireLayerContents(d);this.getContent()===d||i(0,5783);this.setWidth(c.width);return e};d.getContentRoot=function(){!this._innerWrapper&&i(0,5784);return this._innerWrapper};d.setContent=function(a){i(0,5785)};d.replaceEntireLayerContents=function(a){this._content=null,b("DOM").empty(this.getContentRoot()),this.setInnerContent(a)};d.setInnerContent=function(a){b("CSS").addClass(a,"_53ij"),this.getContent()?b("DOM").replace(this.getContent(),a):b("DOM").appendContent(this.getContentRoot(),a),this._content=a,this.isShown()&&this.updatePosition()};d.setWidth=function(a){b("Style").set(this.getContentRoot(),"width",a?Math.floor(a)+"px":"");return this};d.getFooter=function(){return this._footer};d.lockHover=function(){this._hoverLocked=!0;return this};d.unlockHover=function(){this._hoverLocked=!1;return this};d._isHoverLocked=function(){return!!this._hoverLocked};c.setContext=function(a,b){a.setContext(b)};return c}(b("ContextualLayer"));e.exports=a}),null);
__d("ReactAbstractContextualDialog",["ContextualDialog","ContextualDialogArrow","ContextualDialogKeepInViewport","LayerAutoFocus","LayerHideOnBlur","LayerHideOnEscape","LayerRefocusOnHide","React","ReactDOM"],(function(a,b,c,d,e,f){__p&&__p();var g=b("React").PropTypes;a={createSpec:function(a){__p&&__p();return{displayName:a.displayName,propTypes:{position:g.oneOf(["above","below","left","right"]),alignment:g.oneOf(["left","center","right"]),offsetX:g.number,offsetY:g.number,width:g.number,autoFocus:g.bool,focusContextOnHide:g.bool,arrowBehavior:g.func,behaviors:g.object,shown:g.bool,context:g.object,contextRef:g.func,dialogRole:g.oneOf(["dialog","region","alert"]),hoverContext:g.object,hoverContextRef:g.func,hoverShowDelay:g.number,hoverHideDelay:g.number,hideOnBlur:g.bool,hideOnEscape:g.bool,insertParent:g.object,keepInViewport:g.bool,label:g.node,labelledBy:g.string,onBeforeHide:g.func,onToggle:g.func,hasActionableContext:g.bool,"data-testid":g.string},immutableProps:{modal:null},createLayer:function(c){__p&&__p();var d=this.props.context||b("ReactDOM").findDOMNode(this.props.contextRef()),e=this.props.hoverContext||this.props.hoverContextRef&&b("ReactDOM").findDOMNode(this.props.hoverContextRef());this.isHoverContextSet=e!=null;e=babelHelpers["extends"]({context:d,hoverContext:e,hoverShowDelay:this.props.hoverShowDelay,hoverHideDelay:this.props.hoverHideDelay,position:this.props.position,alignment:this.props.alignment,offsetX:this.props.offsetX,offsetY:this.props.offsetY,width:this.props.width,dialogRole:this.props.dialogRole,label:this.props.label,labelledBy:this.props.labelledBy,shouldSetARIAProperties:!this.props.hasActionableContext,arrowBehavior:this.props.arrowBehavior||b("ContextualDialogArrow"),addedBehaviors:this.enumerateBehaviors(this.props.behaviors),"data-testid":this.props["data-testid"]},a||{});e=new(b("ContextualDialog"))(e,c);this.props.contextBounds&&e.setContextWithBounds(d,this.props.contextBounds);this.props.autoFocus!==!1&&e.enableBehavior(b("LayerAutoFocus"));this.props.hideOnBlur===!0&&e.enableBehavior(b("LayerHideOnBlur"));this.props.hideOnEscape===!0&&e.enableBehavior(b("LayerHideOnEscape"));this.props.focusContextOnHide===!1&&e.disableBehavior(b("LayerRefocusOnHide"));this.props.keepInViewport===!1&&e.disableBehavior(b("ContextualDialogKeepInViewport"));this.props.onBeforeHide&&e.subscribe("beforehide",this.props.onBeforeHide);this.props.insertParent&&e.setInsertParent(this.props.insertParent);e.conditionShow(this.props.shown);return e},receiveProps:function(a,c){this.updateBehaviors(c.behaviors,a.behaviors);var d=a.context||a.contextRef&&b("ReactDOM").findDOMNode(a.contextRef());d&&(a.contextBounds?this.layer.setContextWithBounds(d,a.contextBounds):this.layer.setContext(d));c.hideOnEscape!==a.hideOnEscape&&(a.hideOnEscape?this.layer.enableBehavior(b("LayerHideOnEscape")):this.layer.disableBehavior(b("LayerHideOnEscape")));this.layer.setPosition(a.position).setAlignment(a.alignment).setOffsetX(a.offsetX).setOffsetY(a.offsetY).setWidth(a.width);(!this.isHoverContextSet||a.shown!==void 0)&&this.layer.conditionShow(a.shown)}}}};e.exports=a}),null);
__d("XUIAmbientNUXBody.react",["cx","React","XUICloseButton.react","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("joinClasses")("_21es",this.props.className,this.props.noCloseButton?"_izg":null),c=this.props.noCloseButton?null:b("React").createElement(b("XUICloseButton.react"),{"data-testid":"remove_NUX",shade:"light",className:"layer_close_elem _36gl",onClick:this.props.onCloseButtonClick,onFocus:this.props.onFocus});return b("React").createElement("div",{className:a},c,b("React").createElement("div",{className:"__xn"},this.props.children))};return c}(b("React").Component);a.defaultProps={noCloseButton:!1};e.exports=a}),null);
__d("XUIAmbientNUXDarkTheme",["cx"],(function(a,b,c,d,e,f,g){a={wrapperClassName:"_6dh- _2x6q",arrowDimensions:{offset:14,length:18}};e.exports=a}),null);
__d("XUIAmbientNUXTheme",["cx"],(function(a,b,c,d,e,f,g){a={wrapperClassName:"_2x6q",arrowDimensions:{offset:14,length:18}};e.exports=a}),null);
__d("XUIAmbientNUX.react",["fbt","React","ReactAbstractContextualDialog","ReactLayer","XUIAmbientNUXBody.react","XUIAmbientNUXDarkTheme","XUIAmbientNUXTheme","uniqueID"],(function(a,b,c,d,e,f,g){__p&&__p();var h=300,i=380,j=b("ReactLayer").createClass(b("ReactAbstractContextualDialog").createSpec({displayName:"XUIAmbientNUX",theme:b("XUIAmbientNUXTheme")})),k=b("ReactLayer").createClass(b("ReactAbstractContextualDialog").createSpec({displayName:"XUIAmbientNUX",theme:b("XUIAmbientNUXDarkTheme")}));a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=b("uniqueID")(),d.$2=b("uniqueID")(),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$3=function(){switch(this.props.width){case"wide":return i;case"custom":return this.props.customwidth;case"auto":return null;default:return h}};d.$4=function(){return g._("Learn about this new feature")};d.render=function(){var a=this.props.labelledBy,c=null,d=null;a||(c=b("React").createElement("div",{"aria-label":this.props.label||this.$4(),id:this.$2,key:this.$2}),a=this.$2);var e=g._("Close");d=b("React").createElement("a",{className:"layer_close_elem accessible_elem",href:"#",id:this.$1,key:this.$1,"aria-label":e,"aria-labelledby":this.$1+" "+a,role:"button"});e=this.props.useDarkMode?k:j;return b("React").createElement(e,{alignment:this.props.alignment,autoFocus:!1,behaviors:this.props.behaviors,context:this.props.context,contextRef:this.props.contextRef,dialogRole:"region",focusContextOnHide:!1,hasActionableContext:this.props.hasActionableContext,hideOnBlur:this.props.hideOnBlur,insertParent:this.props.insertParent,labelledBy:a,offsetX:this.props.offsetX,offsetY:this.props.offsetY,onBeforeHide:this.props.onBeforeHide,position:this.props.position,shown:this.props.shown,width:this.$3()},b("React").createElement(b("XUIAmbientNUXBody.react"),{className:this.props.className,noCloseButton:this.props.noCloseButton,onCloseButtonClick:this.props.onCloseButtonClick,onFocus:this.props.onFocus},this.props.children,c,this.props.noCloseButton?d:null))};return c}(b("React").Component);a.defaultProps={hasActionableContext:!1,hideOnBlur:!1,noCloseButton:!1,shown:!1,useDarkMode:!1,width:"normal"};e.exports=a}),null);
__d("DragDropFileUpload",[],(function(a,b,c,d,e,f){f.isSupported=function(){return typeof FileList!=="undefined"}}),null);
__d("DocumentDragDrop",["Arbiter","CSS","DOMQuery","DragDropFileUpload","Event","emptyFunction","getObjectValues","getOrCreateDOMID"],(function(a,b,c,d,e,f){__p&&__p();var g={},h=0;function i(){h=0,b("getObjectValues")(g).forEach(function(a){b("CSS").removeClass(a.element,a.className),b("Arbiter").inform("dragleave",{element:a.element})})}var j=null;function k(){j&&clearTimeout(j),j=setTimeout(function(){i()},500)}var l=function(){__p&&__p();if(!b("DragDropFileUpload").isSupported())return;b("Event").listen(document,"dragenter",function(a){h===0&&b("getObjectValues")(g).forEach(function(c){b("CSS").addClass(c.element,c.className),b("Arbiter").inform("dragenter",{element:c.element,event:a})}),h++,k()});b("Event").listen(document,"dragleave",function(a){h--,h===0&&i(),k()});b("Event").listen(document,"drop",function(a){i();var c=a.getTarget();if(b("DOMQuery").isNodeOfType(a.getTarget(),"input")&&c.type==="file")return;a.prevent()});b("Event").listen(document,"dragover",b("Event").prevent);document.addEventListener("dragover",k,!0);l=b("emptyFunction")};a={init:function(){l()},registerStatusElement:function(a,c){l(),g[b("getOrCreateDOMID")(a)]={element:a,className:c},h>0&&b("CSS").addClass(a,c)},removeStatusElement:function(a){a=b("getOrCreateDOMID")(a);var c=g[a];c&&(b("CSS").removeClass(c.element,c.className),delete g[a])}};e.exports=a}),null);
__d("PhotosMimeType",[],(function(a,b,c,d,e,f){var g={isImage:function(a){return h(a)[0]==="image"},isJpeg:function(a){var b=h(a);return g.isImage(a)&&(b[1]==="jpeg"||b[1]==="pjpeg")}};function h(a){return a.split("/")}e.exports=g}),null);
__d("DataTransfer",["PhotosMimeType","createArrayFromMixed","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();var g=new RegExp("\r\n","g"),h="\n",i={"text/rtf":1,"text/html":1};function j(a){if(a.kind=="file")return a.getAsFile()}a=function(){"use strict";__p&&__p();function a(a){this.data=a,this.types=a.types?b("createArrayFromMixed")(a.types):[]}var c=a.prototype;c.isRichText=function(){if(this.getHTML()&&this.getText())return!0;return this.isImage()?!1:this.types.some(function(a){return i[a]})};c.getText=function(){var a;this.data.getData&&(!this.types.length?a=this.data.getData("Text"):this.types.indexOf("text/plain")!=-1&&(a=this.data.getData("text/plain")));return a?a.replace(g,h):null};c.getHTML=function(){if(this.data.getData)if(!this.types.length)return this.data.getData("Text");else if(this.types.indexOf("text/html")!=-1)return this.data.getData("text/html")};c.isLink=function(){return this.types.some(function(a){return a.indexOf("Url")!=-1||a.indexOf("text/uri-list")!=-1||a.indexOf("text/x-moz-url")!=-1})};c.getLink=function(){if(this.data.getData){if(this.types.indexOf("text/x-moz-url")!=-1){var a=this.data.getData("text/x-moz-url").split("\n");return a[0]}return this.types.indexOf("text/uri-list")!=-1?this.data.getData("text/uri-list"):this.data.getData("url")}return null};c.isImage=function(){__p&&__p();var a=this.types.some(function(a){return a.indexOf("application/x-moz-file")!=-1});if(a)return!0;a=this.getFiles();for(var c=0;c<a.length;c++){var d=a[c].type;if(!b("PhotosMimeType").isImage(d))return!1}return!0};c.getCount=function(){if(Object.prototype.hasOwnProperty.call(this.data,"items"))return this.data.items.length;else if(Object.prototype.hasOwnProperty.call(this.data,"mozItemCount"))return this.data.mozItemCount;else if(this.data.files)return this.data.files.length;return null};c.getFiles=function(){if(this.data.items)return Array.prototype.slice.call(this.data.items).map(j).filter(b("emptyFunction").thatReturnsArgument);else if(this.data.files)return Array.prototype.slice.call(this.data.files);else return[]};c.hasFiles=function(){return this.getFiles().length>0};return a}();e.exports=a}),null);
__d("DragDropTarget",["Arbiter","CSS","DataTransfer","DocumentDragDrop","DragDropFileUpload","Event","SubscriptionsHandler","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();function a(a){this._element=a,this._listeners=new(b("SubscriptionsHandler"))(),this._statusElem=a,this._dragEnterCount=0,this._enabled=!1}Object.assign(a.prototype,{_onFilesDropCallback:b("emptyFunction"),_onURLDropCallback:b("emptyFunction"),_onPlainTextDropCallback:b("emptyFunction"),_onDropCallback:b("emptyFunction"),_fileFilterFn:b("emptyFunction").thatReturnsArgument,setOnDocumentDragEnterCallback:function(a){this._onDocumentDragEnterCallback=a;return this},setOnDocumentDragLeaveCallback:function(a){this._onDocumentDragLeaveCallback=a;return this},setOnDragEnterCallback:function(a){this._onDragEnterCallback=a;return this},setOnDragLeaveCallback:function(a){this._onDragLeaveCallback=a;return this},setOnFilesDropCallback:function(a){this._onFilesDropCallback=a;return this},setOnURLDropCallback:function(a){this._onURLDropCallback=a;return this},setOnPlainTextDropCallback:function(a){this._onPlainTextDropCallback=a;return this},setOnDropCallback:function(a){this._onDropCallback=a;return this},enable:function(){__p&&__p();if(!b("DragDropFileUpload").isSupported())return this;this._listeners.engage();b("DocumentDragDrop").registerStatusElement(this._statusElem,"fbWantsDragDrop");this._listeners.addSubscriptions(b("Event").listen(this._element,"dragenter",this._onDragEnter.bind(this)),b("Event").listen(this._element,"dragleave",this._onDragLeave.bind(this)),b("Event").listen(this._element,"dragover",this._onDragOver.bind(this)),b("Event").listen(this._element,"drop",function(a){__p&&__p();this._dragEnterCount=0;b("CSS").removeClass(this._statusElem,"fbDropReady");b("CSS").removeClass(this._statusElem,"fbDropReadyPhoto");b("CSS").removeClass(this._statusElem,"fbDropReadyPhotos");b("CSS").removeClass(this._statusElem,"fbDropReadyLink");var c=new(b("DataTransfer"))(a.dataTransfer),d={},e=!1,f=this._fileFilterFn(a.dataTransfer.files);f.length&&(this._onFilesDropCallback(f,a),d.files=f,e=!0);f=c.getLink();f&&(this._onURLDropCallback(f,a),d.url=f,e=!0);f=c.getText();f&&(this._onPlainTextDropCallback(f,a),d.plainText=f,e=!0);e&&this._onDropCallback(d,a);a.kill()}.bind(this)));this._listeners.addSubscriptions(b("Arbiter").subscribe("dragenter",this._onDocumentDragEnter.bind(this)),b("Arbiter").subscribe("dragleave",this._onDocumentDragLeave.bind(this)));this._enabled=!0;return this},disable:function(){__p&&__p();if(!this._enabled)return this;b("DocumentDragDrop").removeStatusElement(this._statusElem,"fbWantsDragDrop");b("CSS").removeClass(this._statusElem,"fbDropReady");b("CSS").removeClass(this._statusElem,"fbDropReadyPhoto");b("CSS").removeClass(this._statusElem,"fbDropReadyPhotos");b("CSS").removeClass(this._statusElem,"fbDropReadyLink");this._listeners.release();this._enabled=!1;return this},setFileFilter:function(a){this._fileFilterFn=a;return this},setStatusElement:function(a){this._statusElem=a;return this},_onDragEnter:function(a){if(this._dragEnterCount===0){var c=new(b("DataTransfer"))(a.dataTransfer);b("CSS").addClass(this._statusElem,"fbDropReady");c.isLink()||!c.isImage()?b("CSS").addClass(this._statusElem,"fbDropReadyLink"):c.getCount()>1?b("CSS").addClass(this._statusElem,"fbDropReadyPhotos"):b("CSS").addClass(this._statusElem,"fbDropReadyPhoto");this._onDragEnterCallback&&this._onDragEnterCallback()}this._dragEnterCount++;a.preventDefault()},_onDragLeave:function(a){this._dragEnterCount=Math.max(this._dragEnterCount-1,0),this._dragEnterCount===0&&(b("CSS").removeClass(this._statusElem,"fbDropReady"),b("CSS").removeClass(this._statusElem,"fbDropReadyPhoto"),b("CSS").removeClass(this._statusElem,"fbDropReadyPhotos"),b("CSS").removeClass(this._statusElem,"fbDropReadyLink"),this._onDragLeaveCallback&&this._onDragLeaveCallback())},_onDragOver:function(a){if(!a.dataTransfer){b("Event").kill(a);return}try{var c=a.dataTransfer.effectAllowed;a.dataTransfer.dropEffect=c=="move"||c=="linkMove"?"move":"copy"}catch(a){}b("Event").kill(a)},_onDocumentDragEnter:function(a,b){this._onDocumentDragEnterCallback&&b.element==this._element&&this._onDocumentDragEnterCallback()},_onDocumentDragLeave:function(a,b){this._dragEnterCount=0,this._onDragLeave(a),this._onDocumentDragLeaveCallback&&b.element==this._element&&this._onDocumentDragLeaveCallback()}});e.exports=a}),null);
__d("EventPlanExperiment",["EventRemindersGating","QE2Logger"],(function(a,b,c,d,e,f){"use strict";var g="event_plan_entry_point_nux";a={shouldShowEntryPointNuxWithExposure:function(){b("QE2Logger").logExposureForUser(g);return b("EventRemindersGating").shouldShowEntryPointNux},shouldShowReminderExtension:function(){b("QE2Logger").logExposureForUser("omni_m_experiments_reminders");return b("EventRemindersGating").omniMAlwaysShowReminderExtension}};e.exports=a}),null);
__d("XEventReminderController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/eventreminder/",{event_reminder_id:{type:"Int",required:!0}})}),null);
__d("EventReminderRequestHelper",["AsyncRequest","EventReminderActions","XEventReminderController"],(function(a,b,c,d,e,f){"use strict";a={fetchEventReminder:function(a,c,d){var e=b("XEventReminderController").getURIBuilder().setInt("event_reminder_id",c);new(b("AsyncRequest"))(e.getURI()).setHandler(function(e){e.payload&&(b("EventReminderActions").updateEventReminder(a,e.payload,c),d())}).send()}};e.exports=a}),null);
__d("WaterfallIDGenerator",["CurrentUser","md5"],(function(a,b,c,d,e,f){function g(){var a=2147483647;return Math.random()*a}function h(){return Math.floor(Date.now()/1e3)}a={generate:function(){return b("md5")([b("CurrentUser").getID(),h(),g()].join(":"))}};e.exports=a}),null);
__d("IgnoreMessagesTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:IgnoreMessagesLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:IgnoreMessagesLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:IgnoreMessagesLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEvent=function(a){this.$1.event=a;return this};c.setPlatform=function(a){this.$1.platform=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={event:!0,platform:!0,thread_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerMessageRequestsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageRequestsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageRequestsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageRequestsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAction=function(a){this.$1.action=a;return this};c.setAppID=function(a){this.$1.appid=a;return this};c.setAppversion=function(a){this.$1.appversion=a;return this};c.setClienttime=function(a){this.$1.clienttime=a;return this};c.setContainermodule=function(a){this.$1.containermodule=a;return this};c.setCountry=function(a){this.$1.country=a;return this};c.setEntryPoint=function(a){this.$1.entry_point=a;return this};c.setExtraClientData=function(a){this.$1.extra_client_data=a;return this};c.setFolderType=function(a){this.$1.folder_type=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setSurface=function(a){this.$1.surface=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setThreadKey=function(a){this.$1.thread_key=a;return this};c.setThreadKeyList=function(a){this.$1.thread_key_list=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={action:!0,appid:!0,appversion:!0,clienttime:!0,containermodule:!0,country:!0,entry_point:!0,extra_client_data:!0,folder_type:!0,name:!0,surface:!0,thread_id:!0,thread_key:!0,thread_key_list:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("SimpleNUXMessageTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:SimpleNUXMessageLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:SimpleNUXMessageLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:SimpleNUXMessageLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEvent=function(a){this.$1.event=a;return this};c.setEventTimestamp=function(a){this.$1.event_timestamp=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setNuxMessageType=function(a){this.$1.nux_message_type=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={event:!0,event_timestamp:!0,name:!0,nux_message_type:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("StickersTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:StickersLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:StickersLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:StickersLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEvent=function(a){this.$1.event=a;return this};c.setNumsearchresults=function(a){this.$1.numsearchresults=a;return this};c.setPackid=function(a){this.$1.packid=a;return this};c.setPackids=function(a){this.$1.packids=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setSearchtoken=function(a){this.$1.searchtoken=a;return this};c.setStickerid=function(a){this.$1.stickerid=a;return this};c.setTagid=function(a){this.$1.tagid=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTriggeredword=function(a){this.$1.triggeredword=a;return this};c.setTriggerused=function(a){this.$1.triggerused=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={event:!0,numsearchresults:!0,packid:!0,packids:!0,searchtoken:!0,stickerid:!0,tagid:!0,time:!0,triggeredword:!0,triggerused:!0,weight:!0};e.exports=a}),null);
__d("ChatInitialDataTransformer.bs",["bs_array","bs_js_dict","bs_caml_array","bs_caml_format","bs_js_primitive","MessengerServerPayloadTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.viewer,d=a.is_page,e=[],f=[],g={},h=[],i={},j=[];b("bs_array").iter(function(a){__p&&__p();if(a==null)return 0;else{var k=b("MessengerServerPayloadTransformer.bs").getThreadFBID(a),l=b("MessengerServerPayloadTransformer.bs").getOtherUserID(a),m=b("MessengerServerPayloadTransformer.bs").transformThread(c,a,d);e.push(m);var n=b("MessengerServerPayloadTransformer.bs").transformMessages(c,a,d);n!==void 0&&b("bs_array").iter(function(a){f.push(a);return 0},n);n=b("MessengerServerPayloadTransformer.bs").getMessagePageInfo(a);n!==void 0&&(b("bs_js_primitive").valFromOption(n).has_previous_page||(k==null?l==null||j.push({type:"thread",fbid:l}):j.push({type:"thread",fbid:k})));n=b("MessengerServerPayloadTransformer.bs").transformReadReceipts(c,a);if(n!==void 0){n=b("bs_js_primitive").valFromOption(n);k==null||(g[k]=n);l==null||(g[l]=n)}k=b("MessengerServerPayloadTransformer.bs").transformDeliveryReceipts(a);if(k.length>=1){l=b("bs_caml_array").caml_array_get(k,0);if(m.is_canonical){n=m.other_user_fbid;n==null||h.push({other_user_fbid:n,thread_fbid:null,time:b("bs_caml_format").caml_float_of_string(l.timestamp_precise)})}else{k=m.thread_fbid;k==null||h.push({other_user_fbid:null,thread_fbid:k,time:b("bs_caml_format").caml_float_of_string(l.timestamp_precise)})}}n=b("MessengerServerPayloadTransformer.bs").transformParticipants(a);return b("bs_array").iter(function(a){i[a.fbid]=a;return 0},n)}},a.threads);return{threads:e,actions:f,roger:g,delivery_receipts:h,participants:b("bs_js_dict").values(i),end_of_history:j}}f.transform=a}),null);
__d("ChatInitialDataTransformerServerCallableWrapper",["ChatInitialDataTransformer.bs"],(function(a,b,c,d,e,f){"use strict";b("ChatInitialDataTransformer.bs"),e.exports={}}),null);
__d("ChatAnimatedGifs",["URI"],(function(a,b,c,d,e,f){__p&&__p();var g={shouldHideBody:function(a){__p&&__p();if(!a.has_attachment)return!1;for(var b=0;b<a.attachments.length;b++){var c=a.attachments[b];if(c.preview_url){c=g.getRawUrlFromSafeUrl(c.preview_url);if(a.body==c)return!0}}return!1},getRawUrlFromSafeUrl:function(a){return new(b("URI"))(a).getQueryData().url}};e.exports=g}),null);
__d("ChatNotificationConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NORMAL:0,NO_USER_MESSAGE_NOTIFICATION:1})}),null);
__d("ChatBehavior",["Arbiter","ArbiterMixin","AvailableList","AvailableListConstants","ChatNotificationConstants","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g=b("AvailableList").getWebChatNotification&&b("AvailableList").getWebChatNotification(),h=!1,i=!0;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.ON_CHANGED="changed",b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.notifiesUserMessages=function(){return g!==b("ChatNotificationConstants").NO_USER_MESSAGE_NOTIFICATION};d.ignoresRemoteTabRaise=function(){return h};d.showsTabUnreadUI=function(){return i};return c}(b("mixin")(b("ArbiterMixin")));var j=new a();function k(){j.inform(j.ON_CHANGED)}b("AvailableList").subscribe&&b("AvailableList").subscribe(b("AvailableListConstants").ON_CHAT_NOTIFICATION_CHANGED,function(){var a=g,c=b("AvailableList").getWebChatNotification();g=c;a!=c&&k()});b("Arbiter").subscribe("chat/set_does_page_occlude_tabs",function(a,b){h=!!b,k()});b("Arbiter").subscribe("chat/set_show_tab_unread_ui",function(a,b){i=!!b,k()});e.exports=j}),null);
__d("EmojiFormat.bs",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return a.split("_").map(function(a){return parseInt(a,16)})}function a(a){return a.map(function(a){return a.toString(16)}).join("_")}function h(a){return a.map(function(a){return String.fromCodePoint(a)}).join("")}function b(a){return h(g(a))}f.codeStringToCodeArray=g;f.codeArrayToCodeString=a;f.codeArrayToUnicode=h;f.codeStringToUnicode=b}),null);
__d("SkinToneEmoji.bs",["bs_caml_array","EmojiFormat.bs","MessengerEmojiConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){switch(a){case"1f385":case"1f3c3":case"1f3c4":case"1f3ca":case"1f3cb":case"1f442":case"1f443":case"1f446":case"1f447":case"1f448":case"1f449":case"1f44a":case"1f44b":case"1f44c":case"1f44d":case"1f44e":case"1f44f":case"1f450":case"1f466":case"1f467":case"1f468":case"1f469":case"1f46e":case"1f470":case"1f471":case"1f472":case"1f473":case"1f474":case"1f475":case"1f476":case"1f477":case"1f478":case"1f47c":case"1f481":case"1f482":case"1f483":case"1f485":case"1f486":case"1f487":case"1f4aa":case"1f575":case"1f590":case"1f595":case"1f596":case"1f645":case"1f646":case"1f647":case"1f64b":case"1f64c":case"1f64d":case"1f64e":case"1f64f":case"1f6a3":case"1f6b4":case"1f6b5":case"1f6b6":case"1f6c0":case"1f918":case"261d":case"26f9":case"270a":case"270b":case"270c":case"270d":return!0;default:return!1}}function h(a){var c=b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039;if(c)return b("bs_caml_array").caml_array_get(a,a.length-1|0);else return 0}function i(a){if(b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039)return a;else{a=a.slice(0);return a.concat([65039])}}function j(a){var b=h(a)===0;if(b)return a;else return a.slice(0,a.length-1|0)}function k(a){var c=b("MessengerEmojiConfig").emoji_colors;c=c.filter(function(b){return b===a});return c.length!==0}function l(a){a=j(a);if(a.length<=1||!k(b("bs_caml_array").caml_array_get(a,a.length-1|0)))return 0;else return b("bs_caml_array").caml_array_get(a,a.length-1|0)}function m(a){var b=h(a),c=b===0;c=c?l(a):l(a.slice(0,a.length-1|0));if(c!==0){c=b===0;if(c)return a.slice(0,a.length-1|0);else return i(a.slice(0,a.length-2|0))}else return a}function a(a,b){__p&&__p();if(b!==0){var c=h(a),d=c===0;d=d?a.slice(0):a.slice(0,a.length-1|0);var e=l(d);if(e!==0)return a;else{e=d.concat([b]);d=c===0;if(d)return e;else return e.concat([c])}}else return a}function c(a){return m(j(a))}function d(a){return g(b("EmojiFormat.bs").codeArrayToCodeString(m(j(a))))}e=65039;f.emoji_modifier_code=e;f.emoji=g;f.getEmojiModifier=h;f.addEmojiModifier=i;f.removeEmojiModifier=j;f.isToneModifier=k;f.getTone=l;f.removeTone=m;f.applyTone=a;f.removeAllModifiers=c;f.hasVariations=d}),null);
__d("MessengerEmojiTransitionMapping.bs",["bs_caml_array","EmojiFormat.bs","SkinToneEmoji.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){switch(a){case"1f3c3":case"1f3c4":case"1f3ca":case"1f3cb":case"1f3cc":case"1f46e":case"1f46f":case"1f471":case"1f473":case"1f477":case"1f481":case"1f482":case"1f486":case"1f487":case"1f575":case"1f645":case"1f646":case"1f647":case"1f64b":case"1f64d":case"1f64e":case"1f6a3":case"1f6b4":case"1f6b5":case"1f6b6":case"26f9":return!0;default:return!1}}function h(a){var c=b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039;if(c)return b("bs_caml_array").caml_array_get(a,a.length-1|0);else return 0}function i(a){if(b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039)return a;else{a=a.slice(0);return a.concat([65039])}}function j(a){var b=h(a)===0;if(b)return a;else return a.slice(0,a.length-1|0)}function k(a){if(a===9792)return!0;else return a===9794}function l(a){a=j(a);if(a.length<=1||!k(b("bs_caml_array").caml_array_get(a,a.length-1|0)))return 0;else return b("bs_caml_array").caml_array_get(a,a.length-1|0)}function m(a){var b=h(a),c=b===0;c=c?l(a):l(a.slice(0,a.length-1|0));if(c!==0){c=b===0;if(c)return a.slice(0,a.length-2|0);else return i(a.slice(0,a.length-3|0))}else return a}function n(a,b){__p&&__p();if(b!==0){var c=h(a),d=c===0;d=d?a.slice(0):a.slice(0,a.length-1|0);var e=l(d);if(e!==0)return a;else{e=d.concat([8205,b]);d=c===0;if(d)return e;else return e.concat([c])}}else return a}function a(a){return n(a,9792)}function c(a){return m(b("SkinToneEmoji.bs").removeTone(a))}function d(a){return g(b("EmojiFormat.bs").codeArrayToCodeString(m(b("SkinToneEmoji.bs").removeTone(a))))}function e(a){a=b("EmojiFormat.bs").codeArrayToCodeString(m(b("SkinToneEmoji.bs").removeTone(a)));switch(a){case"1f46a":case"1f48f":case"1f491":return!0;default:return!1}}var o=65039,p=9792,q=9794,r=8205;f.emoji_modifier_code=o;f.gender_female=p;f.gender_male=q;f.zero_join=r;f.emoji=g;f.getEmojiModifier=h;f.addEmojiModifier=i;f.removeEmojiModifier=j;f.isGenderModifier=k;f.getGender=l;f.removeGender=m;f.applyGender=n;f.makeFemale=a;f.removeAllModifiers=c;f.hasGender=d;f.isBlacklisted=e}),null);
__d("MessengerSupportedEmojiUtils",["cx","EmojiImageURL","EmojiLikeConstants","EmojiRenderer","EmoticonEmojiList","FBEmojiAliases","FBEmojiResource","Image.react","MessengerEmojiTransitionMapping.bs","MessengerHotlikeEmoji.bs","MessengerSupportedEmoji","React","SupportedEmoji3","SupportedFacebookEmoji","Utf16","gkx","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=/_fe0f/g,i=new RegExp("(\r\n|[ \r\n]|s)");a={getSupportedEmojiKey:function(a){__p&&__p();if(!a)return null;var c=null,d=this.parse(a);if(d.length===1&&d[0].length===a.length){a=d[0].emoji.map(function(a){return b("Utf16").decode(a)});c=a.map(function(a){return a.toString(16)}).join("_").replace(h,"")}if(c){d=b("FBEmojiAliases")[c];d&&(c=d.replace(h,""))}return this.isSupportedEmojiKey(c)?c:null},isSupportedEmoji:function(a){return!!this.getSupportedEmojiKey(a)},isSupportedEmojiKey:function(a){if(!a)return!1;if(!b("MessengerHotlikeEmoji.bs").isMessengerHotlike(a)){var c=function(a){var c=b("FBEmojiAliases")[a];return c?c.replace(h,""):a}(a);return!!b("SupportedFacebookEmoji")[c]||!!b("SupportedEmoji3")[c]}return!!b("MessengerSupportedEmoji").emoji[a]},isMessengerSupportedEmojiKey:function(a){return!!(a&&b("MessengerSupportedEmoji").emoji[a])},getSupportedEmojiCodesArray:function(a){__p&&__p();if(!a)return null;var c=this.parse(a);if(c.length===1&&c[0].length===a.length){a=c[0].emoji.map(function(a){return b("Utf16").decode(a)});c=a.map(function(a){return a.toString(16)}).join("_").replace(h,"");if(this.isSupportedEmojiKey(c))return a}return null},getEmojiKeyFromCodes:function(a){a=a.map(function(a){return a.toString(16)}).join("_").replace(h,"");var c=b("FBEmojiAliases")[a];return c?c.replace(h,""):a},getClassSizeMap:function(){var a,c=b("EmojiLikeConstants").size;return a={},a[c.XSMALL]="_2560",a[c.SMALL]="_1ifu",a[c.MEDIUM]="_19_r",a[c.LARGE]="_19_s",a},getEmojiMatchObj:function(a){a=this.parse(a,1);if(a.length!==1)return null;var c=a[0].emoji,d=a[0].emoji.map(function(a){return b("Utf16").decode(a)});b("MessengerEmojiTransitionMapping.bs").hasGender(d)&&!b("MessengerEmojiTransitionMapping.bs").getGender(d)&&(d=b("MessengerEmojiTransitionMapping.bs").makeFemale(d));d=d.map(function(a){return a.toString(16)}).join("_").replace(h,"");return{emoji_key:d,emoji_str:c.join(""),is_supported:this.isSupportedEmojiKey(d),offset:a[0].offset,length:a[0].length}},getNewEmojiData:function(a,c){__p&&__p();if(!a)return null;a=this.getSupportedEmojiKey(a);if(!a)return null;var d=this.getClassSizeMap();c=this.transferSize(c);b("EmojiLikeConstants").sizeMap[c]||(c=b("EmojiLikeConstants").size.XSMALL);d=b("joinClasses")(d[c],"_1ift");c=b("EmojiLikeConstants").sizeMap[c];c=b("MessengerHotlikeEmoji.bs").isMessengerHotlike(a)?b("EmojiImageURL").getMessengerURL(a,c):new(b("FBEmojiResource"))(a).getImageURL(c);return c==null?null:{emoji:b("React").createElement(b("Image.react"),{className:d,src:c}),emoji_key:a,url:c}},getHotLikeEmojiDataTransition:function(a,c){__p&&__p();if(!a)return null;a=this.getSupportedEmojiKey(a,!0);if(!a)return null;var d=this.getClassSizeMap();c=this.transferSize(c);var e=c===b("EmojiLikeConstants").size.MEDIUM?b("EmojiLikeConstants").size.LARGE:c;b("EmojiLikeConstants").sizeMap[c]||(c=b("EmojiLikeConstants").size.XSMALL);d=b("joinClasses")(d[c],"_1ift");c=b("EmojiLikeConstants").sizeMap[e];e=b("MessengerHotlikeEmoji.bs").isMessengerHotlike(a)?b("EmojiImageURL").getMessengerURL(a,c):new(b("FBEmojiResource"))(a).getImageURL(c);return e==null?null:{emoji:b("React").createElement(b("Image.react"),{className:d,src:e}),emoji_key:a,url:e}},getHotLikeEmojiData:function(a,c){__p&&__p();if(!a)return null;a=this.getSupportedEmojiKey(a);if(!a)return null;var d=this.getClassSizeMap();c=this.transferSize(c);var e=c===b("EmojiLikeConstants").size.MEDIUM?b("EmojiLikeConstants").size.LARGE:c;b("EmojiLikeConstants").sizeMap[c]||(c=b("EmojiLikeConstants").size.XSMALL);d=b("joinClasses")(d[c],"_1ift");c=b("EmojiLikeConstants").sizeMap[e];e=b("MessengerHotlikeEmoji.bs").isMessengerHotlike(a)?b("EmojiImageURL").getMessengerURL(a,c):new(b("FBEmojiResource"))(a).getImageURL(c);return e==null?null:{emoji:b("React").createElement(b("Image.react"),{className:d,src:e}),emoji_key:a,url:e}},getEmojiOnlyContents:function(a){__p&&__p();a=a||"";var c=[];while(a.length>0&&a.trim().length>0){var d=i.exec(a),e="";while(d&&d.length&&d.index===0)e+=d[0],a=a.replace(i,""),d=i.exec(a);e.length>0&&c.push({text:e});d=b("EmoticonEmojiList").noncapturingRegexp.exec(a);if(d&&d.index===0){e=b("EmoticonEmojiList").names[d[1]];e=b("EmoticonEmojiList").emote2emojis[e];c.push({emojiKey:e,text:d[1]});a=a.replace(d[1],"")}else{d=this.getEmojiMatchObj(a);if(d&&d.is_supported)c.push({emojiKey:d.emoji_key,text:d.emoji_str}),a=a.replace(d.emoji_str,"");else return null}}return c},getUrl:function(a,c){a=a.replace(h,"");c=this.transferSize(c);if(b("gkx")("678639")&&!b("MessengerHotlikeEmoji.bs").isMessengerHotlike(a)){var d=b("FBEmojiAliases")[a];d&&(a=d.replace(h,""));return!this.isSupportedEmojiKey(a)?null:new(b("FBEmojiResource"))(a).getImageURL(b("EmojiLikeConstants").sizeMap[c])}return!b("MessengerSupportedEmoji").emoji[a]?null:b("EmojiImageURL").getMessengerURL(a,b("EmojiLikeConstants").sizeMap[c])},containsEmoji:function(a){return this.parse(a,1).length===1},parse:function(a,c){return b("EmojiRenderer").parse(a,c)},transferSize:function(a){return b("EmojiLikeConstants").sizeMapTransfer[a]||a}};e.exports=a}),null);
__d("URLMatcher",["URLMatcherConfig"],(function(a,b,c,d,e,f){__p&&__p();a="!\"#%&'()*,-./:;<>?@[\\]^_`{|}";c="\u2000-\u206f\xab\xbb\uff08\uff09";d="(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])";f="(?:(?:ht|f)tps?)://";d="(?:(?:"+d+"[.]){3}"+d+")";var g="\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]",h="(?:\\b)www\\d{0,3}[.]";a="[^\\s"+a+c+"]";c="(?:(?:(?:[.:\\-_%@]|"+a+")*"+a+")|"+g+")";a="(?::\\d+){0,1}";var i="(?=[/?#])";b=b("URLMatcherConfig").tlds;var j="(?:(?:"+f+c+a+")|(?:"+d+a+")|(?:"+g+a+")|(?:"+h+c+b+a+")|(?:"+c+b+a+i+"))";i="(?:(?:"+f+c+a+")|(?:"+d+a+")|(?:"+g+a+")|(?:"+h+c+b+a+")|(?:"+c+b+a+"))";d="[/#?]";g="\\([^\\s()<>]+\\)";var k="[^\\s()<>?#]+",l=new RegExp(j,"im"),m="^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]",n=new RegExp(m,"im"),o="(?:(?:"+d+")(?:(?:"+g+"|"+k+")*)*)*",p=new RegExp("((?:"+i+")(?:"+o+"))","im"),q=new RegExp("((?:"+f+c+a+")|(?:"+h+c+b+a+"))"),r=/[\s\'\";]/,s=new RegExp(d,"im"),t=new RegExp("[\\s!\"#%&'()*,./:;<>?@[\\]^`{|}\xab\xbb\u2000-\u206f\uff08\uff09]","im"),u=new RegExp("[\\s()<>?#]","im"),v=new RegExp("\\s()<>"),w=function(a){if(a&&a.indexOf("@")!=-1)return q.exec(a)?a:null;else return a},x=function(a){return new RegExp("((?:"+j+")(?:"+o+"))",a)};m=function(a){return y(a,x("im"))};g=function(a){return z(a,x("igm"))};k=function(a){return y(a,p)};var y=function(a,b){b=(b.exec(a)||[])[1]||null;return w(b)},z=function(a,b){return((a=a.match(b))==null?void 0:a.filter(Boolean))||[]};i=function(a){return l.exec(a)};f=function(a){return!r.test(a.charAt(a.length-1))};h=function(a){__p&&__p();do{var b=l.exec(a);if(!b)return null;var c=!1;if(b[0][0]==="["&&b.index>0&&a[b.index-1]==="@"){var d=n.exec(b[0]);d&&(c=!0,a=a.substr(b.index+d[0].length))}}while(c);d=a.substr(b.index+b[0].length);if(d.length===0||!s.test(d[0]))return w(b[0]);c=0;a=0;var e=1,f=0,g=a;for(var h=1;h<d.length;h++){var i=d[h];if(g===a){if(i==="(")f=f+1,g=e;else if(s.test(i)||!t.test(i))c=h;else if(u.test(i))break}else if(i==="(")f=f+1;else if(i===")")f=f-1,f===0&&(g=a,c=h);else if(v.test(i))break}return w(b[0]+d.substring(0,c+1))};c={};c.permissiveHostPathMatch=k;c.permissiveMatch=m;c.permissiveMultiMatch=g;c.matchToPattern=y;c.multiMatchToPattern=z;c.matchHost=i;c.trigger=f;c.match=h;e.exports=c}),null);
__d("URLScraper",["ArbiterMixin","DataStore","Event","URLMatcher","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g="scraperLastPermissiveMatch";a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c){var d;d=a.call(this)||this;d.input=b;d.enable();d.getValueFn=c;return d}var d=c.prototype;d.reset=function(){b("DataStore").set(this.input,g,null)};d.enable=function(){if(this.events)return;var a=function(a){setTimeout(this.check.bind(this,a),30)};this.events=b("Event").listen(this.input,{paste:a.bind(this,!1),keydown:a.bind(this,!0)})};d.disable=function(){if(!this.events)return;for(var a in this.events)this.events[a].remove();this.events=null};d.check=function(a){var d=this.getValueFn?this.getValueFn():this.input.value;if(a&&c.trigger(d))return;a=c.match(d);d=b("URLMatcher").permissiveMatch(d);d&&d!=b("DataStore").get(this.input,g)&&(b("DataStore").set(this.input,g,d),this.inform("match",{url:a||d,alt_url:d}))};return c}(b("mixin")(b("ArbiterMixin")));Object.assign(a,b("URLMatcher"));e.exports=a}),null);
__d("getURLRanges",["UnicodeUtils","URI","URLScraper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=[],d=0;while(!0){var e=a.substr(d),f=b("URLScraper").match(e);if(!f)break;var g=f;/^[a-z][a-z0-9\-+.]+:\/\//i.test(f)||(g="http://"+f);if(!b("URI").isValidURI(g))break;var h=e.indexOf(f);e=b("UnicodeUtils").strlen(e.substr(0,h));d+=e;h=f.length;c.push({offset:d,length:f.length,entity:{url:g}});d+=h}return c}e.exports=a}),null);
__d("ChatBubble.react",["cx","BootloadedComponent.react","DOMDimensions","EmojiOnlyMessage.react","ErrorBoundary.react","JSResource","MercuryConfig","MercuryMessageBody.react","MercuryMessageRenderLocations","MessageReplyPermissions","MessengerMathUtils","MessengerSupportedEmojiUtils","React","ReactDOM","joinClasses","messengerCustomColorUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;var h=2;c=b("React").createClass({displayName:"ChatBubble",_boxWidth:0,_repliedToMessageRef:null,propTypes:{attachments:a.node,body:a.string,className:a.string,customColor:a.string,customLike:a.object,isEmojiLike:a.bool,isFromViewer:a.bool,maxWidth:a.number.isRequired,message:a.object,metaRanges:a.array,onReplyToMessage:a.func,ranges:a.array,threadCustomColor:a.string,threadID:a.string},getInitialState:function(){return{emojis:void 0,bubbleWidth:null}},componentDidMount:function(){if(this.props.attachments&&!this.props.isEmojiLike)return;if(!this.props.emojis){var a=this.props.body||"";a=b("MessengerSupportedEmojiUtils").getEmojiOnlyContents(a);a&&a.length&&this.setState({emojis:a})}this._restyleBubble(this.props)},componentDidUpdate:function(a){(a.maxWidth!==this.props.maxWidth||a.body!==this.props.body||!a.attachments&&this.props.attachments)&&this._restyleBubble(a)},render:function(){__p&&__p();var a=this.props,c=a.attachments,d=a.body;d=d===void 0?"":d;var e=a.className,f=a.maxWidth;a=babelHelpers.objectWithoutPropertiesLoose(a,["attachments","body","className","maxWidth"]);a=Object.assign({},a);delete a.customColor;delete a.customLike;delete a.isEmojiLike;delete a.isFromViewer;delete a.message;delete a.metaRanges;delete a.ranges;delete a.threadCustomColor;delete a.threadID;return b("React").createElement("div",babelHelpers["extends"]({},a,{className:b("joinClasses")("_5w1r"+(this.state.emojis?"":" _3_om")+(this.state.emojis?" _31xx":"")+(((a=this.props)==null?void 0:(a=a.message)==null?void 0:(a=a.replied_to_message)==null?void 0:(a=a.message)==null?void 0:a.body)&&!b("MercuryConfig").SM3BD?" _1vmy":""),e),ref:"bubble",style:{maxWidth:f,width:this.state.emojis?null:this.state.bubbleWidth,wordWrap:d.length>=15?"break-word":"inherit"}}),b("React").createElement("div",{className:"_4gx_",ref:"inner"},this._renderContent(),c))},_renderContent:function(){if(!this.props.body||this.props.isEmojiLike)return null;var a={},c=null;this.state.emojis?c=b("React").createElement(b("EmojiOnlyMessage.react"),{contents:this.state.emojis}):(c=b("React").createElement(b("MercuryMessageBody.react"),{body:this.props.body,ranges:this.props.ranges,metaRanges:this.props.metaRanges,threadID:this.props.threadID,customLike:this.props.customLike,threadCustomColor:this.props.threadCustomColor,isFromViewer:this.props.isFromViewer,renderLocation:b("MercuryMessageRenderLocations").CHAT}),this.props.customColor&&(a=b("messengerCustomColorUtils").customBubbleStyle(this.props.customColor,a)));var d=this.props.message&&this.props.message.replied_to_message&&b("MessageReplyPermissions").bubbleContainsRepliedToMessage(this.props.message.replied_to_message,!!this.state.emojis)?b("React").createElement(b("ErrorBoundary.react"),null,b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("RepliedToMessageContent.react").__setRef("ChatBubble.react"),bootloadPlaceholder:b("React").createElement("div",null),isFromViewer:this.props.isFromViewer,isLinkified:!0,isMessengerUI:!1,repliedToMessageData:this.props.message&&this.props.message.replied_to_message,threadID:this.props.threadID,ref:this._setRepliedToMessageRef,replyInOneBubble:!0})):null;return b("React").createElement("div",{className:"_1aa6"+(this.state.emojis?" _31xy":"")+(this.props.message&&this.props.message.isSelected?" _1yok":"")+(d?" _6e7o":""),ref:"contentWrapper",style:a},d,d?"\n":null,b("React").createElement("span",{className:"_5yl5",ref:"content"},c))},_restyleBubble:function(a){__p&&__p();if(this.props.attachments||this.props.body!=null&&b("MessengerMathUtils").isMathBlock(this.props.body.trim())){this.setState({bubbleWidth:null});return}var c=b("ReactDOM").findDOMNode(this.refs.bubble);if(a.maxWidth!==this.props.maxWidth||b("DOMDimensions").getElementDimensions(c).width>this.props.maxWidth){a=this.props.maxWidth;this.setState({bubbleWidth:a},this._shrinkBubble);return}this._shrinkBubble()},_shrinkBubble:function(){__p&&__p();var a=b("ReactDOM").findDOMNode(this.refs.bubble);if(!a)return;a=b("DOMDimensions").getElementDimensions(a).width;var c=b("ReactDOM").findDOMNode(this.refs.content),d=b("DOMDimensions").getElementDimensions(c).width;if(this._repliedToMessageRef){var e=b("ReactDOM").findDOMNode(this._repliedToMessageRef);e=b("DOMDimensions").getElementDimensions(e).width;d=Math.max(e,d)}e=c?d+b("DOMDimensions").measureElementBox(b("ReactDOM").findDOMNode(this.refs.contentWrapper)||{},"width",!0,!1,!1):0;c=e+h;d>0&&c<this.props.maxWidth&&a-c-this.getBoxWidth()>0&&this.setState({bubbleWidth:c})},contentWraps:function(){var a=b("ReactDOM").findDOMNode(this.refs.content);if(!a)return!1;var c=a.getClientRects();a=b("DOMDimensions").getElementDimensions(a).height;return c&&c.length>1&&c[0].height<a},_setRepliedToMessageRef:function(a){this._repliedToMessageRef=a},getBoxWidth:function(){this._boxWidth||(this._boxWidth=b("DOMDimensions").measureElementBox(b("ReactDOM").findDOMNode(this.refs.bubble)||{},"width",!0,!0,!1));return this._boxWidth}});e.exports=c}),null);
__d("ChatCodePasteUtils",["cx","BanzaiODS","ChatBubble.react","MessengerFormattingUtils","React","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=/`{3,}/,i=3,j=/^\s+/,k=/\s+$/;function a(a){return!!(a&&a.search(h)!==-1)}function l(a,b){__p&&__p();var c=0;if(b-2>=0){c+=a[b-2].trim().length;var d=a[b-2].match(k);d&&(c+=d[0].length)}b-1>=0&&(c+=a[b-1].length+2*i);d=a[b].match(j);d&&(c+=d[0].length);return c}function m(a,b,c){if(a)return a.map(function(a){return Object.assign(Object.assign({},a),{offset:a.offset-b})}).filter(function(a){return 0<=a.offset&&a.offset<c});else return a}function n(a){return a.length===1?{language:"",code:a[0]}:{language:a[0].replace(/[^a-zA-Z]+/g,""),code:a.slice(1).join("\n")}}function o(a){__p&&__p();if(!b("gkx")("678575"))return a.split(h);var c=b("MessengerFormattingUtils").getRanges(a).filter(function(a){return a.formatter===b("MessengerFormattingUtils").formatConfigs.blockquote.formatter||a.formatter===b("MessengerFormattingUtils").formatConfigs.blockcode.formatter}).sort(function(a,b){return a.offset!==b.offset?a.offset-b.offset:b.length-a.length}),d=[],e=0,f=0;for(var g=0;g<c.length;g++){var i=c[g];if(i.offset<f)continue;i.formatter===b("MessengerFormattingUtils").formatConfigs.blockcode.formatter&&(d.push(a.substring(e,i.offset)),d.push(i.innerText),e=i.offset+i.length);f=i.offset+i.length}d.push(a.substring(e));return d}function c(a,c,d,e,f){__p&&__p();a=o(a);var g=[],h=0;for(var i=0;i<a.length;i+=2){var j=a[i].trim();if(j&&j.length>0){h+=l(a,i);var k=d?m(d,h,j.length):d;g.push(b("React").createElement("div",{key:i,className:"_1e-x _n4o"},b("React").createElement(b("ChatBubble.react"),{body:j,customColor:f||void 0,className:"clearfix _5wdf",maxWidth:c,ranges:k||void 0,threadID:e||void 0})))}if(i+1<a.length&&a[i+1]){j=a[i+1].split("\n");k=n(j);j=k.language;k=k.code;b("BanzaiODS").bumpEntityKey("chat_code_paste","render_bubble");g.push(b("React").createElement("div",{key:i+1,className:"_1e-x _n4o"},b("React").createElement("div",{ref:"bubble",className:"_3_om _4yng _5wdf"},b("React").createElement("div",{style:{maxWidth:c},ref:"syntaxTarget"+i,className:"language-"+j},k))))}}return g}e.exports={containsCodeBlock:a,getCodeAndMessageBubbles:c}}),null);
__d("WorkplaceChatHelper",["ChannelConstants","CurrentUser","PresenceViewerCapabilities"],(function(a,b,c,d,e,f){"use strict";a={isDesktopChatApp:function(){return window.workchat!==void 0},getAppID:function(){return window.workchat.appId},showWindow:function(){window.workchat.showWindow()},getScreenSharingSourceID:function(){return window.workchat.getScreenSharingSourceID()},stopScreenSharing:function(){return window.workchat.stopScreenSharing()},suppressChatIfActiveOnDesktop:function(){return b("CurrentUser").isWorkUser()&&(b("PresenceViewerCapabilities").get()&b("ChannelConstants").CAPABILITY_ACTIVE_ON_DESKTOP_APP)==b("ChannelConstants").CAPABILITY_ACTIVE_ON_DESKTOP_APP}};e.exports=a}),null);
__d("ChatTabBlinking",["cx","CSS","FantaTabActions","clearInterval","gkx","setIntervalAcrossTransitions","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("gkx")("697231")?1200:600,i="highlightTitle";a={_blinkMap:{},_interval:null,_isHighlighting:!1,blinkTab:function(a,b){this._blinkMap[a]||(this._blinkMap[a]={view:b,elem:b.getTabElem()}),this.checkInterval()},unblinkTab:function(a){if(this._blinkMap[a]){var c=this._blinkMap[a].elem;c&&(b("gkx")("697231")?b("setTimeout")(function(){b("FantaTabActions").unhighlightNewMessage(a)}):b("CSS").removeClass(c,i));delete this._blinkMap[a]}this.checkInterval()},checkInterval:function(){var a=Object.keys(this._blinkMap).length;a>0?this._interval||(this._interval=b("setIntervalAcrossTransitions")(this._toggleBlinkHighlight.bind(this),h)):this._interval&&(b("clearInterval")(this._interval),this._interval=null)},_toggleBlinkHighlight:function(){__p&&__p();var a=this;this._isHighlighting=!this._isHighlighting;var c=function(c){if(Object.prototype.hasOwnProperty.call(a._blinkMap,c)){var d=a._blinkMap[c],e=d.elem;d=d.view;e&&e.parentNode&&!d.isFocused()&&!d.isHovered()?b("gkx")("697231")?a._isHighlighting?b("setTimeout")(function(){b("FantaTabActions").highlightNewMessage(c)}):b("setTimeout")(function(){b("FantaTabActions").unhighlightNewMessage(c)}):b("CSS").conditionClass(e,i,a._isHighlighting):a.unblinkTab(c)}};for(var d in this._blinkMap)c(d)}};e.exports=a}),null);
__d("ChatCloseButton.react",["cx","fbt","Link.react","React","TrackingNodes","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.CLOSE_BUTTON),c=h._("Press Esc to close"),d=h._("Close tab"),e="_4vu4";return b("React").createElement(b("Link.react"),{"aria-label":this.props.active?c:d,className:b("joinClasses")(this.props.className,"close","button",e),"data-ft":a,"data-hover":"tooltip","data-tooltip-content":this.props.active?c:d,"data-tooltip-position":"above",onClick:this.props.onClick,onKeyUp:this.props.onKeyUp,onMouseDown:this.props.onMouseDown})};return c}(b("React").PureComponent);c.propTypes={onClick:a.func,onKeyUp:a.func,onMouseDown:a.func,active:a.bool};c.defaultProps={active:!1};e.exports=c}),null);
__d("ChatCollapsedLogMessageGroup.react",["cx","fbt","Link.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={collapsed:!0},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this,c=h._("See latest activity"),d=h._("See less activity");return b("React").createElement("div",{className:"_5w0o"},b("React").createElement(b("Link.react"),{className:"_4ea1",onClick:function(){return a.setState({collapsed:!a.state.collapsed})}},this.state.collapsed?c:d),this.state.collapsed?null:b("React").createElement("div",null,b("React").createElement("div",{className:"_2zsu"}),this.props.children,b("React").createElement("div",{className:"_2zsu"})))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("ChatDateBreak.react",["cx","FBLogger","React","formatDate","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a){return this.props.date.getTime()!==a.date.getTime()};d.render=function(){try{var a=b("formatDate")(this.props.date,{future:"g:ia",today:"g:ia",withinWeek:"D g:ia",thisYear:"M jS, g:ia",older:"m/d/Y g:ia"});return b("React").createElement("time",{className:b("joinClasses")(this.props.className,"_5w-5")},b("React").createElement("span",{className:"_5w-6"},a))}catch(a){b("FBLogger")("mercury").catching(a).mustfix("incorrect format in datebreak");return null}};return c}(b("React").Component);c.propTypes={date:a.instanceOf(Date).isRequired};e.exports=c}),null);
__d("MessengerMQTTConnectionEvents",[],(function(a,b,c,d,e,f){"use strict";e.exports={DELTA_EVENT:"messenger-mqtt-delta",STREAM_DISCONNECT:"messenger-mqtt-stream-disconnect",STREAM_CONNECTING:"messenger-mqtt-stream-connecting",STREAM_CONNECT:"messenger-mqtt-stream-connect",STATE_CONNECTED:"Connected",STATE_DISCONNECTED:"Disconnected",STATE_CONNECTING:"Connecting",TYP:"messenger-mqtt-typ"}}),null);
__d("MessengerMQTTGating",["gkx"],(function(a,b,c,d,e,f){"use strict";var g={_forcedOff:!1,isEnabled:function(){return b("gkx")("678651")&&!g._forcedOff},turnOff:function(){g._forcedOff=!0}};e.exports=g}),null);
__d("MessengerEnvironment",["CurrentEnvironment"],(function(a,b,c,d,e,f){"use strict";a=babelHelpers["extends"]({},b("CurrentEnvironment"),{messengerui:!1,setMessengerUI:function(a){this.messengerui=a}});e.exports=a}),null);
__d("MessengerGroupLinkActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CREATE_LINK:"create_link",REVOKE_LINK:"revoke_link",SHARE_LINK:"share_link",DELETE_ON_UNSUBSCRIBE:"delete_on_unsubscribe"})}),null);
__d("MessengerGroupsSyncStatusChangeMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1855592967826245"};b.getQueryID=function(){return"1621038754641387"};return b}(b("WebGraphQLMutationBase"))}),null);
__d("MessengerThreadThemeUpdateWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1727493033983591"};b.getQueryID=function(){return"643682629309288"};return b}(b("WebGraphQLMutationBase"))}),null);
__d("XChatRemoveParticipantAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/chat/remove_participants/",{elem_id:{type:"String"},uid:{type:"Int"},tid:{type:"String"}})}),null);
__d("XGroupsJoinChatController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groups/join_chat/",{link_hash:{type:"String"}})}),null);
__d("XMessagingBlockMessagesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/block_messages/",{})}),null);
__d("XMessagingGroupJoinThroughHashController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/join_through_hash/",{link_hash:{type:"String"}})}),null);
__d("XMessagingGroupJoinThroughPrivateLinkController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/join_through_invite/",{link_hash:{type:"String"}})}),null);
__d("XMessagingGroupJoinableAcceptController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/joinable_accept/",{thread_fbid:{type:"String"},user_id:{type:"Int"}})}),null);
__d("XMessagingGroupJoinableInviteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/joinable_invite/",{thread_fbid:{type:"String"},user_ids:{type:"IntSet"}})}),null);
__d("XMessagingGroupJoinableRejectController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/joinable_reject/",{thread_fbid:{type:"String"},user_id:{type:"Int"}})}),null);
__d("XMessagingGroupSetApprovalController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/set_approval_mode/",{set_mode:{type:"Enum",enumType:0},thread_fbid:{type:"String"}})}),null);
__d("XMessagingJoinableLinkController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/joinable_link_action/",{action:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveAdminsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_admins/",{thread_fbid:{type:"String"},admin_ids:{type:"FBIDSet"},add:{type:"Bool",defaultValue:!1}})}),null);
__d("XMessagingSaveGroupThreadDescriptionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_group_thread_description/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveNicknameController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_thread_nickname/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveThreadColorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_thread_color/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveThreadEmojiController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_thread_emoji/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSetThreadNameController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/set_thread_name/",{})}),null);
__d("XMessagingUnblockMessagesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/unblock_messages/",{})}),null);
__d("XNFXIgnoreMessagesActionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/nfx/ignore_messages/",{thread_fbid:{type:"Int",required:!0},location:{type:"Enum",required:!0,enumType:1},frx_context:{type:"String"},__asyncDialog:{type:"Int"}})}),null);
__d("XNFXMessengerBlockActionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/nfx/block_messages/",{thread_fbid:{type:"Int",required:!0},responsible_id:{type:"Int"},location:{type:"Enum",required:!0,enumType:1},frx_context:{type:"String"},entry_point:{type:"Enum",required:!0,enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("MercuryThreadActions",["codedError","cssVar","fbt","invariant","AsyncDialog","AsyncRequest","AsyncResponse","Bootloader","CurrentUser","EmojiLikeConstants","IgnoreMessagesTypedLogger","JSResource","MercuryActionType","MercuryAPIArgsSource","MercuryDispatcher","MercuryIDs","MercuryLogMessageType","MercuryMessengerBlockingUtils","MercuryPayloadSource","MercuryServerPayloadPreprocessor","MercuryServerRequests","MercurySingletonMixin","MercurySourceType","MercuryThreadlistConstants","MessengerConfig","MessengerGroupLinkActionType","MessengerParticipants.bs","MessengerState.bs","MercuryThreadIDMap","MercuryViewer","MercuryMessageActions","MercuryMessageObject","MessagingTag","MessengerEmojiTransitionMapping.bs","MessengerGroupsSyncStatus","MessengerGroupsSyncStatusChangeMutationWebGraphQLMutation","MessengerThreadThemeUpdateWebGraphQLMutation","NFXContextFactory","NFXStoryLocation","PageCommItemStatus","React","ReloadPage","URI","WebGraphQL","XChatRemoveParticipantAsyncController","XGroupsJoinChatController","XMessagingGroupJoinableAcceptController","XMessagingGroupJoinableInviteController","XMessagingGroupJoinableRejectController","XMessagingGroupJoinThroughHashController","XMessagingGroupJoinThroughPrivateLinkController","XMessagingGroupSetApprovalController","XMessagingJoinableLinkController","XMessagingSaveAdminsController","XMessagingSaveGroupThreadDescriptionController","XMessagingSaveNicknameController","XMessagingSaveThreadColorController","XMessagingSaveThreadEmojiController","XMessagingSetThreadNameController","XNFXMessengerBlockActionController","XMessagingBlockMessagesController","XMessagingUnblockMessagesController","XNFXIgnoreMessagesActionController","ex","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("MercuryThreadIDMap").get(),l=b("MercuryMessageActions").get(),m=b("MercuryMessageObject").get(),n=b("lazyLoadComponent")(b("JSResource")("MessengerSimpleDialogReact").__setRef("MercuryThreadActions"));a=function(){__p&&__p();function a(a){this.$1=a,this.__serverRequests=b("MercuryServerRequests").getForFBID(this.$1),this.__dispatcher=b("MercuryDispatcher").getForFBID(this.$1),this.__payloadPreprocessor=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1)}var c=a.prototype;c.markRead=function(a,b){this.batchMarkRead([a],b)};c.batchMarkRead=function(a,b){this.__dispatcher.handleUpdate(this.$2(a,!0,b))};c.markUnread=function(a,b){this.batchMarkUnread([a],b)};c.batchMarkUnread=function(a,b){this.__dispatcher.handleUpdate(this.$2(a,!1,b))};c.markSeen=function(a,c){this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").MARK_THREAD_SEEN,b("MercuryPayloadSource").CLIENT_MARK_THREAD_SEEN,{persistent:c}))};c.archive=function(a,b){this.batchArchive([a],b)};c.batchArchive=function(a,b){var c=this;a.forEach(function(a){c.__serverRequests.changeThreadArchivedStatus(a,!0,b)});this.__dispatcher.handleUpdate(this.$3(a,!0))};c.unarchive=function(a,b){this.batchUnarchive([a],b)};c.batchUnarchive=function(a,b){var c=this;a.forEach(function(a){c.__serverRequests.changeThreadArchivedStatus(a,!1,b)});this.__dispatcher.handleUpdate(this.$3(a,!1))};c.pin=function(a,c,d){__p&&__p();var e=b("MessengerState.bs").getPinnedThreadlist(b("CurrentUser").getID()),f=b("CurrentUser").isWorkUser(),h=f?b("MercuryThreadlistConstants").MAX_PINNED_THREADS:b("MessengerConfig").MPT;e=e.length>=h;if(e){e=g._(1545078,function(a){return a._("Unable to pin chat")},function(a,b){return a._("You can pin up to {max_threads} chats. To pin this chat, unpin another chat and try again.",[a._param("max_threads",b.max_threads)])},{max_threads:h});var j=f?i._("You can't pin any more chats"):e.summary,k=f?i._("You can't pin more than 15 chats on Workplace. To pin this chat, try unpinning another chat."):e.description;b("Bootloader").loadModules(["MessengerDialogs.bs"],function(a){a.showDialog(function(){return b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(n,{title:j,body:k}))})},"MercuryThreadActions")}else this.batchPin([a],d),this.$4(a,!0,c)};c.batchPin=function(a,b){var c=this;a.forEach(function(a){c.__serverRequests.changeThreadPinnedStatus(a,!0,b)});this.__dispatcher.handleUpdate(this.$5(a,!0))};c.unpin=function(a,b,c){this.batchUnpin([a],c),this.$4(a,!1,b)};c.batchUnpin=function(a,b){var c=this;a.forEach(function(a){c.__serverRequests.changeThreadPinnedStatus(a,!1,b)});this.__dispatcher.handleUpdate(this.$5(a,!1))};c.markPageFollowUp=function(a,b){this.batchMarkPageFollowUp([a],b)};c.batchMarkPageFollowUp=function(a,b){var c=this;a.forEach(function(a){c.__serverRequests.changeThreadPageFollowUpStatus(a,!0,b)});this.__dispatcher.handleUpdate(this.$6(a,!0))};c.unmarkPageFollowUp=function(a,b){this.batchUnmarkPageFollowUp([a],b)};c.batchUnmarkPageFollowUp=function(a,b){var c=this;a.forEach(function(a){c.__serverRequests.changeThreadPageFollowUpStatus(a,!1,b)});this.__dispatcher.handleUpdate(this.$6(a,!1))};c.markSpam=function(a,b){this.batchMarkSpam([a],b)};c.batchMarkSpam=function(a,c){var d=this;a.forEach(function(a){d.__serverRequests.markThreadSpam(a,c)});this.__dispatcher.handleUpdate(this.$7(a,b("MessagingTag").SPAM))};c.unmarkSpam=function(a,b){this.batchUnmarkSpam([a],b)};c.batchUnmarkSpam=function(a,c){var d=this;a.forEach(function(a){d.__serverRequests.unmarkThreadSpam(a,c)});this.__dispatcher.handleUpdate(this.$7(a,b("MessagingTag").INBOX))};c.changeFolder=function(a,b){this.batchChangeFolder([a],b)};c.batchChangeFolder=function(a,b){var c=this;a.forEach(function(a){c.__serverRequests.changeThreadFolder(a,b)});this.__dispatcher.handleUpdate(this.$7(a,b))};c["delete"]=function(a,b){this.batchDelete([a],b)};c.batchDelete=function(a,c){this.__serverRequests.deleteThreads(a,c),this.__dispatcher.handleUpdate(this.__constructClientPayload(a,b("MercuryActionType").DELETE_THREAD,b("MercuryPayloadSource").CLIENT_DELETE_THREAD))};c.unmute=function(a){this.updateMuteSetting(a,0)};c.updateMuteSetting=function(a,c){this.__serverRequests.changeMutingOnThread(a,c),this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").CHANGE_MUTE_SETTINGS,b("MercuryPayloadSource").CLIENT_CHANGE_MUTE_SETTINGS,{mute_until:c}))};c.updateMentionsMuteSetting=function(a,c){c=c?1:0;this.__serverRequests.changeMentionsMutingOnThread(a,c);this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").CHANGE_MUTE_SETTINGS,b("MercuryPayloadSource").CLIENT_CHANGE_MUTE_SETTINGS,{mentions_mute_mode:c}))};c.updateReactionsMuteSetting=function(a,c){c=c?1:0;this.__serverRequests.changeReactionsMutingOnThread(a,c);this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").CHANGE_MUTE_SETTINGS,b("MercuryPayloadSource").CLIENT_CHANGE_MUTE_SETTINGS,{reactions_mute_mode:c}))};c.blockMessagesForGroupThread=function(a,c,d,e){c=b("MercuryIDs").getUserIDFromParticipantID(c);a=b("MercuryIDs").getThreadFBIDFromThreadID(a);d=b("XNFXMessengerBlockActionController").getURIBuilder().setEnum("entry_point",d).setEnum("location","www_chat_head").setInt("thread_fbid",a).setInt("responsible_id",c).getURI();b("AsyncDialog").send(new(b("AsyncRequest"))(d).setRelativeTo(e),function(a){a.subscribe("confirm",function(){a.hide()})})};c.blockMessages=function(a,c,d){var e=this,f="",g=b("MercuryIDs").getUserIDFromThreadID(a);g!==null||j(0,400);var h=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(g));f=h&&h.short_name;h=b("XNFXMessengerBlockActionController").getURIBuilder().setInt("thread_fbid",g).setEnum("entry_point",c).setEnum("location","www_chat_head").getURI();b("AsyncDialog").send(new(b("AsyncRequest"))(h),function(c){c.subscribe("confirm",function(){c.hide(),d&&d(f),e.changeFolder(a,b("MessagingTag").OTHER)})})};c.unblockMessages=function(a,c){var d=this;c==null&&(c=b("MercuryIDs").getUserIDFromThreadID(a));if(c===null)throw new Error(b("ex")("Expected user ID to unblock messages for, got null"));c=b("NFXContextFactory").withEntReportable({reportable_ent_token:c,story_location:b("NFXStoryLocation").MESSENGER,initial_action_name:b("MercuryMessengerBlockingUtils").block_messages});new(b("AsyncRequest"))(new(b("URI"))("/ajax/nfx/messenger_undo_block").addQueryData({context:c})).setHandler(function(){return d.changeFolder(a,b("MessagingTag").INBOX)}).send()};c.ignoreMessages=function(a,c){c=b("XNFXIgnoreMessagesActionController").getURIBuilder().setInt("thread_fbid",a).setEnum("location","www_chat_head").getURI();b("AsyncDialog").send(new(b("AsyncRequest"))(c))};c.blockOnMessengerDotCom=function(a){var c=b("XMessagingBlockMessagesController").getURIBuilder().getURI();new(b("IgnoreMessagesTypedLogger"))().setEvent("block_confirmed").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a)).setPlatform("messengerdotcom").log();new(b("AsyncRequest"))(c).setMethod("POST").setData({fbid:b("MercuryIDs").getUserIDFromThreadID(a)}).send()};c.blockIgnoreOnMessengerDotCom=function(a,c,d){var e=this;b("Bootloader").loadModules(["MessengerActions"],function(f){a&&f.selectThread(null),e.changeFolder(c,b("MessagingTag").OTHER),e.blockOnMessengerDotCom(c),d&&d()},"MercuryThreadActions")};c.unblockOnMessengerDotCom=function(a){var c=this,d=b("XMessagingUnblockMessagesController").getURIBuilder().getURI();new(b("AsyncRequest"))(d).setMethod("POST").setData({fbid:b("MercuryIDs").getUserIDFromThreadID(a)}).setHandler(function(){return c.changeFolder(a,b("MessagingTag").INBOX)}).send()};c.leaveGroup=function(a){l.send(m.constructLogMessageObject(b("MercurySourceType").TITAN_WEB,a,b("MercuryLogMessageType").UNSUBSCRIBE,{removed_participants:[b("MercuryViewer").getID()]}),null,b("MercuryAPIArgsSource").WEBMESSENGER)};c.deleteSyncedGroup=function(a){if(!a)return;if(a.groups_sync_status!=b("MessengerGroupsSyncStatus").OPT_IN)return;k.getServerIDFromClientID(a.thread_id,function(a){a={client_mutation_id:"0",actor_id:b("CurrentUser").getID(),thread_fbid:a,groups_sync_status:b("MessengerGroupsSyncStatus").OPT_OUT};b("WebGraphQL").exec(new(b("MessengerGroupsSyncStatusChangeMutationWebGraphQLMutation"))({data:a}))})};c.removeFromGroup=function(a,c){var d=b("XChatRemoveParticipantAsyncController").getURIBuilder().getURI();a={tid:a,uid:c};new(b("AsyncRequest"))(d).setMethod("POST").setData(a).send()};c.changeThreadTheme=function(a,c,d){k.getServerIDFromClientID(a,function(a){b("WebGraphQL").exec(new(b("MessengerThreadThemeUpdateWebGraphQLMutation"))({data:{client_mutation_id:0,actor_id:b("CurrentUser").getID(),thread_id:a,theme_id:c,source:d}}))})};c.changeThreadColor=function(a,c,d){k.getServerIDFromClientID(a,function(a){var e={};c!="#0084ff"&&(e.color_choice=c);e.thread_or_other_fbid=a;a=b("XMessagingSaveThreadColorController").getURIBuilder().setEnum("source",d).getURI();new(b("AsyncRequest"))(a).setMethod("POST").setData(e).send()})};c.changeThreadEmoji=function(a,c,d){k.getServerIDFromClientID(a,function(a){var e={},f=String.fromCodePoint.apply(String,c);b("MessengerEmojiTransitionMapping.bs").hasGender(c)&&(f=String.fromCodePoint.apply(String,b("MessengerEmojiTransitionMapping.bs").removeAllModifiers(c)));f!==String.fromCodePoint(b("EmojiLikeConstants").FB_THUMBS_UP_EMOJI)&&f!==String.fromCodePoint(b("EmojiLikeConstants").THUMBS_UP_EMOJI_CODES)&&(e.emoji_choice=f);e.thread_or_other_fbid=a;f=b("XMessagingSaveThreadEmojiController").getURIBuilder().setEnum("source",d).getURI();new(b("AsyncRequest"))(f).setMethod("POST").setData(e).send()})};c.changeThreadNicknames=function(a,c,d,e){k.getServerIDFromClientID(a,function(a){a={thread_or_other_fbid:a,participant_id:c,nickname:d};var f=b("XMessagingSaveNicknameController").getURIBuilder().setEnum("source",e).getURI();new(b("AsyncRequest"))(f).setMethod("POST").setData(a).send()})};c.changeGroupThreadDescription=function(a,c,d){k.getServerIDFromClientID(a,function(a){a={thread_fbid:a,description:c};var e=b("XMessagingSaveGroupThreadDescriptionController").getURIBuilder().setEnum("source",d).getURI();new(b("AsyncRequest"))(e).setMethod("POST").setData(a).send()})};c.changeGroupThreadName=function(a,c){k.getServerIDFromClientID(a,function(a){a={thread_id:a,thread_name:c};var d=b("XMessagingSetThreadNameController").getURIBuilder().getURI();new(b("AsyncRequest"))(d).setMethod("POST").setData(a).send()})};c.setApprovalMode=function(a,c){var d=b("XMessagingGroupSetApprovalController").getURIBuilder().getURI();new(b("AsyncRequest"))(d).setMethod("POST").setData({set_mode:a,thread_fbid:c.thread_fbid}).send()};c.changeGroupAdmins=function(a,c,d){a={thread_fbid:a,admin_ids:c,add:d};c=b("XMessagingSaveAdminsController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData(a).send()};c.joinThroughHash=function(a,c,d){a={link_hash:a};var e=b("XMessagingGroupJoinThroughHashController").getURIBuilder().getURI();new(b("AsyncRequest"))(e).setMethod("POST").setData(a).setHandler(function(){return c()}).setErrorHandler(function(a){d()||b("AsyncResponse").defaultErrorHandler(a)}).setTransportErrorHandler(function(){return d()}).send()};c.joinThroughPrivateLink=function(a){a={link_hash:a};var c=b("XMessagingGroupJoinThroughPrivateLinkController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData(a).send()};c.chatJoinThroughHash=function(a,c){a={link_hash:a};var d=b("XGroupsJoinChatController").getURIBuilder().getURI(),e=function(){return b("ReloadPage").now()};new(b("AsyncRequest"))(d).setMethod("POST").setData(a).setHandler(c&&typeof c==="function"?c:e).send()};c.createJoinableLink=function(a,c){if(b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),a))return;k.getServerIDFromClientID(a,function(a){a={thread_fbid:a};var d=b("XMessagingJoinableLinkController").getURIBuilder().setEnum("action",b("MessengerGroupLinkActionType").CREATE_LINK).getURI();new(b("AsyncRequest"))(d).setMethod("POST").setData(a).setHandler(function(a){a=a.getPayload();a&&c(a)}).send()})};c.revokeAndRegenerateJoinableLink=function(a,c){var d=this;if(b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),a))return;k.getServerIDFromClientID(a,function(e){e={thread_fbid:e};var f=b("XMessagingJoinableLinkController").getURIBuilder().setEnum("action",b("MessengerGroupLinkActionType").REVOKE_LINK).getURI();new(b("AsyncRequest"))(f).setMethod("POST").setData(e).setHandler(function(b){return d.createJoinableLink(a,c)}).send()})};c.inviteToJoinableGroup=function(a,c){a={thread_fbid:a,user_ids:c};c=b("XMessagingGroupJoinableInviteController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData(a).send()};c.acceptToJoinableGroup=function(a,c){a={thread_fbid:a,user_id:c};c=b("XMessagingGroupJoinableAcceptController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData(a).send()};c.rejectToJoinableGroup=function(a,c){a={thread_fbid:a,user_id:c};c=b("XMessagingGroupJoinableRejectController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData(a).send()};c.addParticipants=function(a,c){this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").ADD_PARTICIPANTS,b("MercuryPayloadSource").CLIENT_ADD_PARTICIPANTS,{participants:c}))};c.movePendingToInbox=function(a){this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").MOVE_PENDING_TO_INBOX,b("MercuryPayloadSource").CLIENT_MOVE_PENDING_TO_INBOX))};c.updateSnippet=function(a,c){this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").UPDATE_SNIPPET,b("MercuryPayloadSource").CLIENT_UPDATE_SNIPPET,{deleted_ids:c}))};c.updateCommStatus=function(a,c){this.__dispatcher.handleUpdate(this.$8(a,c));c=c===b("PageCommItemStatus").DONE;this.__dispatcher.handleUpdate(this.$3(a,c))};c.updateCommItemOwner=function(a,b,c,d){this.__dispatcher.handleUpdate(this.$9(a,b,c,d))};c.$2=function(a,c,d){return this.__constructClientPayload(a,b("MercuryActionType").CHANGE_READ_STATUS,b("MercuryPayloadSource").CLIENT_CHANGE_READ_STATUS,{mark_as_read:c,source:d,timestamp:0})};c.$9=function(a,c,d,e){return this.__constructClientPayload(a,b("MercuryActionType").UPDATE_COMM_ITEM_OWNER,b("MercuryPayloadSource").UPDATE_COMM_ITEM_OWNER,{id:d,name:c,profile_pic_uri:e})};c.$3=function(a,c){return this.__constructClientPayload(a,b("MercuryActionType").CHANGE_ARCHIVED_STATUS,b("MercuryPayloadSource").CLIENT_CHANGE_ARCHIVED_STATUS,{archived:c})};c.$5=function(a,c){return this.__constructClientPayload(a,b("MercuryActionType").CHANGE_PINNED_STATUS,b("MercuryPayloadSource").CLIENT_CHANGE_PINNED_STATUS,{is_pinned:c,thread_pin_timestamp:Math.floor(Date.now()/1e3)})};c.$6=function(a,c){return this.__constructClientPayload(a,b("MercuryActionType").CHANGE_PAGE_FOLLOW_UP_STATUS,b("MercuryPayloadSource").CLIENT_CHANGE_PAGE_FOLLOW_UP_STATUS,{is_page_follow_up:c})};c.$8=function(a,c){return this.__constructClientPayload(a,b("MercuryActionType").UPDATE_COMM_STATUS,b("MercuryPayloadSource").CLIENT_UPDATE_COMM_STATUS,{comm_status:c})};c.$7=function(a,c){return this.__constructClientPayload(a,b("MercuryActionType").CHANGE_FOLDER,b("MercuryPayloadSource").CLIENT_CHANGE_FOLDER,{new_folder:c})};c.__constructClientPayload=function(a,b,c,d){return{actions:a.map(function(a){return babelHelpers["extends"]({action_type:b,thread_id:a},d)}),from_client:!0,payload_source:c}};c.$4=function(a,c,d){b("Bootloader").loadModules(["ChatPinnedThreadsTypedLogger","ChatPinnedThreadsEvent"],function(e,f){new e().setEvent(c?f.PIN_THREAD:f.UNPIN_THREAD).setIsWorkplace(b("CurrentUser").isWorkUser()).setThreadID(a).setEntryPoint(d).log()},"MercuryThreadActions")};return a}();Object.assign(a,b("MercurySingletonMixin"));e.exports=a}),null);
__d("ContextualLayerAutoFlipHorizontal",["ContextualLayerAutoFlip"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getValidPositions=function(a){return[a.getPosition()]};return b}(b("ContextualLayerAutoFlip"));e.exports=a}),null);
__d("ContextualLayerHideOnScrollOut",["Event","SubscriptionsHandler"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.$1=a}var c=a.prototype;c.enable=function(){this.$4==null&&(this.$4=new(b("SubscriptionsHandler"))(),this.$4.addSubscriptions(this.$1.subscribe("contextchange",this.$5.bind(this)),this.$1.subscribe("show",this.$6.bind(this)),this.$1.subscribe("hide",this.$7.bind(this))))};c.disable=function(){this.$4!=null&&(this.$4.release(),this.$4=null),this.$7()};c.$6=function(){if(this.$2==null){this.$3=this.$1.getContextScrollParent();if(this.$3===window)return;this.$2=b("Event").listen(this.$3,"scroll",this.$8.bind(this))}};c.$7=function(){this.$2&&(this.$2.remove(),this.$2=null,this.$3=null)};c.$8=function(){var a=this.$3,b=this.$1;if(a==null||b==null)return;var c=b.getContent().getBoundingClientRect();a=a.getBoundingClientRect();var d=c.bottom<=a.top||c.top>=a.bottom;c=c.right<=a.left||c.left>=a.right;(d||c)&&b.hide()};c.$5=function(){this.detach!==null&&this.detach(),this.attach!=null&&this.$1.isShown()&&this.attach()};return a}();e.exports=a}),null);
__d("MessengerReactionsContextualDialog.react",["cx","AccessibleLayer","ContextualLayerAutoFlipHorizontal","ContextualLayerHideOnScrollOut","ContextualLayerUpdateOnScroll","LayerHideOnEscape","ReactAbstractContextualDialog","ReactLayer"],(function(a,b,c,d,e,f,g){"use strict";a=b("ReactLayer").createClass(b("ReactAbstractContextualDialog").createSpec({addedBehaviors:[b("ContextualLayerAutoFlipHorizontal"),b("ContextualLayerHideOnScrollOut"),b("ContextualLayerUpdateOnScroll"),b("LayerHideOnEscape"),b("AccessibleLayer")],displayName:"MessengerReactionsContextualDialog",shouldSetARIAProperties:!1,theme:{wrapperClassName:"_4owc"}}));e.exports=a}),null);
__d("AutoFocusableLink.react",["Link.react","ReactDOM"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){this.props.autoFocus&&b("ReactDOM").findDOMNode(this).focus()};return c}(b("Link.react"));e.exports=a}),null);
__d("MessengerReactionsUtil.bs",["EmojiFormat.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();c=[[128525],[128518],[128558],[128546],[128544],[128077],[128078]];var g={};c.forEach(function(a,c){g[b("EmojiFormat.bs").codeArrayToUnicode(a)]=c+1|0;return 0});function a(a,b){a=g[a];b=g[b];if(a!==void 0)if(b!==void 0)return a-b|0;else return-1;else if(b!==void 0)return 1;else return 0}d=c.map(b("EmojiFormat.bs").codeArrayToUnicode);f.reactionsSortOrder=c;f.orderMap=g;f.sortFunction=a;f.defaultReactions=d}),null);
__d("convertMIGColorToFIGColor",["cssVar"],(function(a,b,c,d,e,f,g){"use strict";var h={"#0077e5":"#4080ff","#44bec7":"#54C7EC","#ffc300":"#f5c33b","#fa3c4c":"#F35369","#d696bb":"#d696bb","#6699cc":"#7596c8","#13cf13":"#42b72a","#ff7e29":"#F7923B","#e68585":"#e68585","#7646ff":"#8C72CB","#20cef5":"#54C7EC","#67b868":"#A3CE71","#d4a88c":"#cfa588","#ff5ca1":"#EC7EBD","#a695c7":"#AF9CDA"};function a(a){return a&&h[a]||a||""}e.exports=a}),null);
__d("ChatMessage.react",["csx","cx","fbt","BootloadedComponent.react","ChatAnimatedGifs","ChatBubble.react","ChatCodePasteUtils","ChatConfig","CSS","EmojiLikeUtils","ImmutableObject","JSResource","Locale","MercuryAttachment","MercuryDisplayTimeFilterMessageRenderer","MercuryErrorInfo","MercuryIDs","MercuryMessageError.react","MercuryTimestamp","MessengerDecorator","MessengerInnerDecorators.react","MessengerMessage.bs","MessengerVideoAutoplayStore","MNCommerceMessageType","React","ReactDOM","TooltipData","XUISpinner.react","convertMIGColorToFIGColor","gkx","immutable","isRTL","joinClasses","setImmediate"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={isVisible:!1,isHighlighted:!1,hovered:!1},c.$3=function(){return c.setState({hovered:!0})},c.$4=function(){return c.setState({hovered:!1})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this;b("CSS").conditionClass(b("ReactDOM").findDOMNode(this),"_2cnu",this.isOneLine());this.setState({isVisible:b("MessengerVideoAutoplayStore").isVisible(this.props.message.thread_id,this.props.message.message_id)});this.$1=b("MessengerVideoAutoplayStore").addListener(function(c){c=b("MessengerVideoAutoplayStore").isVisible(a.props.message.thread_id,a.props.message.message_id);c!==a.state.isVisible&&a.setState({isVisible:c})})};d.componentWillUnmount=function(){this.$1&&this.$1.remove()};d.isOneLine=function(){var a=this.props.message;return b("MessengerMessage.bs").isInbound(a)&&!this.refs.attachmentsInside&&this.refs.bubble&&!this.refs.bubble.contentWraps()};d.shouldComponentUpdate=function(a,b){var c=a.message!==this.props.message,d=!1,e=!1,f=this.props.thread;if(f)d=f.custom_like_icon!==a.thread.custom_like_icon,e=f.solid_color!==a.thread.solid_color;else if(a.thread)return!0;return c||d||e||b.isVisible!==this.state.isVisible||b.isHighlighted!==this.state.isHighlighted||b.hovered!==this.state.hovered};d.render=function(){__p&&__p();var a=this.props.message,c=b("MercuryAttachment").get(a).length>0,d=b("MessengerMessage.bs").isInbound(a),e=b("MercuryIDs").isGroupChat(a.thread_id),f=b("MercuryErrorInfo").hasErrorStatus(a),g=b("ChatConfig").getBool("chat_tab_has_gradients");c="_5wd4"+(d?" _1nc7":"")+(d?"":" _1nc6")+(c?" _2_-t":"")+(d&&e?" _5ysy":"")+(f?" _1zcs":"")+(this.state.isHighlighted&&!g?" _6iuj":"");var h=this.props.isFromViewer,i=[],j=a,k=this.props.thread?b("convertMIGColorToFIGColor")(this.props.thread.solid_color):"";j&&b("MessengerDecorator").getBeforeDecorators().forEach(function(a){a.check(j)&&i.push(a.render(j,h,{customColor:k}))});d=b("MercuryAttachment").get(a).filter(function(a){return!b("MercuryAttachment").isBubblePreferred(a)});e=this.$2("outside",d);return b("React").createElement("div",{className:b("joinClasses")(this.props.className,c),onMouseEnter:this.$3,onMouseLeave:this.$4},b("React").createElement("div",{className:b("joinClasses")("._1dlq","_h8t")},i,this.$5(e)),d.some(function(a){return b("MercuryAttachment").isShareAttachment(a)})?b("React").createElement(b("MessengerInnerDecorators.react"),{message:a,isFromViewer:h||!1,hovered:this.state.hovered,messageProps:this.props,forGameChat:this.props.forGameChat}):b("React").createElement("div",{className:"_40qi"+(this.state.isHighlighted&&g?" _6iuj":"")}),this.$6())};d.$5=function(a){var c=this.props.message,d={},e=b("MessengerMessage.bs").isOutbound(c);if(e||this.props.needsTimestampTooltip){var f=i._("{time}",[i._param("time",b("MercuryTimestamp").getPreciseTimestamp(c.timestamp))]);Object.assign(d,b("TooltipData").propsFor(f,e?"right":"left"))}if(c.is_filtered_content)return b("React").createElement("div",babelHelpers["extends"]({className:"_5wd9 _5wdc uiBoxYellow clearfix",ref:"inner"},d),b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(c));f=c.body&&c.body!==""?b("isRTL")(c.body):b("Locale").isRTL();return b("React").createElement("div",babelHelpers["extends"]({className:"_5wd9"+(f?" direction_rtl":"")+(f?"":" direction_ltr")+" clearfix",ref:"inner"},d),this.$7(!a),a)};d.$6=function(){var a=this.props.message;return a.is_filtered_content||!b("MessengerMessage.bs").hasError(a)?null:b("React").createElement("div",{className:"_3ry4",ref:"undertext"},b("React").createElement(b("MercuryMessageError.react"),{className:"_5wda clearfix",message:a,ref:"status"}),this.$8())};d.$8=function(){return this.props.message.is_spoof_warning?b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("span",null),bootloadLoader:b("JSResource")("MercurySpoofWarning.react").__setRef("ChatMessage.react"),authorID:this.props.message.author,className:"_5wdb"}):null};d.$9=function(){return b("React").createElement("div",{style:{padding:"20px",text_align:"center",background:"white"}},b("React").createElement(b("XUISpinner.react"),null))};d.$2=function(a,c){__p&&__p();var d=this;if(this.props.message.commerce_message_type===b("MNCommerceMessageType").RIDE_INTENT)return null;var e=this.props.message,f=this.props.thread?this.props.thread.custom_like_icon:null,g=a=="inside"?"attachmentsInside":"attachmentsOutside",h=this.props.thread?b("convertMIGColorToFIGColor")(this.props.thread.solid_color):"",i=[],j=[];a==="outside"&&e&&b("MessengerDecorator").getAfterDecorators().forEach(function(a){a.check(e,d.props.isFromViewer)&&(i.push(a.render(e,d.props.isFromViewer,d.props,d.state.hovered)),j.push(a.getAdditionalClassNames()))});if(c.length>0){var k=b("React").createElement(b("MessengerInnerDecorators.react"),{className:"_1z_2",message:e,isFromViewer:this.props.isFromViewer||!1,hovered:this.state.hovered,messageProps:this.props,forGameChat:this.props.forGameChat});return b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:this.$9(),bootloadLoader:b("JSResource")("MercuryAttachments.react").__setRef("ChatMessage.react"),className:b("joinClasses")((a==="outside"?"_3e7u":"")+(e.body?" _16ys":"")+(h?" _3al":"")+" _n4o"+(i?" _1a6y":""),j),attachments:c,customLike:f,customColor:h,forGameChat:this.props.forGameChat,isChat:!0,afterDecorators:i,innerDecorators:k,isVisible:this.state.isVisible,maxWidth:this.props.maxBubbleWidth,message:e,onUnwrap:this.$10,onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,ref:g})}return null};d.$7=function(a){__p&&__p();var c=this,d=this.props,e=d.isFromViewer,f=d.message;d=d.thread;var g=f.body,h=b("MercuryAttachment").get(f).filter(function(a){return b("MercuryAttachment").isBubblePreferred(a)});h=this.$2("inside",h);var i=[],j=[],k=f;k&&(a&&b("MessengerDecorator").getAfterDecorators().forEach(function(a){a.check(k,e)&&(i.push(a.render(k,e,c.props)),j.push(a.getAdditionalClassNames()))}),b("MessengerDecorator").getBeforeDecorators().forEach(function(a){a.check(k,e)&&j.push(a.getAdditionalClassNames())}));var l=j.join(" ");b("ChatAnimatedGifs").shouldHideBody(f)&&(g="");var m=f.ranges;f.profile_ranges&&f.profile_ranges.length&&(m=(m||[]).concat(f.profile_ranges.map(function(a){return babelHelpers["extends"]({},a,{url:"/"+a.id})})));var n=b("gkx")("844786")?!1:b("ChatCodePasteUtils").containsCodeBlock(g);return(g||h)&&!b("EmojiLikeUtils").isEmojiLike(f)?b("React").createElement("div",{className:b("joinClasses")(l,"_1e-x _n4o")},n?b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",{style:{height:22}}),bootloadLoader:b("JSResource")("ChatCodeBubble.react").__setRef("ChatMessage.react"),body:g,maxWidth:this.props.maxBubbleWidth,ranges:m,threadID:f.thread_id,customColor:d&&e?b("convertMIGColorToFIGColor")(d.solid_color):""}):b("React").createElement("div",{className:"_3_bl"},b("React").createElement("div",{className:"_3_bp"}),b("React").createElement(b("ChatBubble.react"),{attachments:h,body:g,className:"_5wdf",isEmojiLike:!1,isFromViewer:this.props.isFromViewer,onReplyToMessage:this.props.onReplyToMessage,metaRanges:f.meta_ranges,message:f,maxWidth:this.props.maxBubbleWidth,ranges:m,ref:"bubble",threadID:f.thread_id,customLike:f.customLike,customColor:d&&e?b("convertMIGColorToFIGColor")(d.solid_color):"",threadCustomColor:d&&b("convertMIGColorToFIGColor")(d.solid_color)})),a?b("React").createElement(b("MessengerInnerDecorators.react"),{className:"_1z_2",message:f,isFromViewer:this.props.isFromViewer||!1,hovered:this.state.hovered,messageProps:this.props,forGameChat:this.props.forGameChat}):null,i):null};d.highlightMessage=function(){var a=this;this.setState({isHighlighted:!1});b("setImmediate")(function(){return a.setState({isHighlighted:!0})})};return c}(b("React").Component);c.propTypes={forGameChat:a.bool.isRequired,message:a.object.isRequired,maxBubbleWidth:a.number.isRequired,onAttachmentLoad:a.func,onStickerClick:a.func,participants:a.instanceOf(b("immutable").Map).isRequired,readReceipts:a.instanceOf(b("immutable").OrderedMap).isRequired,thread:a.instanceOf(b("ImmutableObject")),needsTimestampTooltip:a.bool};e.exports=c}),null);
__d("ChatRemovedMessageTombstoneBubble.react",["cx","DOMDimensions","MessengerInnerDecorators.react","React","ReactDOM","RemovedMessageTombstoneContent","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;var h=4;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=0,d.state={bubbleWidth:null},d.$3=function(){var a=b("ReactDOM").findDOMNode(d.refs.bubble);if(!a)return;a=b("DOMDimensions").getElementDimensions(a).width;var c=b("ReactDOM").findDOMNode(d.refs.content),e=b("DOMDimensions").getElementDimensions(c).width;c=c?e+b("DOMDimensions").measureElementBox(b("ReactDOM").findDOMNode(d.refs.contentWrapper)||{},"width",!0,!1,!1):0;c=c+h;e>0&&c<d.props.maxBubbleWidth&&a-c-d.getBoxWidth()>0&&d.setState({bubbleWidth:c})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$2(this.props)};d.componentDidUpdate=function(a){(a.maxBubbleWidth!==this.props.maxBubbleWidth||a.participants!==this.props.participants)&&this.$2(a)};d.render=function(){var a=this.props,c=a.message,d=a.maxBubbleWidth;a=a.participants;a=b("RemovedMessageTombstoneContent").getRemovedMessageTombstoneContent(c,a).toString();return b("React").createElement("div",{className:"_1e-x _n4o"},b("React").createElement("div",{className:"_3_bl"},b("React").createElement("div",{className:"_3_bp"}),b("React").createElement("div",{ref:"bubble",className:"_3_om _72_y _5wdf",style:{maxWidth:d,width:this.state.bubbleWidth,wordWrap:a.length>=15?"break-word":"inherit"}},b("React").createElement("div",{className:"_72_z"+(this.props.message&&this.props.message.isSelected?" _1yok":""),ref:"contentWrapper"},b("React").createElement("span",{className:"_5yl5",ref:"content"},b("React").createElement("span",null,a))))),b("React").createElement(b("MessengerInnerDecorators.react"),{className:"_1z_2",message:c,isFromViewer:!1,hovered:this.props.hovered,messageProps:this.props,isSavedView:!1}))};d.$2=function(a){var c=b("ReactDOM").findDOMNode(this.refs.bubble);if(a.maxBubbleWidth!==this.props.maxBubbleWidth||a.participants!==this.props.participants||b("DOMDimensions").getElementDimensions(c).width>this.props.maxBubbleWidth){a=this.props.maxBubbleWidth;this.setState({bubbleWidth:a},this.$3);return}this.$3()};d.getBoxWidth=function(){this.$1||(this.$1=b("DOMDimensions").measureElementBox(b("ReactDOM").findDOMNode(this.refs.bubble)||{},"width",!0,!0,!1));return this.$1};return c}(b("React").Component);c.propTypes={hovered:a.bool.isRequired,message:a.object.isRequired,maxBubbleWidth:a.number.isRequired,participants:a.instanceOf(b("immutable").Map).isRequired};e.exports=c}),null);
__d("ChatRemovedMessageTombstoneInner.react",["cx","fbt","ChatRemovedMessageTombstoneBubble.react","Locale","MercuryTimestamp","MessengerMessage.bs","React","TooltipData","immutable","isRTL"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.message,c={},d=b("MessengerMessage.bs").isOutbound(a);if(d||this.props.needsTimestampTooltip){var e=h._("{time}",[h._param("time",b("MercuryTimestamp").getPreciseTimestamp(a.timestamp))]);Object.assign(c,b("TooltipData").propsFor(e,d?"right":"left"))}e=a.body&&a.body!==""?b("isRTL")(a.body):b("Locale").isRTL();return b("React").createElement("div",babelHelpers["extends"]({className:"_5wd9"+(e?" direction_rtl":"")+(e?"":" direction_ltr")+" clearfix",ref:"inner"},c),b("React").createElement(b("ChatRemovedMessageTombstoneBubble.react"),{hovered:this.props.hovered,maxBubbleWidth:this.props.maxBubbleWidth,message:a,participants:this.props.participants}))};return c}(b("React").Component);c.propTypes={hovered:a.bool.isRequired,message:a.object.isRequired,maxBubbleWidth:a.number.isRequired,needsTimestampTooltip:a.bool};e.exports=c}),null);
__d("ChatRemovedMessageTombstone.react",["csx","cx","ChatRemovedMessageTombstoneInner.react","MercuryErrorInfo","MercuryIDs","MessengerMessage.bs","React","immutable","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=0,c.state={hovered:!1},c.$2=function(){return c.setState({hovered:!0})},c.$3=function(){return c.setState({hovered:!1})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props.message,c=b("MessengerMessage.bs").isInbound(a),d=b("MercuryIDs").isGroupChat(a.thread_id),e=b("MercuryErrorInfo").hasErrorStatus(a);c="_5wd4"+(c?" _1nc7":"")+(c?"":" _1nc6")+""+(c&&d?" _5ysy":"")+(e?" _1zcs":"");return b("React").createElement("div",{className:c,onMouseEnter:this.$2,onMouseLeave:this.$3},b("React").createElement("div",{className:b("joinClasses")("._1dlq","_h8t")},b("React").createElement(b("ChatRemovedMessageTombstoneInner.react"),{hovered:this.state.hovered,maxBubbleWidth:this.props.maxBubbleWidth,message:a,needsTimestampTooltip:this.props.needsTimestampTooltip,participants:this.props.participants})),b("React").createElement("div",{className:"_40qi"}))};return c}(b("React").Component);c.propTypes={message:a.object.isRequired,maxBubbleWidth:a.number.isRequired,needsTimestampTooltip:a.bool,participants:a.instanceOf(b("immutable").Map).isRequired};e.exports=c}),null);
__d("ChatMessageGroup.react",["cx","fbt","ChatConfig","ChatDateBreak.react","ChatMessage.react","ChatRemovedMessageTombstone.react","CurrentUser","FantaProfilePresence.bs","ImmutableObject","MercuryAttachmentLayoutTypeHelper","MercuryIDs","MercuryTimestamp","MessengerParticipants.bs","MessengerTextWithEmoticons.react","QE2Logger","React","ReactDOM","ShortProfiles","WorkForeignEntityType","gkx","immutable","isMessengerMessageRemoved"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("FantaProfilePresence.bs").jsComponent;a=b("immutable").OrderedMap;c=b("React").PropTypes;var j=new(b("ImmutableObject"))({name:"",href:"#"});d=b("React").createClass({displayName:"ChatMessageGroup",propTypes:{activeMessageID:c.string,author:c.string,forGameChat:c.bool,hasDateBreak:c.bool,isCanonical:c.bool,isFromViewer:c.bool,isPageMessage:c.bool,isOnline:c.bool,maxBubbleWidth:c.number,messages:c.instanceOf(b("immutable").List).isRequired,readReceipts:c.instanceOf(a).isRequired,onAttachmentLoad:c.func,onStickerClick:c.func,persona:c.object,thread:c.instanceOf(b("ImmutableObject")),threadID:c.string},getInitialState:function(){return{participants:{}}},componentDidMount:function(){b("QE2Logger").logExposureForUser("messenger_growth_tombstone"),this._subscription=this._computeParticipants()},shouldComponentUpdate:function(a,c){return this.props.isOnline!==a.isOnline||this.props.activeMessageID!==a.activeMessageID||this.props.isFromViewer!==a.isFromViewer||!b("immutable").is(this.props.messages,a.messages)||this.state.participants!==c.participants||!b("immutable").is(this.props.thread,a.thread)},componentDidUpdate:function(a){var b=this;a=k(this.props);!this._subscription&&!a.every(function(a){return b.state.participants[a]})&&(this._subscription=this._computeParticipants())},componentWillUnmount:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription)},render:function(){return b("React").createElement("div",{className:"_4tdt"+(this.props.isFromViewer?" _ua0":"")+(this.props.isFromViewer?"":" _ua1")+(this._containsMessageWithAdminLayoutType()?" _73iv":"")+(this._hasSeenHeadsAtBottom()?" _3lil":"")},this._renderProfileColumn(),b("React").createElement("div",{className:"_ua2"},this._renderName(),b("React").createElement("div",{className:"_4tdv"},this._renderMessages())))},_containsMessageWithAdminLayoutType:function(){return this.props.messages==null?!1:this.props.messages.some(function(a){if(a.attachments!=null&&a.attachments.length>0){a=a.attachments[0];return b("MercuryAttachmentLayoutTypeHelper").isAdminType(a)}return!1})},_renderProfileColumn:function(){__p&&__p();if(this.props.isFromViewer||this._containsMessageWithAdminLayoutType())return null;var a=this.state.participants[this.props.author]||j,c=a.name,d=a.image_src;this.props.persona&&(c=this.props.persona.name,d=this.props.persona.profile_picture_url);c=h._("{name} \u2013 {time}",[h._param("name",c),h._param("time",b("MercuryTimestamp").getPreciseTimestamp(this.props.messages.last().timestamp))]);var e=b("MercuryIDs").getUserIDFromThreadID(this.props.threadID);e=e?b("ShortProfiles").getNow(e):null;e=e&&e.is_messenger_only;var f=b("gkx")("697231")&&this.props.isOnline;f=f&&!e;e=b("CurrentUser").isWorkUser()&&((e=a)!=null?(e=e.work_foreign_entity_info)!=null?e.type:e:e)===b("WorkForeignEntityType").FOREIGN;a=this.props.persona?null:a.href;var g=this.props.thread;return b("React").createElement("div",{className:"_31o4"},b("React").createElement(i,{border:!0,imageSize:"28",images:[d],isActive:f,isCanonical:g.is_canonical,showMultiCompany:e,threadFBID:g.thread_fbid,threadHref:a,tooltip:c}))},_renderName:function(){__p&&__p();if(this.props.isCanonical&&!this.props.persona||this.props.isFromViewer)return null;var a=this.state.participants[this.props.messages.first().author];if(!a)return null;if(this.props.messages.first().replied_to_message)return null;var c=a.short_name;if(this.props.thread&&this.props.thread.custom_nickname){a=b("MercuryIDs").getUserIDFromParticipantID(a.id);this.props.thread.custom_nickname[a]&&(c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:this.props.thread.custom_nickname[a]}))}if(this.props.persona){a=this.state.participants[this.props.messages.first().author];c=a?h._("{persona name} from {page name}",[h._param("persona name",this.props.persona.name),h._param("page name",a.short_name)]):this.props.persona.name}return b("React").createElement("div",{className:"_4tdx"},c)},_renderMessages:function(){__p&&__p();var a=this,c=this.props.messages.size,d=[];this.props.messages.forEach(function(e,f,g){var h=e.message_id===a.props.activeMessageID;h&&!(f===0&&a.props.hasDateBreak)&&d.push(b("React").createElement(b("ChatDateBreak.react"),{date:new Date(e.timestamp),key:"db:"+e.message_id}));if(b("isMessengerMessageRemoved")(e)){d.push(b("React").createElement(b("ChatRemovedMessageTombstone.react"),{key:e.message_id,maxBubbleWidth:a.props.maxBubbleWidth,message:e,needsTimestampTooltip:!1,participants:b("immutable").Map(a.state.participants),ref:e.message_id}));return}d.push(b("React").createElement(b("ChatMessage.react"),{forGameChat:!!a.props.forGameChat,isFromViewer:a.props.isFromViewer,key:e.message_id,maxBubbleWidth:a.props.maxBubbleWidth,message:e,participants:b("immutable").Map(a.state.participants),readReceipts:a.props.readReceipts,ref:e.message_id,nextTimestamp:a._getNextTimestamp(g,c,f),onAttachmentLoad:a.props.onAttachmentLoad,onStickerClick:a.props.onStickerClick,thread:a.props.thread,needsTimestampTooltip:!1}))});return d},_hasSeenHeadsAtBottom:function(){var a=this.props,b=a.messages,c=a.nextTimestamp;a=a.readReceipts;var d=b.last().timestamp,e=0;a.forEach(function(a){return a>=d&&a<c&&++e===2?!1:null});return e===2},_getNextTimestamp:function(a,b,c){return c<b-1?a.get(c+1).timestamp:this.props.nextTimestamp},getMessageElement:function(a){return b("ReactDOM").findDOMNode(this.refs[a])},getMessage:function(a){return this.refs[a]},_computeParticipants:function(){__p&&__p();var a=this,c=k(this.props),d={},e=[];c.forEach(function(a){var c=b("MessengerParticipants.bs").getNow(a);d[a]=c;c||e.push(a)});this.setState({participants:d});return e.length>0?b("MessengerParticipants.bs").getMulti(e,function(c){var b=a.state.participants;e.forEach(function(a){b[a]=c[a]});a._subscription=null;a.setState({participants:b})}):null}});function k(a){var b=[a.author];a.readReceipts.forEach(function(a,c){b.push(c)});return b}e.exports=d}),null);
__d("MercuryShareAttachmentRenderLocations",[],(function(a,b,c,d,e,f){"use strict";var g={CHAT:"chat",CHAT_PREVIEW:"chat_preview",COMPOSER:"ufi_composer",MESSENGER:"messenger",PAGES_INBOX:"pages_inbox",getValues:function(){return[g.CHAT,g.CHAT_PREVIEW,g.COMPOSER,g.MESSENGER,g.PAGES_INBOX]},isPreview:function(a){return a===g.CHAT_PREVIEW}};e.exports=g}),null);
__d("enumerate",[],(function(a,b,c,d,e,f){"use strict";e.exports=function(b){return b.FB_enumerate}(a)}),null);
__d("MessengerDomIDs.bs",["uniqueID"],(function(a,b,c,d,e,f){"use strict";a={COMPOSER_INPUT_DESCRIPTION:b("uniqueID")(),CONVERSATION:b("uniqueID")(),MAIN_LABEL:b("uniqueID")(),MUTE_DIALOG_TITLE:b("uniqueID")(),THREAD_INFO_PANEL:b("uniqueID")(),THREAD_TITLE:b("uniqueID")()};f.ids=a}),null);
__d("ChatMessageList.react",["cx","CurrentUser","MercuryActionType","MercuryIDs","MercuryLogMessageType","MercuryMessageGroup","MercuryShareAttachmentRenderLocations","MessagingGenericAdminTextType","MessengerCallLogEvent","MessengerDomIDs.bs","MessengerGrowthNewFriendBumpSubtype","MessengerLightweightActionUtils","MessengerMessage.bs","MessengerMessageArray.bs","MessengerParticipantUtils.bs","MessengerPresenceProvider.bs","PagesMessageListGreeting.react","React","ReactDOM","gkx","immutable","nullthrows","requireCond","cr:832269"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerDomIDs.bs").ids,i=b("MessengerPresenceProvider.bs").jsComponent;a=b("React").PropTypes;var j=2,k=1e3*60*60,l=6,m=function(a){__p&&__p();var c;c=(c=a)!=null?(c=c.log_message_data)!=null?c.message_type:c:c;switch(c){case b("MessagingGenericAdminTextType").GROUP_POLL:return(c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.question_id:c:c:c;case b("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE:return(c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.game_id:c:c:c;case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_RSVP:return(c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.event_id:c:c:c;case b("MessagingGenericAdminTextType").CONFIRM_FRIEND_REQUEST:c=((c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.friend_request_subtype:c:c:c)||((c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.subtype:c:c:c);return!c||c.toLowerCase()!==b("MessengerGrowthNewFriendBumpSubtype").ICEBREAKER?null:p(a);case b("MessagingGenericAdminTextType").MESSENGER_ICEBREAKER_VOTE_CAST:return p(a);default:return null}},n=function(a){return b("MessengerLightweightActionUtils").isLWAMessage(a)?"lwa":null};c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={activeMessageID:null,messageGroups:[],prevMessages:null,newMessagesGroupIndex:Infinity,lastReadTimestamp:((b=d.props.thread)==null?void 0:b.last_read_timestamp)||Infinity,newMessagesCountForDisplay:0},d.$5=function(a){d.setState(function(b){return{activeMessageID:b.activeMessageID===a?null:b.activeMessageID}})},d.$6=function(a){d.setState({activeMessageID:a})},c)||babelHelpers.assertThisInitialized(d)}c.getDerivedStateFromProps=function(a,c){__p&&__p();if(c.prevMessages!==a.messages)if(b("cr:832269")!==null){var d=c.lastReadTimestamp;c=a.location;var e=a.messages,f=a.thread,g=b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID());(f==null?void 0:f.snippet_sender)===g&&(d=Infinity);f=e.slice().reverse().find(function(a){return a.author===g});f&&f.timestamp>d&&(d=f.timestamp);f=a.messages.filter(function(a){return a.timestamp<=d});var h=a.messages.filter(function(a){return a.timestamp>d});f=b("MercuryMessageGroup").calculateMessageGroups(f,c);c=b("MercuryMessageGroup").calculateMessageGroups(h,c);h=h.filter(function(a){return a.log_message_type==null}).length;return{messageGroups:[].concat(f,c),prevMessages:e,newMessagesGroupIndex:f.length,newMessagesCountForDisplay:h,lastReadTimestamp:d}}else return{messageGroups:b("MercuryMessageGroup").calculateMessageGroups(a.messages,a.location),prevMessages:a.messages};else return null};var d=c.prototype;d.render=function(){__p&&__p();var a=this,c=this.props,d=c.DateBreak,e=c.forGameChat,f=c.location,g=c.MessageGroup,p=c.CollapsedLogMessageGroup,u=[],v=[],w;c=this.props.thread&&this.props.thread.solid_color;var x=c?{backgroundColor:c}:null,y=this.state.activeMessageID,z=this.state.messageGroups,A=z.length,B=this.props.readReceipts;c=B.last();var C=c?c.watermark:0,D=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),E={};for(var c=b("MessengerMessageArray.bs").size(this.props.messages)-1;c>=0;c--){var F=b("MessengerMessageArray.bs").get(c,this.props.messages),G=m(F)||n(F);G&&!E[G]&&(E[G]=F.message_id)}var H=function(h){__p&&__p();var m=h>0?z[h-1]:null;m=m&&m.length>0?m[m.length-1]:null;var H=z[h],K=H[0],L=H[H.length-1],M=!1;b("cr:832269")!=null&&h>0&&h===a.state.newMessagesGroupIndex&&a.state.newMessagesCountForDisplay>0&&u.push(b("React").createElement("div",{ref:"newMessageDivider",key:"new-message-divider"},b("React").createElement(b("cr:832269"),{newMessagesCount:a.state.newMessagesCountForDisplay})));if(!m||K.timestamp-m.timestamp>k){M=!0;m=b("React").createElement(d,{date:new Date(K.timestamp),key:"db:"+K.message_id,ref:"db:"+K.message_id});v.length===0&&u.push(m)}m=n(K);if(m&&E[m]!==K.message_id){m=a.$1(K,E);u.push(m);return"continue"}if(K.action_type==b("MercuryActionType").LOG_MESSAGE){m=(G=K)!=null?(G=G.log_message_data)!=null?G.message_type:G:G;var N=(F=K)!=null?(F=F.log_message_data)!=null?(F=F.untypedData)!=null?F.friend_request_subtype:F:F:F,O=m===b("MessagingGenericAdminTextType").PARTIES_PRESENCE,P=m===b("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE,Q=m===b("MessagingGenericAdminTextType").GROUP_POLL;N=m===b("MessagingGenericAdminTextType").MESSENGER_ICEBREAKER_VOTE_CAST||m===b("MessagingGenericAdminTextType").CONFIRM_FRIEND_REQUEST&&N&&N.toLowerCase()===b("MessengerGrowthNewFriendBumpSubtype").ICEBREAKER;var R=[b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_RSVP].includes(m);if((f===b("MercuryShareAttachmentRenderLocations").CHAT||f===b("MercuryShareAttachmentRenderLocations").MESSENGER)&&(K.log_message_type===b("MercuryLogMessageType").VIDEO_CALL||K.log_message_type===b("MercuryLogMessageType").PHONE_CALL||m===b("MessagingGenericAdminTextType").MESSENGER_CALL_LOG&&(((c=K)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.event:c:c:c)===b("MessengerCallLogEvent").MISSED_CALL||((J=K)!=null?(J=J.log_message_data)!=null?(J=J.untypedData)!=null?J.event:J:J:J)===b("MessengerCallLogEvent").ONE_ON_ONE_CALL_ENDED||b("gkx")("678642")))){m=a.$2(K,D,z,A,h,B,C,L,E);u.push(m)}else{m=a.$3(K,E);w=K.message_id;!P&&!Q&&!R&&!N&&v.push(m);if(O&&b("gkx")("678643"))return"continue";(v.length===H.length||P||Q||R||N)&&(a.$4(v,u,w,x,p),v=[]);(P||Q||R||N)&&u.push(m)}return"continue"}H=b("immutable").List(H);var S=q(z,A,h,E),T=!s(B,H,S),U=r(C,L),V=t(a.props.deliveryTimestamp,L),W=H.first().author,X=b("MessengerMessage.bs").getPersona(L),Y=D===K.author;O=Y?0:l+j;var Z=a.props.maxBubbleWidth?a.props.maxBubbleWidth-O:null;u.push(b("React").createElement(i,{subscribeToIDs:W?[W]:null,key:"pp:"+K.message_id},function(c){return b("React").createElement(g,{activeMessageID:o(y,H),author:W,deliveryTimestamp:V,forGameChat:e,hasDateBreak:M,isCanonical:a.props.isCanonical,isFromViewer:Y,isPageMessage:a.props.isPageMessage,isOnline:W?b("MessengerParticipantUtils.bs").has(c,W):!1,lastReadTimestamp:U,maxBubbleWidth:Z,messages:H,nextTimestamp:S,onAttachmentLoad:a.props.onAttachmentLoad,onMessageDeselect:a.$5,onMessageSelect:a.$6,onStickerClick:a.props.onStickerClick,onReplyToMessage:a.props.onReplyToMessage,pageID:a.props.isPageMessage===!0?a.props.viewer:null,persona:b("gkx")("678634")?X:null,readReceipts:T?B:b("immutable").OrderedMap(),key:"mg:"+K.message_id,ref:function(b){return a.refs["mg:"+K.message_id]=b},thread:a.props.thread,threadID:a.props.threadID,scrollToRepliedMessage:a.props.scrollToRepliedMessage})}))};for(var I=0;I<A;I++){var J,K=H(I);if(K==="continue")continue}K=this.props.threadID||this.props.thread&&this.props.thread.thread_id||this.props.thread&&this.props.thread.thread_fbid;H=null;f===b("MercuryShareAttachmentRenderLocations").MESSENGER&&K&&this.props.isPageMessage&&(H=b("React").createElement(b("PagesMessageListGreeting.react"),{messageCount:v.length+A,threadID:K}));return b("React").createElement("div",{id:f===b("MercuryShareAttachmentRenderLocations").MESSENGER?h.CONVERSATION:null},H,u)};d.getMessageElement=function(a,c){__p&&__p();if(c===!0){var d=this.refs["db:"+a];if(d)return b("ReactDOM").findDOMNode(d)}d=this.$7(a);if(!d)return null;d=d[0].message_id;var e=this.refs["mg:"+d];if(!e)return null;return c===!0&&d===a?b("ReactDOM").findDOMNode(e):e.getMessageElement(a)};d.getMessageComponent=function(a){var b=this.$7(a);if(!b)return null;b=b[0].message_id;b=this.refs["mg:"+b];return!b?null:b.getMessage(a)};d.$7=function(a){return this.state.messageGroups.find(function(b){return b.some(function(b){return b.message_id===a})})};d.$4=function(a,c,d,e,f){a.length!==0&&(a.length>1?c.push(b("React").createElement(f,{key:"mg:"+d,style:e},a)):c.push(b("React").createElement("div",{key:"mg:"+d},a)))};d.$2=function(a,c,d,e,f,g,h,j,k){__p&&__p();var l=this,m,n,o=this.props.MessageGroup;n=((n=a)!=null?(n=n.log_message_data)!=null?n.untypedData:n:n)||{};m=(m=a)!=null?(m=m.log_message_data)!=null?m.message_type:m:m;if(m===b("MessagingGenericAdminTextType").MESSENGER_CALL_LOG){m={message_type:b("MessagingGenericAdminTextType").MESSENGER_CALL_LOG,caller:b("MercuryIDs").getParticipantIDFromUserID(b("nullthrows")(n.caller_id,"caller id")),callee:b("MercuryIDs").getParticipantIDFromUserID(b("nullthrows")(n.callee_id,"callee id")),server_info_data:n.server_info,thread_id:a.thread_fbid,answered:n.event!==b("MessengerCallLogEvent").MISSED_CALL,log_message_type:n.video?b("MercuryLogMessageType").VIDEO_CALL:b("MercuryLogMessageType").PHONE_CALL,event:n.event,added_participants:null,removed_participants:null,untypedData:null,image:null,name:null};a=babelHelpers["extends"]({},a,{log_message_data:m})}n={attach_type:"share",share:{style_list:["rtc_call_log","fallback"],log_message_body:a.log_message_body,log_message_data:a.log_message_data,log_message_type:a.log_message_type,timestamp:a.timestamp}};m=babelHelpers["extends"]({},a,{attachments:[n],body:""});var p=b("immutable").List([m]),u=q(d,e,f,k),v=!s(g,p,u),w=r(h,j),x=t(this.props.deliveryTimestamp,j),y=p.first().author;return b("React").createElement(i,{subscribeToIDs:y?[y]:null,key:a.message_id},function(d){return b("React").createElement(o,{author:p.first().author,deliveryTimestamp:x,forGameChat:l.props.forGameChat,isCanonical:l.props.isCanonical,isFromViewer:c===a.author,isOnline:y?b("MessengerParticipantUtils.bs").has(d,y):!1,isPageMessage:l.props.isPageMessage,lastReadTimestamp:w,maxBubbleWidth:l.props.maxBubbleWidth,messages:p,nextTimestamp:u,onAttachmentLoad:l.props.onAttachmentLoad,onMessageDeselect:l.$5,onMessageSelect:l.$6,onStickerClick:l.props.onStickerClick,readReceipts:v?g:b("immutable").OrderedMap(),thread:l.props.thread,threadID:l.props.threadID})})};d.$3=function(a,c){var d=this.props.LogMessage,e=m(a);c=e?c[e]:null;return a.log_message_type!==b("MercuryLogMessageType").SERVER_ERROR?b("React").createElement(d,{className:this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,key:a.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:a,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,isPageMessage:this.props.isPageMessage,thread:this.props.thread,isLastOfType:c===a.message_id}):null};d.$1=function(a,c){c=c[b("nullthrows")(n(a),"other group id first message")];var d=this.props.LogMessage;return b("React").createElement(d,{className:this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,key:a.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:a,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,thread:this.props.thread,isLastOfType:c===a.message_id})};return c}(b("React").PureComponent);c.propTypes={CollapsedLogMessageGroup:a.func.isRequired,DateBreak:a.func.isRequired,deliveryTimestamp:a.number.isRequired,forGameChat:a.bool,isCanonical:a.bool,isPageMessage:a.bool,location:a.string.isRequired,LogMessage:a.func.isRequired,loadMoreMessages:a.func,MessageGroup:a.func.isRequired,onAttachmentLoad:a.func,onStickerClick:a.func,onReplyToMessage:a.func,readReceipts:a.instanceOf(b("immutable").OrderedMap).isRequired,viewer:a.string.isRequired,thread:a.object,threadID:a.string,scrollToRepliedMessage:a.func};function o(a,b){return b.find(function(b){return b.message_id===a})?a:null}function p(a){return(a=a)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.icebreaker_type:a:a:a}function q(a,c,d,e){if(d>=c-1)return Infinity;var f=a[d+1][0],g=n(f);if(g&&e[g]!==f.message_id||((g=f)!=null?g.action_type:g)==b("MercuryActionType").LOG_MESSAGE)return q(a,c,d+1,e);else return f.timestamp}function r(a,b){return b.timestamp>a?a:Infinity}function s(a,b,c){return b.isEmpty()||!a.isEmpty()&&(a.last().action<b.first().timestamp||a.first().action>=c)}function t(a,b){return b.timestamp>a?a:Infinity}e.exports=c}),null);
__d("FantaDropdownMenuWebDriverTestIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FANTA_DROPDOWN_MENU:"fanta_dropdown_menu",FANTA_DROPDOWN_MENU_ICON:"fanta_dropdown_menu_icon",LOG_MESSAGE_TEXT:"log_message_text",ADD_FRIENDS:"fanta_dropdown_menu_add_friends",BLOCK:"fanta_dropdown_menu_block",BLOCK_PAGE_MESSAGES:"fanta_dropdown_menu_block_page_messages",CHANGE_COLOR:"fanta_dropdown_menu_change_color",CHANGE_EMOJI:"fanta_dropdown_menu_change_emoji",CONVERSATION_NAME:"fanta_dropdown_menu_conversation_name",CREATE_EVENT:"fanta_dropdown_menu_create_event",DELETE_CONVERSATION:"fanta_dropdown_menu_delete_conversation",EDIT_NICKNAME:"fanta_dropdown_menu_edit_nickname",IGNORE_MESSAGES:"fanta_dropdown_menu_ignore_messages",LEAVE_CONVERSATION:"fanta_dropdown_menu_leave_conversation",LEAVE_FEEDBACK:"fanta_dropdown_menu_leave_feedback",MUTE_CONVERSATION:"fanta_dropdown_menu_mute_conversation",OPEN_FACEBOOK_PAGE:"fanta_dropdown_menu_open_facebook_page",OPEN_FULL_CONVERSATION:"fanta_dropdown_menu_open_full_conversation",PIN_CONVERSATION:"fanta_dropdown_menu_pin_conversation",PEOPLE_LIST:"fanta_dropdown_menu_people_list",REPORT:"fanta_dropdown_menu_report",MUTE_CONVERSATION_TEXT:"fanta_dropdown_menu_mute_conversation_text"})}),null);
__d("MessagesViewerSetID",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSAGES:"messages",MESSAGES_VIEW_ALL_IN_THREAD:"messages:view_all_in_thread"})}),null);
__d("MessagesViewer",["AsyncRequest","DOM","MessagesViewerSetID","PhotoStore","React","ReactDOM","ge"],(function(a,b,c,d,e,f){__p&&__p();a={renderSpotlight:function(a,c,d,e){var f=a.setID;f||(f=b("MessagesViewerSetID").MESSAGES);g(b("React").createElement(d,{actorid:a.actorid,dimensions:[a.dimensions],disablepaging:a.disablePaging,disableForward:a.disableForward,forwardDialogComponent:e,open:!0,photoid:a.fbid,reverse:!1,rootClassName:a.rootClassName,setid:f,snapToPhoto:a.snapToPhoto,thumbsrc:a.src}));if(!b("PhotoStore").hasBeenCreated(f)&&a.endpoint){d=new(b("AsyncRequest"))(a.endpoint);c&&d.setRelativeTo(c);d.send()}},renderVideo:function(a){g(a)}};function g(a){var c=b("ge")("messages_viewer");c||(c=b("DOM").create("div",{id:"messages_viewer"}),document.body.appendChild(c));b("ReactDOM").render(a,c,function(){this.subscribeOnce("close",function(){b("ReactDOM").unmountComponentAtNode(c)})})}e.exports=a}),null);
__d("MercuryAttachmentViewer",["Bootloader","MessagesViewer","React","Run","emptyFunction"],(function(a,b,c,d,e,f){"use strict";a={renderVideo:function(a){b("Bootloader").loadModules(["MessagingVideoViewer.react","MessagingForwardAttachmentDialog.react"],function(c,d){b("MessagesViewer").renderVideo(b("React").createElement(c,babelHelpers["extends"]({},a,{forwardDialogComponent:d})))},"MercuryAttachmentViewer")},bootstrapWithConfig:function(a,c){b("Bootloader").loadModules(["SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],function(d,e){b("MessagesViewer").renderSpotlight(a,c,d,e)},"MercuryAttachmentViewer")},preload:function(){b("Run").onAfterLoad(function(){b("Bootloader").loadModules(["MessagingVideoViewer.react","SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],b("emptyFunction"),"MercuryAttachmentViewer")})}};e.exports=a}),null);
__d("MercuryMessageRendererUtils",["cx","invariant","HovercardLink","MercuryViewer","MessengerTextWithEmoticons.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a={getLinkToParticipant:function(a,c){var d=a.fbid,e=b("HovercardLink").constructEndpoint({id:d});c=c&&c.custom_nickname&&c.custom_nickname[d];c&&(c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:c}));d=c?c:a.name;return a.href?b("React").createElement("a",{className:"_5wzt",href:a.href,"data-hovercard":e},d):d},moveCurrentUserToFront:function(a){a===void 0&&(a=[]);a||h(0,2427);var c=a.indexOf(b("MercuryViewer").getID());if(c>0){c=a.filter(function(a){return a!==b("MercuryViewer").getID()});return[b("MercuryViewer").getID()].concat(c)}return a}};e.exports=a}),null);
__d("MercuryLogMessageRenderer",["cx","fbt","invariant","ix","Bootloader","CSS","CurrentUser","Image.react","MercuryAttachmentViewer","MercuryLogMessageType","MercuryMessageRendererUtils","MercuryViewer","MessagingSourceEnum","MessengerAdminGroupUtils","MessengerLightweightActionUtils","MessengerParticipants.bs","MessengerState.bs","MessengerTextWithEmoticons.react","React","ReactDOM","TooltipLink.react","UserAgent","convertMIGColorToFIGColor"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();a={renderText:function(a,c,d,e){__p&&__p();c=c||b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),a.thread_id);if(b("MessengerLightweightActionUtils").isLWAMessage(a)){e(b("MessengerLightweightActionUtils").getCollapsedLWAText(a));return}switch(a.log_message_type){case b("MercuryLogMessageType").SUBSCRIBE:var f=a.author;a.log_message_data||i(0,2425);var g=a.log_message_data.added_participants;g||i(0,2426);f=g.length===1&&f===g[0];g=c&&b("MessengerAdminGroupUtils").isWorkFroup(c)&&b("MessengerAdminGroupUtils").isWorkSyncedChatThreadMemberSyncMessage(a);f||g?b("Bootloader").loadModules(["MercuryJoinableMessageRenderer"],function(b){b.renderText(a,c,e)},"MercuryLogMessageRenderer"):m(a,e);break;case b("MercuryLogMessageType").UNSUBSCRIBE:b("MessengerAdminGroupUtils").isJoinableThread(c)?b("MessengerAdminGroupUtils").isGroupChat(c)?A(a,e):s(a,e):r(a,e);break;case b("MercuryLogMessageType").THREAD_NAME:c&&b("MessengerAdminGroupUtils").isWorkFroup(c)&&b("MessengerAdminGroupUtils").isWorkSyncedChatThreadCreationMessage(a)?v(a,e):c&&b("MessengerAdminGroupUtils").isJoinableThread(c)?b("MessengerAdminGroupUtils").isGroupChat(c)?B(a,c,e):t(a,c,e):w(a,c,e);break;case b("MercuryLogMessageType").THREAD_IMAGE:c&&b("MessengerAdminGroupUtils").isJoinableThread(c)?b("MessengerAdminGroupUtils").isGroupChat(c)?C(a,c,e):x(a,c,e):y(a,c,e);break;case b("MercuryLogMessageType").WALLPAPER:z(a,e);break;case b("MercuryLogMessageType").GENERIC_ADMIN_TEXT:var h=b("convertMIGColorToFIGColor")(c&&c.solid_color);b("Bootloader").loadModules(["MercuryXMATRenderer"],function(b){e(b.renderText(h,a,d))},"MercuryLogMessageRenderer");break;default:b("Bootloader").loadModules(["MercurySpecialLogMessageRenderer"],function(b){b.renderText(a,e)},"MercuryLogMessageRenderer");break}},renderIcon:function(a){return b("React").createElement(b("Image.react"),{className:k(a.log_message_type,a.log_message_data),src:j("99239")})},renderLegacy:function(a,c,d,e){k(e.log_message_type,e.log_message_data).split(" ").forEach(function(c){return c&&b("CSS").addClass(a,c)}),this.renderText(e,null,!1,function(a){b("ReactDOM").render(b("React").createElement("span",null,a),c)}),this.renderAttachmentLegacy(d,e)},renderAttachmentLegacy:function(a,c){if(c.log_message_type===b("MercuryLogMessageType").THREAD_IMAGE){c.log_message_data||i(0,2425);var d=c.log_message_data.image;d&&d.preview_url&&(b("ReactDOM").render(b("React").createElement(b("Image.react"),{className:"_z6a",onClick:function(){return l(d)},src:d.preview_url}),a),b("CSS").show(a))}}};e.exports=a;function k(a,c){c=!!(c&&c.answered);var d=!a||a===b("MercuryLogMessageType").GENERIC_ADMIN_TEXT;return"_5wzu"+(a===b("MercuryLogMessageType").SUBSCRIBE?" _5wzj":"")+(a===b("MercuryLogMessageType").UNSUBSCRIBE?" _5wzk":"")+(a===b("MercuryLogMessageType").THREAD_NAME?" _5wzl":"")+(a===b("MercuryLogMessageType").THREAD_IMAGE?" _5wzm":"")+(a===b("MercuryLogMessageType").VIDEO_CALL&&c?" _5wzn":"")+(a===b("MercuryLogMessageType").VIDEO_CALL&&!c?" _5wzo":"")+(a===b("MercuryLogMessageType").PHONE_CALL&&c?" _5wzp":"")+(a===b("MercuryLogMessageType").PHONE_CALL&&!c?" _5wzq":"")+(a===b("MercuryLogMessageType").SERVER_ERROR?" _5wzr":"")+(d?" _2r5l":"")}function l(a){b("MercuryAttachmentViewer").bootstrapWithConfig({src:a.preview_url,endpoint:a.url,fbid:a.metadata.fbid,dimensions:a.metadata.dimensions,disablePaging:!0},null)}function m(a,c){__p&&__p();a.log_message_data||i(0,1204);var d=b("MercuryMessageRendererUtils").moveCurrentUserToFront(a.log_message_data.added_participants);d||i(0,1205);switch(d.length){case 1:n(a,c,d);break;case 2:o(a,c,d);break;case 3:p(a,c,d);break;default:q(a,c,d);break}}function n(a,c,d){var e=[a.author,d[0]];b("MessengerParticipants.bs").getMulti(e,function(e){a.author===b("MercuryViewer").getID()?c(h._("You added {subscriber1}.",[h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]]))])):d[0]===b("MercuryViewer").getID()?c(h._("{actor} added you.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author]))])):c(h._("{actor} added {subscriber1}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]]))]))})}function o(a,c,d){var e=[a.author].concat(d);b("MessengerParticipants.bs").getMulti(e,function(e){a.author===b("MercuryViewer").getID()?c(h._("You added {subscriber1} and {subscriber2}.",[h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]]))])):d[0]===b("MercuryViewer").getID()?c(h._("{actor} added you and {subscriber2}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]]))])):c(h._("{actor} added {subscriber1} and {subscriber2}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]]))]))})}function p(a,c,d){var e=[a.author].concat(d);b("MessengerParticipants.bs").getMulti(e,function(e){a.author===b("MercuryViewer").getID()?c(h._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]])),h._param("subscriber3",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[2]]))])):d[0]===b("MercuryViewer").getID()?c(h._("{actor} added you, {subscriber2} and {subscriber3}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]])),h._param("subscriber3",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[2]]))])):c(h._("{actor} added {subscriber1}, {subscriber2} and {subscriber3}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]])),h._param("subscriber3",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[2]]))]))})}function q(a,c,d){var e=[a.author].concat(d);b("MessengerParticipants.bs").getMulti(e,function(e){function f(a){var c=b("React").createElement("div",null,a.map(function(a){return b("React").createElement("div",null,a.name)}));return b("React").createElement(b("TooltipLink.react"),{alignH:"center",position:"above",tooltip:c},h._({"*":"{num} more"},[h._param("num",a.length,[0])]))}var g=d.map(function(a){return e[a]});a.author===b("MercuryViewer").getID()?c(h._("You added {subscriber1}, {subscriber2} and {more_people}.",[h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(g[0])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(g[1])),h._param("more_people",f(g.slice(2)))])):d[0]===b("MercuryViewer").getID()?c(h._("{actor} added you, {subscriber2} and {more_people}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(g[1])),h._param("more_people",f(g.slice(2)))])):c(h._("{actor} added {subscriber1}, {subscriber2} and {more_people}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(g[0])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(g[1])),h._param("more_people",f(g.slice(2)))]))})}function r(a,c){__p&&__p();var d=[a.author];a.log_message_data||i(0,2425);var e=a.log_message_data.removed_participants;e||i(0,2427);var f;e.length===1&&(f=e[0],d.push(f));b("MessengerParticipants.bs").getMulti(d,function(d){var e=d[a.author];d=d[f];a.author===b("MercuryViewer").getID()?!f||f===a.author?c(h._("You left the conversation.")):c(h._("You removed {name} from the conversation.",[h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))])):!f||f===a.author?c(h._("{actor} left the conversation.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):f===b("MercuryViewer").getID()?c(h._("{actor} removed you from the conversation.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):c(h._("{actor} removed {name} from the conversation.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e)),h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))]))})}function s(a,c){__p&&__p();var d=[a.author];a.log_message_data||i(0,2425);var e=a.log_message_data.removed_participants;e||i(0,2427);var f;e.length===1&&(f=e[0],d.push(f));b("MessengerParticipants.bs").getMulti(d,function(d){var e=d[a.author];d=d[f];a.author===b("MercuryViewer").getID()?!f||f===a.author?c(h._("You left the room.")):c(h._("You removed {name} from the room.",[h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))])):!f||f===a.author?c(h._("{actor} left the room.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):f===b("MercuryViewer").getID()?c(h._("{actor} removed you from the room.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):c(h._("{actor} removed {name} from the room.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e)),h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))]))})}function t(a,c,d){__p&&__p();a.log_message_data||i(0,2425);var e=a.log_message_data.name,f="_5wzs"+(b("UserAgent").isBrowser("Chrome")?" _4fbd":"");if(a.author===b("MercuryViewer").getID())if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("You named the room: {name}.",[h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("You removed the room name."));else b("MessengerParticipants.bs").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a,c);if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("{actor} named the room: {name}.",[h._param("actor",a),h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("{actor} removed the room name.",[h._param("actor",a)]))})}function u(a,c,d,e,f){a.author===b("MercuryViewer").getID()?f(h._("You named the group {thread_name}. Your group is also on Facebook.",[h._param("thread_name",b("React").createElement("span",{className:e},b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:d})))])):b("MessengerParticipants.bs").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a,c);f(h._("{actor} named the group {thread_name}. Your group is also on Facebook.",[h._param("actor",a),h._param("thread_name",b("React").createElement("span",{className:e},b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:d})))]))})}function v(a,c){a.log_message_data||i(0,2425);var d=a.log_message_data.name,e="_5wzs"+(b("UserAgent").isBrowser("Chrome")?" _4fbd":"");if(d){a.source===b("MessagingSourceEnum").WORK_DEFAULT_GROUP_SYNCED_CHAT_CREATION?c(h._("You can now chat to this group on Workplace Chat.")):c(h._("You can now chat to {name} on Workplace Chat.",[h._param("name",b("React").createElement("span",{className:e},b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:d})))]));return}}function w(a,c,d){__p&&__p();a.log_message_data||i(0,2425);var e=a.log_message_data.name,f="_5wzs"+(b("UserAgent").isBrowser("Chrome")?" _4fbd":"");if(e&&a.tags&&a.tags.indexOf(b("MessagingSourceEnum").EVENT_UPCOMING_BUMP)!==-1)d(h._("The group has been named {name}.",[h._param("name",b("React").createElement("span",{className:f},b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e})))]));else if(e&&a.tags&&a.tags.indexOf(b("MessagingSourceEnum").GROUPSYNC_NAMING)!==-1)u(a,c,e,f,d);else if(a.author===b("MercuryViewer").getID())if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("You named the conversation: {name}.",[h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("You removed the conversation name."));else b("MessengerParticipants.bs").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a,c);if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("{actor} named the conversation: {name}.",[h._param("actor",a),h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("{actor} removed the conversation name.",[h._param("actor",a)]))})}function x(a,c,d){a.author===b("MercuryViewer").getID()?(a.log_message_data||i(0,2425),a.log_message_data.image?d(h._("You changed the room picture.")):d(h._("You removed the room picture."))):b("MessengerParticipants.bs").get(a.author,function(e){e=b("MercuryMessageRendererUtils").getLinkToParticipant(e,c);a.log_message_data||i(0,2425);a.log_message_data.image?d(h._("{actor} changed the room picture.",[h._param("actor",e)])):d(h._("{actor} removed the room picture.",[h._param("actor",e)]))})}function y(a,c,d){a.tags!==void 0&&a.tags.indexOf(b("MessagingSourceEnum").EVENT_UPCOMING_BUMP)!==-1?d(h._("The conversation picture has been set.")):a.author===b("MercuryViewer").getID()?(a.log_message_data||i(0,2425),a.log_message_data.image?d(h._("You changed the conversation picture.")):d(h._("You removed the conversation picture."))):b("MessengerParticipants.bs").get(a.author,function(e){e=b("MercuryMessageRendererUtils").getLinkToParticipant(e,c);a.log_message_data||i(0,2425);a.log_message_data.image?d(h._("{actor} changed the conversation picture.",[h._param("actor",e)])):d(h._("{actor} removed the conversation picture.",[h._param("actor",e)]))})}function z(a,c){a.author===b("MercuryViewer").getID()?c(h._("You changed the wallpaper.")):b("MessengerParticipants.bs").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a);c(h._("{actor} changed the wallpaper.",[h._param("actor",a)]))})}function A(a,c){__p&&__p();var d=[a.author];a.log_message_data||i(0,2425);var e=a.log_message_data.removed_participants;e||i(0,2427);var f;e.length===1&&(f=e[0],d.push(f));b("MessengerParticipants.bs").getMulti(d,function(d){var e=d[a.author];d=d[f];a.author===b("MercuryViewer").getID()?!f||f===a.author?c(h._("You left the chat.")):c(h._("You removed {name} from the chat.",[h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))])):!f||f===a.author?c(h._("{actor} left the chat.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):f===b("MercuryViewer").getID()?c(h._("{actor} removed you from the chat.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):c(h._("{actor} removed {name} from the chat.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e)),h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))]))})}function B(a,c,d){__p&&__p();a.log_message_data||i(0,2425);var e=a.log_message_data.name,f="_5wzs"+(b("UserAgent").isBrowser("Chrome")?" _4fbd":"");if(a.author===b("MercuryViewer").getID())if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("You named the chat {name}.",[h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("You removed the chat name."));else b("MessengerParticipants.bs").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a,c);if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("{actor} named the chat {name}.",[h._param("actor",a),h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("{actor} removed the chat name.",[h._param("actor",a)]))})}function C(a,c,d){a.author===b("MercuryViewer").getID()?(a.log_message_data||i(0,2425),a.log_message_data.image?d(h._("You changed the chat picture.")):d(h._("You removed the chat picture."))):b("MessengerParticipants.bs").get(a.author,function(e){e=b("MercuryMessageRendererUtils").getLinkToParticipant(e,c);a.log_message_data||i(0,2425);a.log_message_data.image?d(h._("{actor} changed the chat picture.",[h._param("actor",e)])):d(h._("{actor} removed the chat picture.",[h._param("actor",e)]))})}}),null);
__d("MercuryLogMessage.react",["cx","fbt","DOM","DOMDimensions","Event","EventReminderRequestHelper","FantaDropdownMenuWebDriverTestIDs","MercuryLogMessageRenderer","MercuryLogMessageType","MessagingGenericAdminTextType","React","ReactDOM","ShimButton.react","cancelAnimationFrame","emptyFunction","formatDate","joinClasses","requestAnimationFrame","requireWeak"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i=266;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={messageText:null,showEventReminderFlyout:!1},d.$4=function(){d.$5()},d.$9=function(){var a;a=(a=d.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_id:a:a:a;!d.state.showEventReminderFlyout&&a?b("EventReminderRequestHelper").fetchEventReminder(d.props.thread.thread_id,a,function(){d.$1&&d.setState({showEventReminderFlyout:!0})}):d.setState({showEventReminderFlyout:!1})},d.$11=function(a){a!==d.state.showEventReminderFlyout&&d.setState({showEventReminderFlyout:a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1=!0,this.UNSAFE_componentWillReceiveProps(this.props)};d.componentWillUnmount=function(){this.$1=!1,this.$2&&b("cancelAnimationFrame")(this.$2)};d.$3=function(){return b("React").createElement(b("ShimButton.react"),{form:"link",onClick:this.$4},h._("Show previous messages."))};d.$5=function(){var a=this.props.loadMoreMessages&&this.props.loadMoreMessages();if(!this.$1)return;if(a)this.setState({messageText:this.$3()});else{a=h._("Couldn't find previous messages.");this.setState({messageText:a})}};d.UNSAFE_componentWillReceiveProps=function(a){if(a.message.log_message_type===b("MercuryLogMessageType").SERVER_ERROR)return;b("MercuryLogMessageRenderer").renderText(a.message,a.thread,a.isLastOfType,function(a){this.$1&&this.setState({messageText:a})}.bind(this))};d.shouldComponentUpdate=function(a,b){return this.state.messageText!=b.messageText||a.maxWidth!==this.props.maxWidth||this.state.showEventReminderFlyout!==b.showEventReminderFlyout};d.componentDidUpdate=function(){var a=this;this.$6();if(!this.refs.attachment)return;b("MercuryLogMessageRenderer").renderAttachmentLegacy(this.refs.attachment,this.props.message);b("DOM").scry(this.refs.wrap,"img").forEach(function(c){var d=b("Event").listen(c,"load",function(){a.$6(),d.remove()})})};d.render=function(){return b("React").createElement("div",babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,"_5ye6"),ref:"wrap",style:babelHelpers["extends"]({},this.props.style,this.$7()),title:b("formatDate")(new Date(this.props.message.timestamp),"g:ia")}),b("React").createElement("div",{className:"_5ye7"},b("MercuryLogMessageRenderer").renderIcon(this.props.message),b("React").createElement("span",{"data-testid":b("FantaDropdownMenuWebDriverTestIDs").LOG_MESSAGE_TEXT},this.state.messageText)),b("React").createElement("div",{className:"_5ye8",ref:"attachment"},this.$8()))};d.$8=function(){__p&&__p();var a;if(this.props.thread&&!this.props.thread.lightweight_event||!this.props.message.log_message_data)return null;if(!this.props.event||!this.props.event.exists)return null;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_time:a:a:a;if(!a)return null;typeof a==="string"&&(a=parseInt(a,10));if(a<=Math.floor(Date.now()/1e3))return null;var c;b("requireWeak")("Link.react",function(a){c=a});var d;switch(this.props.message.log_message_data.message_type){case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE:d=h._("Change");break;default:d=null}a=b("React").createElement(c,{href:"#",onClick:this.$9,title:h._("Edit Event"),ref:"event_rem_link"},d);this.props.displayItems&&(a=null);return b("React").createElement("span",null,a,this.$10())};d.$10=function(){__p&&__p();var a=this,c;if(!this.state.showEventReminderFlyout)return null;var d="right",e=b("ReactDOM").findDOMNode(this.refs.wrap);e&&e instanceof Element&&e.getBoundingClientRect().left<i&&(d="left");e={alignment:d,position:"above",contextRef:function(){return a.refs.event_rem_link},shown:this.state.showEventReminderFlyout,onToggle:this.$11};var f;b("requireWeak")("EventsActionsLogger",function(a){f=a});d={action_history:[{surface:f.Surface.MESSENGER_CHAT_TAB,mechanism:f.Mechanism.REMINDER_ADMIN_TEXT}]};c=(c=this.props.message)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.event_id:c:c:c;c={threadID:this.props.thread.thread_id,eventID:c,dialogProps:e,flyoutNoSheet:!0,isEditing:!0,actionContext:d};var g;b("requireWeak")("ChatEventReminderContainer.react",function(a){g=a});return b("React").createElement(g,c)};d.$7=function(){return this.props.maxWidth?{maxWidth:this.props.maxWidth}:null};d.$6=function(){var a=this;this.$2&&b("cancelAnimationFrame")(this.$2);if(!this.$1)return;this.$2=b("requestAnimationFrame")(function(){a.props.onImageLoad&&a.props.onImageLoad(b("DOMDimensions").getElementDimensions(a.refs.wrap).height),delete a.$2})};return c}(b("React").Component);c.propTypes={loadMoreMessages:a.func,maxWidth:a.number,message:a.object.isRequired,onImageLoad:a.func,thread:a.object,isLastOfType:a.bool.isRequired,event:a.object};c.defaultProps={onImageLoad:b("emptyFunction")};e.exports=c}),null);
__d("MercuryLogMessageContainer.react",["EventReminderStateStore","FluxContainer","MercuryLogMessage.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("EventReminderStateStore")]};c.calculateState=function(a,c){a=(a=c.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_id:a:a:a;return{event:b("EventReminderStateStore").getEvent(c.thread?c.thread.thread_id:"",a)}};var d=c.prototype;d.render=function(){return b("React").createElement(b("MercuryLogMessage.react"),{className:this.props.className,onLogMessageExpanded:this.props.onLogMessageExpanded,loadMoreMessages:this.props.loadMoreMessages,message:this.props.message,onImageLoad:this.props.onImageLoad,viewer:this.props.viewer,isPageMessage:this.props.isPageMessage,thread:this.props.thread,isLastOfType:this.props.isLastOfType,event:this.state.event})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MessengerReadReceipt.bs",["bs_array","Utils.bs","immutable","bs_js_primitive","bs_belt_MapString","MercuryActionStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d,e){__p&&__p();c=c>=a.timestamp;var f=a.status;e=!e||d!==a.author;if(c)if(f==null)if(e)return!0;else return!1;else if(e)return f===b("MercuryActionStatus").SUCCESS;else return!1;else return!1}function a(a,c,d){__p&&__p();if(c==null)return[];else{a=b("bs_belt_MapString").get(a,c.thread_id);if(a!==void 0)return b("bs_js_primitive").valFromOption(a).reduce(function(a,e,f,h){if(g(c,e.watermark,f,b("Utils.bs").isTruthy(d)))return b("bs_array").append(a,[f]);else return a},[]);else return[]}}function c(a,c){a=b("bs_belt_MapString").get(a,c.thread_id);if(a!==void 0)return b("bs_js_primitive").valFromOption(a).reduce(function(a,b,d,e){if(a)return g(c,b.watermark,d,!1);else return!1},!0);else return!1}function d(a,c){a=b("bs_belt_MapString").get(a,c);if(a!==void 0)return b("bs_js_primitive").valFromOption(a);else return b("immutable").OrderedMap()}function e(a,c,d){a=b("bs_belt_MapString").get(a,c);if(a!==void 0){c=b("bs_js_primitive").valFromOption(a).get(d);if(c==null)return null;else return c}else return null}var h=b("bs_belt_MapString").isEmpty,i=b("bs_belt_MapString").empty;f.emptyReadReceipts=i;f.wasSeen=g;f.getSeenBy=a;f.wasSeenByAll=c;f.getSeenTimestamps=d;f.getSeenTimestamp=e;f.hasReadReceipts=h}),null);
__d("ChatConversation.react",["ChatCollapsedLogMessageGroup.react","ChatDateBreak.react","ChatMessageGroup.react","ChatMessageList.react","MercuryIDs","MercuryLogMessageContainer.react","MercuryShareAttachmentRenderLocations","MessengerReadReceipt.bs","React","cancelAnimationFrame","clearTimeout","immutable","requestAnimationFrame","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("immutable").OrderedMap;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1=b("requestAnimationFrame")(function(){a.$2=b("setTimeout")(function(){a.props.onMount&&a.props.onMount(),delete a.$2},0),delete a.$1})};d.componentWillUnmount=function(){this.$1&&b("cancelAnimationFrame")(this.$1),b("clearTimeout")(this.$2)};d.render=function(){return b("React").createElement("div",null,this.props.contextBanner,b("React").createElement(b("ChatMessageList.react"),{DateBreak:b("ChatDateBreak.react"),forGameChat:this.props.forGameChat,LogMessage:b("MercuryLogMessageContainer.react"),MessageGroup:b("ChatMessageGroup.react"),deliveryTimestamp:0,isCanonical:this.props.isCanonical,location:b("MercuryShareAttachmentRenderLocations").CHAT,loadMoreMessages:this.props.loadMoreMessages,maxBubbleWidth:this.props.maxBubbleWidth,CollapsedLogMessageGroup:b("ChatCollapsedLogMessageGroup.react"),messages:this.props.messages,onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,readReceipts:this.$3(this.props),ref:"messageList",viewer:this.props.viewer,thread:this.props.thread,threadID:this.props.threadID}))};d.$3=function(a){__p&&__p();var c=b("MercuryIDs").getParticipantIDFromUserID(a.viewer),d=b("MessengerReadReceipt.bs").getSeenTimestamps(a.readReceipts,a.threadID),e=new Set(a.thread?a.thread.participants:d.keys());e["delete"](c);return d.withMutations(function(c){b("immutable").Seq(a.messages).reverse().forEach(function(a){if(e.size===0)return!1;if(!e.has(a.author))return null;c.update(a.author,function(b){return!b||b.watermark<=a.timestamp?{watermark:a.timestamp,action:a.timestamp}:b});e["delete"](a.author);return null})})};d.getMessageList=function(){return this.refs.messageList};return c}(b("React").Component);c.propTypes={contextBanner:a.object,forGameChat:a.bool.isRequired,isCanonical:a.bool.isRequired,loadMoreMessages:a.func,maxBubbleWidth:a.number.isRequired,onAttachmentLoad:a.func,onMount:a.func,onStickerClick:a.func,thread:a.object,threadID:a.string.isRequired,viewer:a.string.isRequired};e.exports=c}),null);
__d("ChatEditParticipantsUtils",["AsyncDialog","AsyncRequest","MercuryIDs","MercuryThreadIDMap","URI"],(function(a,b,c,d,e,f){"use strict";var g=b("MercuryThreadIDMap").get();a={showParticipantsModal:function(a){if(!b("MercuryIDs").isGroupChat(a))return;g.getServerIDFromClientID(a,function(a){b("AsyncDialog").send(new(b("AsyncRequest"))(new(b("URI"))("/ajax/browser/dialog/multichat_members/").addQueryData({id:a})))})}};e.exports=a}),null);
__d("MessengerBlockEntryPoint",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BLOCK_COMPOSER:"BLOCK_COMPOSER",DECLINE_MR:"DECLINE_MR",THREAD_VIEW:"THREAD_VIEW",FRX_CONFIRMATION:"FRX_CONFIRMATION",OTHER:"OTHER"})}),null);
__d("ChatTabBlockerComposer.react",["cx","fbt","FRXEntryPoint","MercuryIDs","MercuryThreadActions","MessengerBlockEntryPoint","MessengerParticipants.bs","React","XUIButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MercuryThreadActions").get();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this,c=this.$1();return b("React").createElement("div",{className:"_7ubs"},b("React").createElement("div",{className:"_7ubt"},c?h._("You've blocked {name}. You can't message or call them in this chat, and you won't receive their messages or calls.",[h._param("name",c)]):h._("You've blocked this person. You can't message or call them in this chat, and you won't receive their messages or calls.")),b("React").createElement("div",{className:"_7ubu"},b("React").createElement(b("XUIButton.react"),{label:h._("Unblock"),onClick:function(){i.blockMessages(a.props.threadID,b("MessengerBlockEntryPoint").BLOCK_COMPOSER)},className:"_7ubv"}),b("React").createElement(b("XUIButton.react"),{label:h._("Something's wrong"),onClick:function(){a.props.onSomethingWrong&&a.props.onSomethingWrong(a.props.threadID,!1,b("FRXEntryPoint").BLOCK_COMPOSER)},className:"_7ubv"})))};d.$1=function(){if(!this.props.threadID)return null;var a=b("MercuryIDs").getParticipantIDFromFromThreadID(this.props.threadID);a=b("MessengerParticipants.bs").getNow(a);return a==null?void 0:a.short_name};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FRXURI",["ActorURI","FRXEntryPoint","NFXContextFactory","XRapidReportingDialogController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=a.reportable_ent_token,d=a.story_location,e=a.entry_point;e=e===void 0?b("FRXEntryPoint").UNKNOWN:e;var f=a.responsible_id;a=a.actor_id;c=b("NFXContextFactory").withEntMessageThread({reportable_ent_token:c,story_location:d,entry_point:e,responsible_id:f});d=b("XRapidReportingDialogController").getURIBuilder().setString("context",c).getURI();a!=null&&(d=b("ActorURI").create(d,a));return d}function c(a){var c=a.reportable_ent_token,d=a.story_location,e=a.entry_point;e=e===void 0?b("FRXEntryPoint").UNKNOWN:e;var f=a.initial_action_name;a=a.actor_id;c=b("NFXContextFactory").withEntReportable({reportable_ent_token:c,story_location:d,entry_point:e,initial_action_name:f});d=b("XRapidReportingDialogController").getURIBuilder().setString("context",c).getURI();a!=null&&(d=b("ActorURI").create(d,a));return d}e.exports={withEntMessageThread:a,withEntReportable:c}}),null);
__d("FantaFRXUtil",["AsyncDialog","AsyncRequest","FRXEntryPoint","FRXURI","MercuryIDs","NFXStoryLocation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={isFRXEligible:function(a,c){return b("MercuryIDs").isLocalThread(c)?!1:a!=null&&a.thread_fbid!==null&&a.message_count>0},FRXClicked:function(a,c,d){d===void 0&&(d=b("FRXEntryPoint").REPORT_BUTTON);var e=b("MercuryIDs").getUserIDFromThreadID(a)||"",f=btoa("EntMessengerViewer1To1Thread:"+e),g=b("NFXStoryLocation").MESSENGER_DIRECT_THREAD_DETAILS;if(Boolean(c)){c=b("MercuryIDs").getThreadFBIDFromThreadID(a);f=btoa("EntMessengerViewerGroupThread:"+c);g=b("NFXStoryLocation").MESSENGER_GROUP_THREAD_DETAILS}a=b("FRXURI").withEntMessageThread({reportable_ent_token:f,story_location:g,entry_point:d,responsible_id:e});new(b("AsyncRequest"))(a).send()},messengerBlockFRXEntry:function(a,c){var d=btoa("EntMessengerViewer1To1Thread:"+a),e=b("NFXStoryLocation").MESSENGER_DIRECT_THREAD_DETAILS;d=b("FRXURI").withEntMessageThread({reportable_ent_token:d,story_location:e,entry_point:b("FRXEntryPoint").BLOCK_BUTTON,responsible_id:a});b("AsyncDialog").send(new(b("AsyncRequest"))(d).setRelativeTo(c))}};e.exports=a}),null);
__d("ChatTabSRXUtil",["CurrentUser","FantaFRXUtil","MercuryIDs","getPageIDFromThreadID"],(function(a,b,c,d,e,f){"use strict";a={isSRXEligible:function(a,c){return b("MercuryIDs").isCanonical(c)&&!b("getPageIDFromThreadID")(c)&&!b("CurrentUser").isWorkUser()&&b("FantaFRXUtil").isFRXEligible(a,c)}};e.exports=a}),null);
__d("ChatTabComposerContainer.react",["cx","fbt","Bootloader","ChatComposer","ChatTabBlockerComposer.react","ChatTabSRXUtil","FantaFRXUtil","FantaMessageActions","FantaTabActions","FBLogger","Keys","LogHistory","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryMessageActions","MercuryShareAttachmentRenderLocations","MessengerBotMenuDataFetcher","MessengerState.bs","MNCommercePageSetting","P2PGKValues","PhotosUploadWaterfall","React","ReactDOM","SimpleXUIDialog","WaterfallIDGenerator","emptyFunction","getPageIDFromThreadID","getThreadTypeNameFromThreadType","performanceAbsoluteNow","qex","setImmediate","shallowCompare"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ChatComposer").ChatComposer,j="right",k=/^\s*$/,l=b("LogHistory").getInstance("chat_tab_view"),m=!1,n=!1,o=140,p=90;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showP2PButton:d.$6(),pageID:b("getPageIDFromThreadID")(d.props.threadID),showStructuredMenu:d.$7(),longInput:!1},d.$9=function(a){d.$2=a},d.$10=function(a){d.$3&&d.$3.uploadFiles([].concat(a))},d.$11=function(a){d.$5=a},d.$12=function(a){d.$3=a},d.onSend=function(a){d.props.forGameChat&&b("Bootloader").loadModules(["GamesQuicksilverFunnelLogger"],function(a){a.logGameChatSendMessage(a.getDefaultFunnelName())},"ChatTabComposerContainer.react");if(a&&a.profile_ranges&&a.profile_ranges.length){var c=a,e=d.props.thread;b("Bootloader").loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(a,d){new a().setEvent(d.MENTION).setGroupSize(e&&e.participants&&e.participants.length).setNumDelivered((c.profile_ranges||[]).length).setThreadid(e&&e.thread_id).setThreadType(b("getThreadTypeNameFromThreadType")(e&&e.thread_type)).setOfflineThreadid(c.offline_threading_id).log()},"ChatTabComposerContainer.react")}n?d.$2&&d.$2.onSend&&d.$2.onSend(a):d.refs.composer&&d.refs.composer.onSend(a)},d.focusInput=function(){var a=d.getInput();a&&a.focus&&a.focus()},d.$14=function(a){a=d.getInput();a&&typeof a.handleSend==="function"&&(a&&a.handleSend())},d.$34=function(a,c){b("MercuryMessageActions").getForFBID(d.props.viewer).confirmAttachmentPlaceholder(c.upload_id,c),d.$28(c)},d.$36=function(a){var c,e;switch(a.error){case"size-exceeded":c=h._("The file you have selected is too large");e=h._("The file you have selected is too large. The maximum size is 25MB.");b("FBLogger")("messenger_upload_file").warn("Uploading file is too large");break;default:c=h._("File Upload Failed"),e=h._("There was a problem uploading the file.")}d.$39(c,e);d.$23(a)},d.$33=function(a,c){b("MercuryMessageActions").getForFBID(d.props.viewer).cancelAttachmentPlaceholder(c.upload_id,c),d.$27(c)},d.$38=function(a,c){b("MercuryMessageActions").getForFBID(d.props.viewer).cancelAttachmentPlaceholder(c.upload_id,c);a=h._("File Upload Failed");var e=h._("There was a problem uploading the file.");c.errorDialogParams&&(a=c.errorDialogParams.title||a,e=c.errorDialogParams.body||e);d.$39(a,e);d.$23(c)},d.$35=function(a,c){b("MercuryMessageActions").getForFBID(d.props.viewer).cancelAttachmentPlaceholder(c.upload_id,c);a=h._("Upload Failed");var e=h._("Please try again. Make sure that you are uploading a valid file.");c.errorDialogParams&&(a=c.errorDialogParams.title||a,e=c.errorDialogParams.body||e);d.$39(a,e);d.$25&&d.$25(c)},d.$37=function(a,b){d.$29&&d.$29(b)},d.$17=function(a,b){d.$21(a,b)},d.$16=function(a){d.props.onEscape&&d.props.onEscape(a)},d.$18=function(a,c){var e=d.props.threadID;e&&(d.$4=b("setImmediate")(function(){d.$4=null,b("FantaMessageActions").composerTextUpdate(e,a,c)}));d.$8()},d.$21=function(a,c){var e=d.props.threadID;a.keyCode===b("Keys").RETURN&&!a.shiftKey&&(a.preventDefault(),d.$13(c));if(a.keyCode===b("Keys").DOWN&&a.shiftKey&&d.hasEmptyInput()){b("FantaTabActions").minimizeTab(e);return}},d.$13=function(a){var b=d.$41();b==null||b.length===0?d.$42(a,[]):d.$42(a,b)},d.$15=function(a){var b=d.getInput();b&&b.insertEmoji(a)},d.$22=function(a,b,c){d.props.onSendHotLike(a.emoji,b,c,d.focusInput)},d.$24=function(){d.props.onSendMessage("",d.props.composer,d.onSend)},d.$26=function(a){d.props.onSelectSticker(a,b("emptyFunction"))},d.$29=function(a){d.$43(b("PhotosUploadWaterfall").UPLOAD_START,a),d.props.onSendPhoto(a,d.onSend),d.$44("submit",a),d.focusInput()},d.$23=function(a){d.$43(b("PhotosUploadWaterfall").CLIENT_ERROR,a),d.$44("failed",a)},d.$25=function(a){d.$43(b("PhotosUploadWaterfall").CLIENT_ERROR,a),d.$44("failed",a)},d.$27=function(a){d.$43(b("PhotosUploadWaterfall").CANCEL_DURING_UPLOAD,a),d.$44("canceled",a)},d.$28=function(a){d.$43(b("PhotosUploadWaterfall").ALL_UPLOADS_DONE,a);d.$44("completed",a);a=a.image_ids.length||a.attachments.length;d.$45(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.shouldComponentUpdate=function(a,c){return b("shallowCompare")(this,a,c)};d.componentDidMount=function(){var a=this,c=b("performanceAbsoluteNow")();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,d){b.markerPoint(d.FIRSTCHATTABOPEN_WWW,"mount_composer_container",JSON.stringify(a.state),0,c)},"ChatTabComposerContainer.react");this.props.isFocused&&!this.props.isNewEmptyLocalThread&&this.focusInput();this.state.pageID&&b("MessengerBotMenuDataFetcher").getHasPageSetting(this.state.pageID,function(b){a.setState({showStructuredMenu:b})},function(){a.setState({showStructuredMenu:!1})},b("MNCommercePageSetting").STRUCTURED_MENU_ENABLED)};d.componentDidUpdate=function(a){var b=this.props.thread;b=b?b.thread_id:null;b===this.props.threadID&&(this.props.fileUploader!==a.fileUploader&&this.$8())};d.$6=function(){return b("P2PGKValues").P2PVisible&&this.props.viewer!==b("MercuryIDs").getUserIDFromThreadID(this.props.threadID)};d.$7=function(){var a=b("getPageIDFromThreadID")(this.props.threadID);return a===null||a===void 0?!1:b("MessengerBotMenuDataFetcher").getHasPageSetting(a,function(){},function(){},b("MNCommercePageSetting").STRUCTURED_MENU_ENABLED)};d.render=function(){var a=this.props.composer,c=this.props,d=c.thread;c=c.threadID;var e=c?b("MessengerState.bs").isEmptyLocalThread(this.props.viewer,c):!1;return n?b("React").createElement(i,{composer:a,enableDisappearingIcons:m,fileUploader:this.props.fileUploader,handleSend:this.$13,handleSendClick:this.$14,inputRef:this.$9,isEmptyLocalThread:e,isFocused:this.props.isFocused,defaultText:a.text,onEmojiSelect:this.$15,onEscape:this.$16,onInputKeyDown:this.$17,onTab:this.props.onTab,onTextChange:this.$18,onUploaderMount:this.$12,pageID:this.state.pageID,participantIDs:void 0,disableInput:this.props.disableInput,showP2PButton:this.state.showP2PButton,showStructuredMenu:this.state.showStructuredMenu,thread:d,threadID:c,uploadPhotoFn:this.$10,viewer:this.props.viewer,focusInput:this.focusInput,longInput:this.state.longInput,ref:this.$11,forGameChat:this.props.forGameChat}):this.$19()?b("React").createElement(b("ChatTabBlockerComposer.react"),{onSomethingWrong:this.props.threadID?b("FantaFRXUtil").FRXClicked:null,threadID:c}):b("React").createElement(i,{defaultText:a.text,fileUploaderProps:this.$20(),handleSendClick:this.$14,isEmptyLocalThread:e,ref:"composer",composer:this.props.composer,fileUploader:this.props.fileUploader,handleSend:this.$13,inputKeyDown:this.$21,isFocused:this.props.isFocused,onCustomLikeSelect:this.$22,onEmojiSelect:this.$15,onEscape:this.props.onEscape,onFileUploadFail:this.$23,onP2PTrigger:this.$24,onPhotoUploadFail:this.$25,onStickerSelect:this.$26,onTab:this.props.onTab,onUploadCancel:this.$27,onUploadComplete:this.$28,onUploadSubmit:this.$29,thread:d,threadID:c,viewer:this.props.viewer,disableInput:this.props.disableInput,onTextChange:this.$18,p2pProps:this.$30(),pageID:this.state.pageID,participantIDs:void 0,photoUploaderProps:this.$31(),showP2PButton:this.state.showP2PButton,showStructuredMenu:this.state.showStructuredMenu,stickerButtonProps:this.$32(),forGameChat:this.props.forGameChat})};d.getInput=function(){return n?this.$2:this.refs.composer&&this.refs.composer.getInput&&this.refs.composer.getInput()};d.isUploading=function(){return this.refs.composer.isUploading()};d.$30=function(){return!this.state.showP2PButton?{}:{button:b("React").createElement("i",{className:"hidden_elem"}),className:"_6ga _6gb _6wm4 _6jtl",flyoutAlignment:j,referrer:b("MercuryShareAttachmentRenderLocations").CHAT,threadID:this.props.threadID,onTrigger:this.$24}};d.$32=function(){var a={className:"_6gb _6wm4 _6gf _6jtm",flyoutAlignment:j,threadID:this.props.threadID,onStickerSelect:this.$26};return a};d.$31=function(){var a={className:"_6gd",customUI:!0,imageClassName:"hidden_elem",linkClassName:"_6gb _6wm4 _6ge _6jtn",threadID:this.props.threadID,onLastUploadCancel:this.$33,onAllUploadsComplete:this.$34,onLastUploadFail:this.$35,onUploadError:this.$36,onSubmit:this.$37};return a};d.$20=function(){var a=this.$31();a.linkClassName="_6gb _6wm4 _6gg _6jto";a.imagesOnly=!1;a.onLastUploadFail=this.$38;return a};d.$39=function(a,c){b("SimpleXUIDialog").show(c,a)};d.$8=function(){if(!this.$5)return;var a=b("ReactDOM").findDOMNode(this.$5);if(!a)return;a=a.clientHeight;!this.state.longInput&&a>o?this.setState({longInput:!0}):this.state.longInput&&a<p&&this.setState({longInput:!1})};d.hasEmptyInput=function(){return k.test(this.$40())};d.$40=function(){var a=this.getInput();return a&&a.getValue()||""};d.$42=function(a,b){this.props.onSendMessage({message:a,mentions:b},this.props.composer,this.onSend);return};d.$41=function(){var a=this.getInput();return a&&a.getMentions?a.getMentions():null};d.$19=function(){return b("ChatTabSRXUtil").isSRXEligible(this.props.thread,this.props.threadID)&&this.props.blockedIDs&&b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(this.props.viewer,this.props.blockedIDs,this.props.thread)&&b("qex")._("883660")===!0};d.$43=function(a,c){this.$1==null&&(this.$1=b("WaterfallIDGenerator").generate()),b("PhotosUploadWaterfall").sendSignal(babelHelpers["extends"]({qn:this.$1,step:a,uploader:b("PhotosUploadWaterfall").APP_CHAT},c||{}))};d.$45=function(a){if(a===0)return;this.$43(b("PhotosUploadWaterfall").POST_PUBLISHED,{count:a});this.$1=b("WaterfallIDGenerator").generate()};d.$44=function(a,b){l.debug("photo_uploader:"+a,"{}")};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerTextWithEmoticonsReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerTextWithEmoticons.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("MessengerTextWithEmoticons.react"),{renderEmoji:b("bs_js_null_undefined").fromOption(a),renderEmoticons:b("bs_js_null_undefined").fromOption(c),text:b("bs_js_null_undefined").fromOption(d),customSize:b("bs_js_null_undefined").fromOption(e)},f)}f.make=a}),null);
__d("MercuryThreadTitleReact.bs",["fbt","bs_array","bs_block","bs_curry","React","bs_js_dict","MercuryIDs","ReasonReact.bs","bs_js_primitive","bs_js_null_undefined","MessengerParticipants.bs","MercuryParticipantListRenderer","MessengerTextWithEmoticonsReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").reducerComponent("MercuryThreadTitleReact");function i(a,b){return g._("{conversation-title} ({unread-count})",[g._param("conversation-title",a),g._param("unread-count",String(b))])}function a(a,c,d,e,f,g,j,k,l){__p&&__p();var m=f!==void 0?f:!1,n=g!==void 0?g:!1,o=j!==void 0?j:!1,p=k!==void 0?k:!1,q=function(a){__p&&__p();if(d.name===""){b("bs_curry")._1(a[3],[""]);var c=b("MercuryIDs").getParticipantIDFromUserID(e),f=d.participants.length>1?d.participants.filter(function(a){return a!==c}):d.participants;b("MessengerParticipants.bs").getMulti(f,function(c){__p&&__p();if(a[1][2][0]){var e=[];b("bs_array").iter(function(a){a=c[a];if(a!==void 0){e.push(a);return 0}else return 0},f);var g=b("bs_js_null_undefined").bind(d.custom_nickname,function(a){var c={};b("bs_array").iter(function(a){c[a[0]]=b("ReasonReact.bs").element(void 0,void 0,b("MessengerTextWithEmoticonsReact.bs").make(!0,!0,a[1],void 0,[]));return 0},b("bs_js_dict").entries(a));return c});g=new(b("MercuryParticipantListRenderer"))().setUseShortName(o).setUseAndSeparator(p).setIsNewThread(m).setNickname(g).renderParticipantList(e);g=n&&d.unread_count>0?i(g,d.unread_count):g;return b("bs_curry")._1(a[3],[g])}else return 0});return 0}else return 0},r=function(){if(c!==void 0){var a=c;a=a===0||a>=d.name.length?d.name:d.name.slice(0,a)+"..."}else a=d.name;a=b("ReasonReact.bs").element(void 0,void 0,b("MessengerTextWithEmoticonsReact.bs").make(!0,!0,a,void 0,[]));if(d.unread_count===0||!n)return a;else return i(a,d.unread_count)};return[h[0],h[1],h[2],h[3],function(a){a[1][2][0]=!0;return q(a)},function(a){a=a[1];if(a[1][0][0]!==d){a[1][0][0]=d;return q(a)}else return 0},function(a){a[1][2][0]=!1;return 0},h[7],function(c){c=d.name!==""?r(0):c[1][1];var e={};a!==void 0&&(e.className=b("bs_js_primitive").valFromOption(a));return b("React").createElement("span",e,c,l)},function(){return[[d],"",[!1]]},h[10],function(a,c){return b("bs_block").__(0,[[c[0],a[0],c[2]]])},h[12]]}f.component=h;f.renderTitleWithUnreadCount=i;f.make=a}),null);
__d("MercuryThreadTitleReact.re",["bs_curry","MercuryThreadTitleReact.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){a=b("ReasonReact.bs").wrapReasonForJs(b("MercuryThreadTitleReact.bs").component,function(a){return b("bs_curry").app(b("MercuryThreadTitleReact.bs").make,[a.className,a.maxTitle,a.thread,a.viewer,a.isNewThread,a.showUnreadCount,a.useShortName,a.useAndSeparator,a.children])});f.component=a;f["default"]=a}),null);
__d("makeMercuryThreadPayload",[],(function(a,b,c,d,e,f){"use strict";var g={admins:{},approval_mode:0,approval_queue_ids:[],associated_object:null,can_reply:!0,cannot_reply_reason:null,can_viewer_report:!1,solid_color:null,header_color:null,footer_color:null,game_id:null,gradient_colors:[],theme_id:null,custom_like_icon:null,custom_nickname:null,customization_enabled:!0,description:null,ephemeral_ttl_mode:0,folder:"inbox",has_email_participant:!1,has_montage:!1,image_src:null,is_archived:!1,is_canonical_user:!1,is_canonical:!1,is_from_weak_entry_point:!1,is_page_follow_up:!1,is_page_unresponded_thread:!1,is_pinned:!1,is_pin_protected:!1,is_subscribed:!0,is_thread_queue_enabled:!0,joinable_link:null,joinable_mode:{link:"",mode:0},last_message_id:null,last_message_timestamp:0,last_message_type:null,last_read_timestamp:0,linked_mentorship_programs:null,lightweight_event:null,lightweight_events:{},marketplace_thread_data:null,mentions_mute_mode:0,message_count:0,mute_until:null,name:"",object_association_type:null,other_user_fbid:null,page_unsubscribe_status:!1,page_thread_info:null,participant_add_mode:null,participants:[],participants_event_status:null,reactions_mute_mode:0,read_only:!1,recipients_loadable:!0,rtc_call_data:null,server_timestamp:0,snippet_attachments:[],snippet_sender:null,snippet:null,thread_connectivity_data:null,thread_fbid:null,thread_id:"",thread_pin_timestamp:null,thread_type:0,thread_unsendability_status:null,timestamp:0,unread_count:0,comm_status:null,comm_source_id:null,page_comm_item_id:null,subtitle:null,comm_item_owners:null,is_canonical_neo_user:!1,group_approval_queue:null,admin_model_status:null,groups_sync_status:null,work_associated_group:null};function a(a){a===void 0&&(a={});return babelHelpers["extends"]({},g,a)}e.exports=a}),null);
__d("MercuryThreadTitleSafe.react",["MercuryThreadTitleReact.re","React","makeMercuryThreadPayload"],(function(a,b,c,d,e,f){"use strict";var g=b("MercuryThreadTitleReact.re").component;function a(a){var c=a.thread;a=babelHelpers.objectWithoutPropertiesLoose(a,["thread"]);a=babelHelpers["extends"]({},a,{thread:b("makeMercuryThreadPayload")(c)});return b("React").createElement(g,a)}e.exports=a}),null);
__d("ChatTitleLink.react",["cx","BanzaiODS","ChatEditParticipantsUtils","Link.react","MercuryIDs","MercuryThreadTitleSafe.react","MessengerAdminGroupUtils","MessengerHoverCardLink","React","TrackingNodes","UserAgent","gkx","goURI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ChatTitleLink",propTypes:{href:a.string,isNewMessageTab:a.bool,thread:a.object,viewer:a.string},getDefaultProps:function(){return{href:null}},render:function(){var a=this;if(!this.props.thread)return null;var c=this.props,d=c.href,e=c.thread,f=c.viewer;c=babelHelpers.objectWithoutPropertiesLoose(c,["href","thread","viewer"]);var g="";b("gkx")("697231")&&e&&e.thread_id&&(g=b("MessengerHoverCardLink").constructEndpoint({id:b("MercuryIDs").getThreadFBIDFromThreadID(e.thread_id)}));return b("React").createElement(h,babelHelpers["extends"]({className:"titlebarText"+(b("UserAgent").isBrowser("Chrome")&&!b("UserAgent").isPlatform("Windows")?" fixemoji":"")+(d===null?" noLink":""),"data-ft":b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.TITLE),"data-hover":"tooltip",onClick:function(b){return a._handleClick(b)},"data-hovercard":g.toString(),href:d},c),b("React").createElement(b("MercuryThreadTitleSafe.react"),{isNewThread:this.props.isNewMessageTab,thread:e,useAndSeparator:!0,useShortName:!e.is_canonical,viewer:f}))},_handleClick:function(a){var c=this.props,d=c.href;c=c.thread;if(!d)return;c&&c.associated_object?b("goURI")(d):b("MessengerAdminGroupUtils").showParticipantsModal(c.is_canonical,this.props.isNewMessageTab,c)&&(b("BanzaiODS").bumpEntityKey("messenger_web_dead_code","joinable_thread_show_participants_modal"),b("ChatEditParticipantsUtils").showParticipantsModal(c.thread_id),a.preventDefault())}});var h=function(a){return a.href?b("React").createElement(b("Link.react"),a):b("React").createElement("span",a)};e.exports=c}),null);
__d("MercuryTypingAnimation_DEPRECATED.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:b("joinClasses")("_4a0v _1x3z",this.props.className)},b("React").createElement("div",{className:"_4b0g"},b("React").createElement("div",{className:"_5pd7"}),b("React").createElement("div",{className:"_5pd7"}),b("React").createElement("div",{className:"_5pd7"})))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("SimpleNUXMessageEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MARK_AS_SEEN:"seen",USER_IS_ELIGIBLE:"eligible"})}),null);
__d("XSimpleNUXMessagesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/nux/{msg_id}/seen/",{msg_id:{type:"Int",required:!0}})}),null);
__d("SimpleNUXMessage",["AsyncRequest","SimpleNUXMessageConfig","SimpleNUXMessageEvents","SimpleNUXMessageTypedLogger","SimpleNUXMessageTypesToShow","XSimpleNUXMessagesController"],(function(a,b,c,d,e,f){__p&&__p();var g=new Set();function h(a,c){var d=b("SimpleNUXMessageTypesToShow").mapping[a];new(b("SimpleNUXMessageTypedLogger"))().setNuxMessageType(a).setName(d).setEvent(c).setEventTimestamp(Math.floor(Date.now()/1e3)).log()}function a(a){var c=!b("SimpleNUXMessageTypesToShow").mapping[a];!c&&!g.has(a)&&(h(a,b("SimpleNUXMessageEvents").USER_IS_ELIGIBLE),g.add(a));return c}function c(a){delete b("SimpleNUXMessageTypesToShow").mapping[a];a=b("XSimpleNUXMessagesController").getURIBuilder().setInt("msg_id",a).getURI();new(b("AsyncRequest"))().setURI(a).send()}function d(){return b("SimpleNUXMessageConfig").isEnabled}e.exports={isEnabled:d,hasUserSeenMessage:a,markMessageSeenByUser:c}}),null);
__d("ChatTabHeader.react",["ix","cx","fbt","AutoFocusableLink.react","BootloadOnRender.react","ChatCloseButton.react","ChatTitleLink.react","CurrentUser","ErrorBoundary.react","EventPlanExperiment","EventReminderStateStore","Image.react","JSResource","LayerFadeOnHide","LazyComponent.react","MercuryBootloadOnInteraction.react","MercuryConfig","MercuryIDs","MercuryThreadInfo","MercuryTypingAnimation_DEPRECATED.react","MessageRequestUtils","MessagingTag","MessengerAdminGroupUtils","MessengerJoinableModeType","MessengerPresenceProvider.bs","MessengerState.bs","React","SimpleNUXMessage","TooltipData","WorkChatAvailabilityStatusLoader","XUIAmbientNUX.react","asset","getPageIDFromThreadID","gkx","immutable","isEmpty","lazyLoadComponent","requireWeak"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("React").PropTypes;var j="118809038721180",k=b("lazyLoadComponent")(b("JSResource")("MessengerReportNUX.react").__setRef("ChatTabHeader.react"));c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$1=!1;d.$4=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];d.props.onClick.apply(null,b)};d.$16=function(){return d.refs.menu};d.$17=function(){b("SimpleNUXMessage").markMessageSeenByUser(j),d.setState({eventPlanNuxSeen:!0})};d.state={eventPlanNuxSeen:b("SimpleNUXMessage").hasUserSeenMessage(j)};return d}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1=!0;b("requireWeak")("ChatVideoCallButton.react",function(b){a.$1&&a.setState({RTCComponent:b})})};d.componentWillUnmount=function(){this.$1=!1};d.render=function(){var a=this.$3(),c=this.props.isRaised;return b("React").createElement("div",{className:"_15p4 _6t9f"+(this.props.isRaised?"":" _15p5")+(c||!a?" _2pis":""),onMouseUp:this.$4,ref:"root"},b("React").createElement("div",{"aria-level":"2",className:"titlebarTextWrapper _15p6",role:"heading"},b("React").createElement("div",{className:"_61td",role:c?"presentation":"button",tabIndex:c?-1:0},a,this.$5()),this.props.isTyping&&!this.props.isRaised?b("React").createElement(b("MercuryTypingAnimation_DEPRECATED.react"),{className:"_15p8"}):null),b("React").createElement("ul",{className:"_32ca"},this.$6(),b("React").createElement("li",{className:"_32cb"},b("React").createElement(b("ChatCloseButton.react"),{active:this.props.isActive,className:"_3olu _3olv",onClick:this.props.onCloseClick}))))};d.focus=function(){this.refs.root&&this.refs.root.focus()};d.$7=function(){return this.props.thread?b("MessageRequestUtils").isMessageRequest(this.props.thread):!1};d.$8=function(){var a;if(this.props.thread===null)return null;var c=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),this.props.threadID);if(!c)return null;c=((a=c.marketplace_thread_data)==null?void 0:a.for_sale_item)||((a=c.marketplace_thread_data)==null?void 0:a.buyer_fbid)||((a=c.marketplace_thread_data)==null?void 0:a.seller_fbid);return Boolean(c)};d.$6=function(){if(!this.props.isRaised)return null;var a=[this.$9(),this.$10(),this.$11(),this.$12(),this.$13()];return a.filter(Boolean)};d.$12=function(){return this.$14({isAudio:!0})};d.$11=function(){return this.$14({isAudio:!1})};d.$14=function(a){__p&&__p();if(this.props.isEmptyChat||this.props.hasBlockedMessages||this.$7()||this.$8())return null;if(this.props.isPageChat)return null;var c=this.props,d=c.isGroupChat,e=c.onRTCNuxCloseButtonClick,f=c.rtcNuxShown,g=c.thread,h=c.threadID;c=c.viewer;if(d){if(!g||!b("MercuryThreadInfo").canReply(g))return null;if(g.joinable_mode&&g.joinable_mode.mode===b("MessengerJoinableModeType").JOINABLE)return null}d=babelHelpers["extends"]({isGroupChat:d,onRTCNuxCloseButtonClick:e,rtcCallData:g&&g.rtc_call_data,rtcNuxShown:f&&a.isAudio,threadID:h,thread:g,viewer:c},a);d.className="_3olv"+(d.isAudio?" _2fpc":"")+(d.isAudio?"":" _2fpd");e=this.state.RTCComponent;return b("React").createElement("li",{className:"_3a61"+(d.isAudio?" _461a":"")+(d.isAudio?"":" _461b"),key:"rtc"+(d.isAudio?"audio":"video")},e?b("React").createElement(e,d):b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),d),loader:b("JSResource")("ChatVideoCallButton.react").__setRef("ChatTabHeader.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:d.className,role:"button"})}))};d.$15=function(){var a=this.props.thread;return!!a&&b("MercuryThreadInfo").showComposer(a)&&!b("isEmpty")(a.participants)&&!b("MessageRequestUtils").isMessageRequest(a)&&!b("MercuryConfig").ViewerIsReadOnly&&!(b("MercuryConfig").ColdOpenBlock&&(b("MercuryThreadInfo").isColdOpen(a)||b("MercuryThreadInfo").isEmptyLocalThread(a)))&&!(this.props.isPageChat&&a.message_count===0)};d.$13=function(){__p&&__p();if(!this.$15())return null;var a=this.props,c=a.thread;a=a.isNewMessageTab;if(a||!!c&&c.folder===b("MessagingTag").PENDING)return null;a={attachmentsShelf:this.props.attachmentsShelf,hasBlockedMessages:this.props.hasBlockedMessages,isGroupChat:this.props.isGroupChat,isMultiCompany:this.props.isMultiCompany,isMuted:this.props.isMuted,isPageChat:this.props.isPageChat,membershipParticipants:this.props.membershipParticipants,participants:this.props.participants,sheetController:this.props.sheetController,thread:this.props.thread,threadID:this.props.threadID,uri:this.props.uri,viewer:this.props.viewer};a.className="_3olv _1ll-";c=i._("Options");var d=!1;if(this.props.threadID){var e=b("EventReminderStateStore").getEvent(this.props.threadID);d=e&&!e.exists&&!this.state.eventPlanNuxSeen&&b("EventPlanExperiment").shouldShowEntryPointNuxWithExposure()}return b("React").createElement("div",{key:"menu"},b("React").createElement("li",{className:"_3a61 _461_",ref:"menu"},b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),a),loader:b("JSResource")("ChatTabMenu.react").__setRef("ChatTabHeader.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:a.className,"aria-label":c,role:"button"})})),b("React").createElement(b("XUIAmbientNUX.react"),{alignment:"right",behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},contextRef:this.$16,onCloseButtonClick:this.$17,shown:d,width:"auto"},i._("Click here to start a new plan.")),this.$18())};d.$10=function(){var a=this,c=this.props,d=c.isNewMessageTab,e=c.isPageChat;c=c.thread;if(d||e||this.$7()||b("gkx")("678584")||!(c==null?void 0:c.is_subscribed))return null;d={className:"_3olv _3jyj",isFBAtWork:this.props.isWorkUser,shouldAddToApprovalQueue:b("MessengerAdminGroupUtils").shouldAddToApprovalQueue(this.props.thread,this.props.viewer),shown:!0,onClick:function(){return a.props.sheetController.openAddFriendsSheet()},thread:this.props.thread,viewer:this.props.viewer};e=i._("Add");return b("React").createElement("li",{className:"_3a61 _4620",key:"add"},b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),d),loader:b("JSResource")("ChatAddToThreadButton.react").__setRef("ChatTabHeader.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{"aria-label":e,className:d.className,role:"button"})}))};d.$9=function(){if(!this.props.isWorkUser||!this.props.isMultiCompany)return null;var a=b("React").createElement(b("AutoFocusableLink.react"),{className:"_kp6",onClick:this.props.onClick,role:"presentation"});return b("React").createElement("li",{key:"multiCompanyBadge"},b("React").createElement("div",{className:"_3olv"},b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),null,a),loader:b("JSResource")("WorkMultiCompanyChatTooltip.react").__setRef("ChatTabHeader.react"),placeholder:a})))};d.$19=function(){var a=this;return b("React").createElement(b("MessengerPresenceProvider.bs").jsComponent,{subscribeToIDs:[b("CurrentUser").getID()]},function(c){return b("React").createElement("span",{className:"_3a61"+(a.props.isRaised?"":" _3-99")},b("React").createElement("span",{className:"_3olv _2nlt"}))})};d.$20=function(){__p&&__p();if(!this.props.isDoNotDisturb)return null;if(!b("gkx")("678573"))return null;var a=this.props.threadID?b("MercuryIDs").getUserIDFromThreadID(this.props.threadID):null;if(!this.props.participants)return null;var c=this.props.participants.filter(function(b){return b.fbid===a})[0];if(!c)return null;c=b("WorkChatAvailabilityStatusLoader").isLoaded()&&a?b("WorkChatAvailabilityStatusLoader").getStoreEnforce().getDescriptionWithUserName(c.short_name,a):"";return b("React").createElement("span",{className:"_4jft"},b("React").createElement(b("Image.react"),{"data-tooltip-content":c,"data-hover":"tooltip",src:g("550341")}))};d.$5=function(){var a=this.props.thread,c=this.props.tooltip;a&&a.is_canonical&&(c="");return b("React").createElement(b("ChatTitleLink.react"),babelHelpers["extends"]({href:this.props.isRaised?this.props.href:void 0,isNewMessageTab:this.props.isNewMessageTab,thread:this.props.thread,viewer:this.props.viewer},b("TooltipData").propsFor(c,"above")))};d.$3=function(){var a=this.props,c=a.isRaised;a=a.thread;return!c&&a&&a.unread_count>0?b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:"_3-8_ _3-99",count:a.unread_count,type:"special"}),loader:b("JSResource")("XUIBadge.react").__setRef("ChatTabHeader.react"),placeholder:b("React").createElement("span",null)}):b("React").createElement(b("React").Fragment,null,this.$20(),this.$19())};d.$18=function(){var a=this;if(!this.props.showMessengerReportNux||this.props.threadID===null)return null;var c=b("getPageIDFromThreadID")(this.props.threadID);return c===null?null:b("React").createElement(b("ErrorBoundary.react"),null,b("React").createElement(b("React").Suspense,{fallback:null},b("React").createElement(k,{contextRef:function(){return a.refs.menu},pageID:c,pageUnsubscribeStatus:this.props.pageUnsubscribeStatus})))};return c}(b("React").PureComponent);c.propTypes={attachmentsShelf:a.object.isRequired,hasBlockedMessages:a.bool.isRequired,href:a.string,isActive:a.bool.isRequired,isEmptyChat:a.bool,isGroupChat:a.bool,isMuted:a.bool,isPageChat:a.bool,isRaised:a.bool,isTyping:a.bool,isWorkUser:a.bool,onClick:a.func.isRequired,onCloseClick:a.func.isRequired,onRTCNuxCloseButtonClick:a.func.isRequired,participants:a.arrayOf(a.object),rtcNuxShown:a.bool.isRequired,sheetController:a.object.isRequired,showMessengerReportNux:a.bool.isRequired,thread:a.object,threadID:a.string,tooltip:a.string,uri:a.string,viewer:a.string.isRequired};e.exports=c}),null);
__d("ChatTabHeaderContainer.react",["ChatTabHeader.react","MercuryIDs","MercuryThreadInfo","React","WorkModeConfig","getGroupNameTooltipFromParticipantIDs","getPageIDFromThreadID","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("getGroupNameTooltipFromParticipantIDs").getGroupNameTooltipFromParticipantIDs;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this,b)||this;c.state=c.calculateState(b);return c}var d=c.prototype;d.calculateState=function(a){var c=!1,d;if(a.threadID){var e;c=a.isNewMessageTab?(((e=a.thread)==null?void 0:(e=e.participants)==null?void 0:e.length)||0)>2:b("MercuryIDs").isGroupChat(a.threadID);d=b("getPageIDFromThreadID")(a.threadID)}return{isGroupChat:c,pageID:d}};d.componentDidMount=function(){this.props.onMount&&this.props.onMount(this)};d.UNSAFE_componentWillReceiveProps=function(a){this.setState(this.calculateState(a))};d.render=function(){var a=this.props.participants&&this.props.participants.toList().toArray(),c=this.props,d=c.isNewMessageTab;c=c.thread;var e;c&&(e=g(c.participants));var f=c&&c.participants&&c.participants.length===0;return b("React").createElement(b("ChatTabHeader.react"),{attachmentsShelf:this.props.attachmentsShelf,hasBlockedMessages:this.props.hasBlockedMessages,href:this.props.href,isActive:this.props.isActive,isEmptyChat:f,isGroupChat:this.state.isGroupChat,isMultiCompany:this.props.isMultiCompany,isDoNotDisturb:this.props.isDoNotDisturb,isMuted:!!c&&b("MercuryThreadInfo").isMuted(c),isNewMessageTab:this.props.isNewMessageTab,isPageChat:!!this.state.pageID,isRaised:this.props.isRaised,isTyping:this.props.isTyping,isWorkUser:!!b("WorkModeConfig").is_work_user,membershipParticipants:this.props.membershipParticipants,onClick:this.props.onClick,onCloseClick:this.props.onCloseClick,onRTCNuxCloseButtonClick:this.props.onRTCNuxCloseButtonClick,pageUnsubscribeStatus:this.props.pageUnsubscribeStatus,participants:a,ref:"header",rtcNuxShown:this.props.rtcNuxShown,sheetController:this.props.sheetController,showMessengerReportNux:this.props.showMessengerReportNux,thread:c,threadID:d&&c!=null?c.thread_id:this.props.threadID,uri:this.props.uri,tooltip:e,viewer:this.props.viewer})};d.focus=function(){this.refs.header.focus()};return c}(b("React").PureComponent);c.propTypes={attachmentsShelf:a.object.isRequired,isActive:a.bool.isRequired,isRaised:a.bool,isTyping:a.bool,onClick:a.func.isRequired,onCloseClick:a.func.isRequired,onMount:a.func,onRTCNuxCloseButtonClick:a.func.isRequired,rtcNuxShown:a.bool.isRequired,sheetController:a.object.isRequired,showMessengerReportNux:a.bool.isRequired,thread:a.object,threadID:a.string,uri:a.string,viewer:a.string.isRequired};e.exports=c}),null);
__d("FantaChatHeaderContainer.react",["requireCond","cr:823547"],(function(a,b,c,d,e,f){e.exports=b("cr:823547")}),null);
__d("MessengerHotLikePreviewEvents",["mixInEventEmitter"],(function(a,b,c,d,e,f){"use strict";a={START:"start",STOP:"stop",STOP_EMOJI:"stop_emoji",POP:"pop",REMOVE:"remove",FINISH_ANIMATION:"finish_animation",FINISH_EMOJI_ANIMATION:"finish_emoji_animation"};b("mixInEventEmitter")(a,{start:!0,stop:!0,stop_emoji:!0,pop:!0,remove:"remove",finish_animation:"finish_animation",finish_emoji_animation:"finish_emoji_animation"});e.exports=a}),null);
__d("FantaConversation.react",["Bootloader","ChatConversation.react","CurrentUser","EventProfiler","MercuryIDs","MessengerHotLikePreviewEvents","MessengerMessageArray.bs","React","StickerInterfaces","StickersTypedLogger","SubscriptionsHandler","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$4=function(a){d.props.threadID===a&&d.setState({likePreview:null})};d.$5=function(a,c){if(!a)return;new(b("StickersTypedLogger"))().setEvent("click_sticker").setPackid(a).setStickerid(c).log();b("Bootloader").loadModules(["StickersPackInTray","StickersActions","StickersStoreController"],function(c,e,f){c.onIsPackInTray(a,b("StickerInterfaces").MESSAGES,function(b){b.in_sticker_tray?(e.selectTrayPack(a),e.showStickerFlyout(d.props.threadID)):f.showStore(a)})},"FantaConversation.react")};d.state={likePreview:null};d.$1=new(b("SubscriptionsHandler"))();return d}var d=c.prototype;d.shouldComponentUpdate=function(a,c){var d=this.props,e=this.state;return!b("MessengerMessageArray.bs").equals(d.messages,a.messages)||d.threadID!==a.threadID||d.thread!==a.thread||e.likePreview!==c.likePreview};d.componentDidMount=function(){this.$2(),this.$3()};d.componentDidUpdate=function(){this.$3()};d.componentWillUnmount=function(){this.$1.release()};d.$3=function(){b("EventProfiler").informManualInteractionTimestamp(["MessageJewelListItem","ChatSideBarLink"],!0,"click")};d.$2=function(){var a=this;this.$1.addSubscriptions(b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").START,function(b,c){a.props.threadID===c&&a.setState({likePreview:b})}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP,this.$4),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP_EMOJI,this.$4),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").REMOVE,this.$4))};d.render=function(){var a=this,c=this.props.messages,d=this.props,e=d.forGameChat,f=d.onLoadMoreMessages,g=d.thread;d=d.threadID;var h=this.state.likePreview,i=b("CurrentUser").getID();h&&(c=[].concat(c,[h]));return g?b("React").createElement(b("ChatConversation.react"),{forGameChat:e,isCanonical:b("MercuryIDs").isCanonical(d),loadMoreMessages:f,maxBubbleWidth:181-this.props.scrollbarPadding,messages:c,onAttachmentLoad:function(){return a.props.onAttachmentLoad()},onMount:b("emptyFunction"),onStickerClick:this.$5,readReceipts:this.props.readReceipts,ref:"conversation",thread:g,threadID:d,viewer:i}):b("React").createElement("div",null)};d.getMessageList=function(){return this.refs.conversation&&this.refs.conversation.getMessageList()};return c}(b("React").Component);c.propTypes={forGameChat:a.bool.isRequired,onLoadMoreMessages:a.func.isRequired,scrollbarPadding:a.number,thread:a.object,threadID:a.string.isRequired};e.exports=c}),null);
__d("FantaPageGreetingLoader.react",["cx","BootloadOnRender.react","JSResource","LazyComponent.react","React","getPageIDFromThreadID"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){var c=a.thread;a=a.threadID;if(c!=null){c=((c=c)!=null?c.is_canonical_neo_user:c)||!1;if(c)return null}else return null;return b("getPageIDFromThreadID")(a)?b("React").createElement("div",{className:"_7bl4"},b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MercuryPagesGreetingContainer.react").__setRef("FantaPageGreetingLoader.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:a})})):null};e.exports=a}),null);
__d("M4ThreadFillDetect.bs",["bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return a.style}function c(a,b){a.appendChild(b);return 0}try{d=document.createElement("div");e=document.createElement("div");var g=document.createElement("div"),h=document.createElement("div"),i=document.createElement("div"),j=document.createElement("div"),k=document.createElement("div"),l=document.createElement("table");d.appendChild(e);d.appendChild(k);e.appendChild(g);k.appendChild(l);g.appendChild(h);h.appendChild(i);h.appendChild(j);d.style.position="absolute";d.style.marginLeft="-999px";d.style.contain="layout";e.style.height="200px";e.style.display="flex";e.style.visibility="hidden";e.style.flexDirection="column";e.style.position="relative";g.style.flexBasis="0px";g.style.flexGrow="1";g.style.flexShrink="0";g.style.position="relative";h.style.display="flex";h.style.flexDirection="column";h.style.minHeight="100%";i.style.flexGrow="1";j.style.height="50px";k.style.height="200px";k.style.visibility="hidden";k.style.position="relative";l.style.minHeight="100%";e=document.body;e.appendChild(d);g=i.clientHeight===150;h=l.clientHeight===200;document.body.removeChild(d);j=g?0:h?1:2}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)j=3;else throw a}k=j===2||j===1?1:0;e=k?"TABLE":"FLEX";f.getStylesheet=a;f.appendChild=c;f.measuredTechnique=j;f.technique=k;f.forJS=e}),null);
__d("FantaThread.react",["cx","M4ThreadFillDetect.bs","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("M4ThreadFillDetect.bs").forJS;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.setRef=function(a){c.$1=a,typeof c.props.scrollRef==="function"&&c.props.scrollRef(a)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props,c=a.children;a=a.spacerContent;return b("React").createElement("div",{className:"_1i6a",onClick:this.props.onClick},b("React").createElement("div",{className:"_4po3"+(h==="FLEX"?" _4poa":"")+(h==="TABLE"?" _4po4":""),ref:this.setRef},b("React").createElement("div",{className:"_4po5"},b("React").createElement("div",{className:"_4po6"},b("React").createElement("div",{className:"_4po7"},a)),b("React").createElement("div",{className:"_4po8"},b("React").createElement("div",{className:"_4po9"},c)))))};return c}(b("React").Component);e.exports=a}),null);
__d("XWorkplaceMarketingDefaultController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/workplace/{?*path}/",{path:{type:"String",defaultValue:""},ref:{type:"String"}})}),null);
__d("MercuryLastMessageIndicator.react",["cx","fbt","MercuryIDs","MercuryMessageSourceTags","MercuryViewer","MessengerParticipants.bs","MessengerReadReceipt.bs","MessengerTextWithEmoticons.react","React","TooltipData","WorkModeConfig","XWorkplaceMarketingDefaultController","emptyFunction","formatDate","gkx","immutable","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=b("immutable").Set;a=b("React").PropTypes;var j=function(a,c,d){a=b("MessengerReadReceipt.bs").getSeenTimestamp(a,d,c[0]);d=a.action*.001;return{seenTimestamp:d,seenByData:null}},k=function(a,c,d){__p&&__p();var e={};for(var f=a,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;e[i]=b("MessengerParticipants.bs").getNow(i)}i=null;c&&c.custom_nickname&&(i=c.custom_nickname);h={};g=Object.keys(e);for(var f=0;f<g.length;f++){var j=g[f],k=e[j],l;!k?l=b("MessengerParticipants.bs").getDefaultName():(l=k.short_name,i&&i[k.fbid]&&(l=i[k.fbid]));h[j]=l}var n;k=!1;j=!1;m(a,d,c)?j=!0:a.length==1?n=" "+h[a[0]]:a.length==2?n=" "+h[a[0]]+", "+h[a[1]]:a.length==3?n=" "+h[a[0]]+", "+h[a[1]]+", "+h[a[2]]:a.length>3&&(n=" "+h[a[0]]+", "+h[a[1]]+", ",k=!0);return{seenTimestamp:null,seenByData:{seenByAll:j,text:n,showTooltip:k,seenBy:a}}},l=function(a,c,d,e){e=b("MessengerReadReceipt.bs").getSeenBy(a,e,!0);if(e.length===0)return{seenTimestamp:null,seenByData:null};var f=b("MercuryIDs").getUserIDFromThreadID(d);if(f)return j(a,e,d);else return k(e,c)},m=function(a,c,d){var e=d?d.participants.length:0;a=a.length;c&&c.author!=b("MercuryViewer").getID()&&(!d||d.participants.indexOf(c.author)>-1)&&a++;return e>2&&a>=e-1};c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={seenTimestamp:null,seenByData:null},b)||babelHelpers.assertThisInitialized(c)}c.getDerivedStateFromProps=function(a,b){return l(a.readReceipts,a.thread,a.threadID,a.lastMessage)};var d=c.prototype;d.shouldComponentUpdate=function(a,b){__p&&__p();if(a.thread!==this.props.thread||a.threadID!==this.props.threadID||a.lastMessage!==this.props.lastMessage||a.isTyping!==this.props.isTyping||a.readReceipts!==this.props.readReceipts||b.seenTimestamp!==this.state.seenTimestamp)return!0;a=this.state.seenByData;b=b.seenByData;if(!a&&!b)return!1;if(!a||!b)return!0;if(a.seenByAll!==b.seenByAll||a.showTooltip!==b.showTooltip||a.text!==b.text)return!0;return!i(a.seenBy).equals(i(b.seenBy))?!0:!1};d.componentDidUpdate=function(){if(!this.isVisible())return;this.props.indicatorDidShow&&this.props.indicatorDidShow()};d.componentWillUnmount=function(){this.$1&&this.$1.release()};d.$2=function(){return!this.props.lastMessage?[]:this.props.lastMessage.source_tags||this.props.lastMessage.tags||[]};d.$3=function(){if(this.props.isTyping)return b("React").createElement("div",{className:this.$4([])},b("React").createElement("div",{className:"_510h"}),b("React").createElement("span",{className:"_510f",ref:"text"},"\xa0"));var a=this.$2(),c=this.state.seenByData,d=this.state.seenTimestamp;if(c)return b("React").createElement("div",{className:this.$4(a)},b("React").createElement("div",{className:"_510h"}),b("React").createElement("span",{className:"_510f"},this.$5(c)));else if(d)return b("React").createElement("div",{className:this.$4(a)},b("React").createElement("div",{className:"_510h"}),b("React").createElement("span",{className:"_510f",ref:"text"},this.$6(d)));else return b("React").createElement("div",{className:this.$4(a)},b("WorkModeConfig").is_work_user?b("React").createElement(b("React").Fragment,null,b("React").createElement("div",{className:"_510h"}),b("React").createElement("span",{className:"_510f",ref:"text"},this.$7(a))):null)};d.render=function(){return b("React").createElement("div",{className:"_4gd0"},this.$3())};d.$6=function(a){var c=Date.now()*.001,d;a<c-518400?d="M j":a<c-86400?d="D g:ia":d="g:ia";return h._("Seen {timestamp}",[h._param("timestamp",b("formatDate")(a,d))])};d.$7=function(a){__p&&__p();if(a.includes(b("MercuryMessageSourceTags").MESSENGER))return b("React").createElement("a",{href:"https://www.facebook.com/workplace/features/workplace-chat",className:"fcg",target:"_blank"},h._("Sent from Workplace Chat"));else if(a.includes(b("MercuryMessageSourceTags").MOBILE)){var c="/workplace/mobile";return b("React").createElement("a",{href:c,className:"fcg",target:"_blank"},h._("Sent from Mobile"))}else if(a.includes(b("MercuryMessageSourceTags").EMAIL))return b("React").createElement("span",null,h._("Sent from email"));else if(a.includes(b("MercuryMessageSourceTags").WORK_DESKTOP)){c=b("XWorkplaceMarketingDefaultController").getURIBuilder().setString("path","chat-app").setString("ref","last-message-indicator").getURI();return b("React").createElement("a",{href:c,className:"fcg",target:"_blank"},h._("Sent from the desktop app"))}return null};d.$4=function(a){var c=this.props.lastMessage&&this.props.lastMessage.author&&b("MercuryViewer").isViewer(this.props.lastMessage.author);c="_510g"+(c?" _510e":"");var d=null;this.props.isTyping?d=null:this.state.seenByData!==null||this.state.seenTimestamp!==null?d="seen":a.includes(b("MercuryMessageSourceTags").MESSENGER)||a.includes(b("MercuryMessageSourceTags").MOBILE)?d="sentFromMobile":a.includes(b("MercuryMessageSourceTags").WORK_DESKTOP)?d="sentFromDesktop":a.includes(b("MercuryMessageSourceTags").EMAIL)&&(d="sentFromEmail");return b("joinClasses")(c,d)};d.isVisible=function(){var a=this.$2();return a.includes(b("MercuryMessageSourceTags").MESSENGER)||a.includes(b("MercuryMessageSourceTags").MOBILE)||a.includes(b("MercuryMessageSourceTags").EMAIL)||a.includes(b("MercuryMessageSourceTags").WORK_DESKTOP)?!0:this.state.seenTimestamp!==null||this.state.seenByData!==null};d.$5=function(a){__p&&__p();var c=a.seenByAll;if(c)return h._("Seen by everyone");c=a.text;if(!c)return null;c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoji:!0,renderEmoticons:!0,text:c});var d=a.showTooltip;if(!d)return h._("Seen by {names}",[h._param("names",c)]);else{d=this.$8(a);return h._("Seen by {names}{=num more link}",[h._param("names",c),h._param("=num more link",d)])}};d.$8=function(a){if(!a.text||!a.showTooltip)return null;var c={},d=0,e=null;b("MessengerParticipants.bs").getMulti(a.seenBy,function(b){e=a.seenBy.map(function(a){return b[a].name}).join("\r\n"),d=Object.keys(b).length-2});c=Object.assign({"data-tooltip-alignh":"center"},b("TooltipData").propsFor(e,"above"));var f=h._({"*":"{num} more"},[h._param("num",d,[0])]);return b("React").createElement("span",babelHelpers["extends"]({className:"more"},c),f)};return c}(b("React").Component);c.propTypes={indicatorDidShow:a.func,lastMessage:a.object,readReceipts:a.any,threadID:a.string.isRequired,isTyping:a.bool.isRequired};c.defaultProps={indicatorDidShow:b("emptyFunction")};e.exports=c}),null);
__d("MessengerQuickCamOrigins",[],(function(a,b,c,d,e,f){"use strict";var g={CHAT_TAB:"chat tab",MESSENGER:"messenger",getValues:function(){return[g.CHAT_TAB,g.MESSENGER]}};e.exports=g}),null);
__d("MessengerQuickReplyUtils",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={localizeTitleIfNecessary:function(a){return a.map(function(a){return a.content_type==="location"?Object.assign(a,{title:g._("Send Location")}):a})}};e.exports=a}),null);
__d("MessengerViewerContactMethodsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1868889766468115"};b.getQueryID=function(){return"177554543035925"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MercuryQuickReply.react",["cx","BootloadedComponent.react","JSResource","MercuryIDs","MessengerQuickCamOrigins","MessengerQuickReplyUtils","MessengerViewerContactMethodsWebGraphQLQuery","React","WebGraphQL","XUISpinner.react","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={viewerEmail:null,viewerPhone:null},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$1(this.props.lastMessage)!==null&&this.props.quickReplyDidShow()};d.componentDidUpdate=function(a){this.$1(this.props.lastMessage)!==null&&this.$1(a.lastMessage)===null&&this.props.quickReplyDidShow(),this.$2(this.props.lastMessage)};d.render=function(){__p&&__p();var a=this,c=this.props.lastMessage,d=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer);if(!c||c.author===d)return null;d=this.$1(c);if(Array.isArray(d)){var e=d.every(function(b){return b.content_type==="user_email"&&a.state.viewerEmail===null||b.content_type==="user_phone_number"&&a.state.viewerPhone===null});if(!e){e=b("MessengerQuickReplyUtils").localizeTitleIfNecessary(d);return b("React").createElement("div",{className:"_419m"},b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerBotsQuickReplyButtonList.react").__setRef("MercuryQuickReply.react"),bootloadPlaceholder:b("React").createElement(b("XUISpinner.react"),{className:"_5h-9"}),isSponsored:c.is_sponsored,messageId:c.message_id,options:e,pageId:b("MercuryIDs").getUserIDFromParticipantID(c.author),threadID:c.thread_id,quickCamOriginLocation:this.props.quickCamOriginLocation,viewer:this.props.viewer,viewerEmail:this.state.viewerEmail,viewerPhone:this.state.viewerPhone}))}}return null};d.$1=function(a){a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);return Array.isArray(a&&a.quick_replies)?a&&a.quick_replies:null};d.$2=function(a){__p&&__p();var c=this;a=this.$1(a);if(!a||a.length===0)return;a.some(function(a){return a.content_type==="user_email"||a.content_type==="user_phone_number"})&&b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerViewerContactMethodsWebGraphQLQuery"))({})),function(a){var b;b=(b=a)!=null?(b=b.viewer)!=null?(b=b.user)!=null?b.all_phones:b:b:b;a=(a=a)!=null?(a=a.viewer)!=null?a.all_emails:a:a;var d=b?b.find(function(a){return a.is_preferred}):null;!d&&b&&(d=b[0]);b=a?a.find(function(a){return a.is_primary}):null;c.setState({viewerEmail:(a=b)!=null?a.display_email:a,viewerPhone:(b=d)!=null?(b=b.phone_number)!=null?b.universal_number:b:b})})};return c}(b("React").PureComponent);c.propTypes={quickReplyDidShow:a.func.isRequired,lastMessage:a.object,quickCamOriginLocation:a.oneOf(b("MessengerQuickCamOrigins").getValues()).isRequired,threadID:a.string.isRequired,viewer:a.string.isRequired};e.exports=c}),null);
__d("MessengerTabsThreadSearchLoader",["Promise","Bootloader","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={_store:null,_actions:null,_promise:null,getStoreEnforce:function(){b("nullthrows")(this._store,"Tab thread search store is not loaded");return this._store},getActionsEnforce:function(){b("nullthrows")(this._actions,"Tab thread search actions are not loaded");return this._actions},isLoaded:function(){return this._store&&this._actions},load:function(){var a=this;this._promise||(this._promise=new(b("Promise"))(function(c){b("Bootloader").loadModules(["MessengerThreadSearchActions","MessengerTabsThreadSearchStore"],function(b,d){a._store=d.get(),a._actions=b,c({store:d,actions:b})},"MessengerTabsThreadSearchLoader")}));return this._promise}};e.exports=a}),null);
__d("WorkBotLandingPageHelper",["MessagingGenericAdminTextType","MessengerMessageArray.bs","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("immutable").List;function a(a){__p&&__p();var c;if(b("MessengerMessageArray.bs").size(a)===0)return!0;if(b("MessengerMessageArray.bs").size(a)>1)return!1;a=b("MessengerMessageArray.bs").last(a);c=(c=a)!=null?(c=c.log_message_data)!=null?c.message_type:c:c;if(c===b("MessagingGenericAdminTextType").WORK_BOT_INSTALLED){a=(c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.show_landing_page:c:c:c;return a===!0}return!1}function c(a){__p&&__p();var c;if(a.size===0)return!0;if(a.size>1)return!1;a=a.last();c=(c=a)!=null?(c=c.log_message_data)!=null?c.message_type:c:c;if(c===b("MessagingGenericAdminTextType").WORK_BOT_INSTALLED){a=(c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.show_landing_page:c:c:c;return a===!0}return!1}e.exports={shouldShowBotLandingPage:c,shouldShowBotLandingPageArray:a}}),null);
__d("FantaConversationScroller.react",["ix","csx","cx","fbt","Animation","Arbiter","BootloadedComponent.react","Bootloader","BootloadOnRender.react","ChatTypingIndicatorsWrapper.bs","CurrentUser","ErrorBoundary.react","Event","FantaConversation.react","FantaPageGreetingLoader.react","FantaTabActions","FantaThread.react","Image.react","JSResource","LazyComponent.react","Link.react","MercuryAttachment","MercuryConfig","MercuryIDs","MercuryLastMessageIndicator.react","MercuryQuickReply.react","MercuryShareAttachmentRenderLocations","MessengerHotLikePreviewEvents","MessengerMessageArray.bs","MessengerParticipants.bs","MessengerQuickCamOrigins","MessengerTabsThreadSearchLoader","MessengerVideoAutoplayActions","MessengerVideoAutoplayStore","Parent","QE2Logger","React","ReactDOM","Scroll","ScrollBoundaryContain","Style","SubscriptionsHandler","TimeSlice","WebMessengerConstants","WorkBotLandingPageHelper","XUIButton.react","XUISpinner.react","asset","clearImmediate","emptyFunction","getElementPosition","getPageIDFromThreadID","gkx","immutable","isEventSupported","joinClasses","performanceAbsoluteNow","promiseDone","setImmediate","shallowEqual","throttle"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("ChatTypingIndicatorsWrapper.bs").jsComponent,l=b("WorkBotLandingPageHelper").shouldShowBotLandingPageArray;a=b("React").PropTypes;var m=15,n=null,o=20,p=1e3;function q(a){__p&&__p();if(n===null){var c=a.firstElementChild;if(c){b("Style").set(a,"overflow","scroll");var d=c.clientWidth;b("Style").set(a,"overflow","hidden");c=c.clientWidth;n=Math.max(c-d,0);b("Style").set(a,"overflow","")}else n=0}return n}c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$9=[];d.state={loadingMessages:!d.props.isEmptyLocalThread,scrollbarPadding:n===null?m:n,hideLastMessageIndicator:!1,searchResults:null};d.$20=function(a){a=b("ReactDOM").findDOMNode(d.refs.scrollContainer);a&&(d.$21(),d.$22()&&!d.$23()&&!d.$3&&!d.props.hasFetchedAll&&!(d.state.searchResults&&d.state.searchResults.mid)&&(d.setState({loadingMessages:!0}),d.props.onLoadMoreMessages()),d.$24(),d.$10())};d.$16=function(){__p&&__p();if(!d.refs||d.state.loadingMessages||!d.props.thread){d.$9=[];return}var a=b("ReactDOM").findDOMNode(d.refs.scrollContainer),c=b("getPageIDFromThreadID")(d.props.threadID);if(!a||!c){d.$9=[];return}var e=10,f,g;try{f=a.getBoundingClientRect(),g=d.refs.conversation?d.refs.conversation.getMessageList():null}catch(a){return}if(!g||!f)return;var h=[];d.$8.forEach(function(a){if(!g)return;var i=a.message_id,j=g.getMessageElement(i);if(j){j=j.getBoundingClientRect();j.top>f.top-e&&j.bottom<f.bottom+e&&(h.push(i),d.$9.includes(i)||b("Bootloader").loadModules(["MessengerAdsWebLogger","MNAdsLoggerEventEnum"],function(b,d){b.log(a.ad_client_token,a.ad_id,d.MESSAGE_SEEN_THREAD,!0,i,c)},"FantaConversationScroller.react"))}},babelHelpers.assertThisInitialized(d));d.$9=h};d.$26=function(){d.$1=null,b("FantaTabActions").scrollBottomChanged(d.props.threadID,d.$6,d.$27)};d.$27=function(){d.$28(!1),d.$18()};d.$29=function(){var a=b("performanceAbsoluteNow")();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,c){return b.markerEnd(c.FIRSTCHATTABOPEN_WWW,"SUCCESS",0,a)},"FantaConversationScroller.react")};d.$32=function(a){a=b("Parent").byClass(a.target,"._1dlq");a||d.props.onFocus&&d.props.onFocus()};d.$6=!0;return d}var d=c.prototype;d.shouldComponentUpdate=function(a,c){var d=this.props,e=this.state;return d.hasFetchedAll!==a.hasFetchedAll||d.isFocused!==a.isFocused||!b("MessengerMessageArray.bs").equals(d.messages,a.messages)||d.showContextBanner!==a.showContextBanner||d.readReceipts!==a.readReceipts||d.thread!==a.thread||d.threadID!==a.threadID||e.loadingMessages!==c.loadingMessages||e.hideLastMessageIndicator!==c.hideLastMessageIndicator||!b("shallowEqual")(e.searchResults,c.searchResults)||d.jumpToMessage!==a.jumpToMessage};d.componentDidMount=function(){__p&&__p();var a=this,c=b("performanceAbsoluteNow")();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(d,e){d.markerPoint(e.FIRSTCHATTABOPEN_WWW,"mount_conversation_scroller",JSON.stringify({messageSize:b("MessengerMessageArray.bs").size(a.props.messages),hasThread:!!a.props.thread}),0,c)},"FantaConversationScroller.react");this.$7=new(b("SubscriptionsHandler"))();this.$11();this.$12();this.$13();b("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$14());this.setState({scrollbarPadding:q(this.refs.scrollContainer),searchResults:this.$15()});this.$10=b("throttle")(this.$16,p);this.$8=this.props.messages.filter(function(a){return a.is_sponsored});this.$10();this.$17()};d.componentDidUpdate=function(a){__p&&__p();this.$13();if(this.$3){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(c){var d=this.$3||0;c=c.scrollHeight-d;this.scrollToPosition(c,!1)}this.$3=null}if(!b("MessengerMessageArray.bs").equals(a.messages,this.props.messages)){b("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$14());d=b("MessengerMessageArray.bs").last(a.messages);c=b("MessengerMessageArray.bs").last(this.props.messages);if(d!==c&&c&&c.author){a=b("MercuryIDs").getUserIDFromParticipantID(c.author);a===b("CurrentUser").getID()&&(this.scrollToBottom(!1),this.$18())}}this.$19();this.$10()};d.componentWillUnmount=function(){this.$1&&b("clearImmediate")(this.$1),this.$7.release(),b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().updateThreadState(this.props.threadID,null)};d.UNSAFE_componentWillReceiveProps=function(a){__p&&__p();var c=this.state.loadingMessages&&b("MessengerMessageArray.bs").size(a.messages)>0&&!b("MessengerMessageArray.bs").equals(a.messages,this.props.messages);if(c||a.hasFetchedAll||a.showContextBanner){this.setState({loadingMessages:!1});c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(c){var d=c.scrollHeight;c=b("Scroll").getTop(c);this.$3=d-c}}this.$8=a.messages.filter(function(a){return a.is_sponsored})};d.$15=function(){return b("MessengerTabsThreadSearchLoader").isLoaded()?b("MessengerTabsThreadSearchLoader").getStoreEnforce().getThreadState(this.props.threadID):null};d.$17=function(){var a=this;(b("gkx")("678588")||b("MercuryConfig").M3CRE)&&b("promiseDone")(b("MessengerTabsThreadSearchLoader").load(),function(b){var c=b.store;b.actions;a.$7.addSubscriptions(c.get().addListener("change",function(){return a.setState({searchResults:a.$15(),loadingMessages:!1})}))})};d.$13=function(a){var c=this;a===void 0&&(a=!1);this.$6&&b("TimeSlice").guard(function(){c.scrollToBottom(a)},"post load chat animations",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};d.renderGroupWave=function(){var a=this.props.thread;return b("MercuryIDs").isLocalThread(this.props.threadID)&&b("gkx")("678589")&&a&&!a.associated_object&&!a.is_canonical&&!a.thread_fbid?b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement(b("XUISpinner.react"),{background:"light",className:"loading",size:"small"}),bootloadLoader:b("JSResource")("ChatWaveImage.react").__setRef("FantaConversationScroller.react"),thread:a,m4Thread:!0}):null};d.maybeRenderNullStateWave=function(){__p&&__p();var a=this.props,c=a.thread;a=a.threadID;if(!c||!c.is_canonical||c.timestamp)return null;b("QE2Logger").logExposureForUser("wave_in_www_null_state");if(!b("MercuryConfig").MNWNS)return null;c=b("MercuryIDs").getParticipantIDFromFromThreadID(a);c=c?b("MessengerParticipants.bs").getNow(c):null;c=c?c.short_name:null;return b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("MessengerNewWavePrompt.react").__setRef("FantaConversationScroller.react"),threadID:a,recipientName:c,entrypoint:"canonical_null_state"})};d.$24=function(){__p&&__p();var a=this.props.threadID,c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(!c)return;var d;try{c=c.getBoundingClientRect(),d=this.refs.conversation?this.refs.conversation.getMessageList():null}catch(a){return}if(!d||!c)return;var e=[],f=b("MessengerVideoAutoplayStore").getMessageIDs(a),g=f||this.$14()||b("immutable").List();g.map(function(a){var c=b("MercuryAttachment").getVideoElem(a,d);c&&e.push([a,c.getBoundingClientRect()])});e.length&&b("MessengerVideoAutoplayActions").onScroll(a,f?null:g,b("immutable").Map(e),c)};d.$14=function(){var a=this.props.messages.filter(function(a){return b("MercuryAttachment").isSingleVideoAttachment(a)||b("MercuryAttachment").isSharedVideoAttachmentMessage(a)}).reverse().map(function(a){return a.message_id});return b("immutable").List(a)};d.$25=function(a,c){__p&&__p();var d=this.refs.conversation?this.refs.conversation.getMessageList():null;if(!d)return;var e=b("ReactDOM").findDOMNode(this.refs.scrollContainer),f=b("ReactDOM").findDOMNode(this.refs.conversation);d=d.getMessageComponent(a);a=b("ReactDOM").findDOMNode(d);if(!a||!f||!e)return;f=f.getBoundingClientRect().top;a=a.getBoundingClientRect().top;a=Math.abs(a-f)-e.getBoundingClientRect().height/2;this.$6=!1;this.scrollToPosition(Math.max(a,0),!1);b("CurrentUser").isWorkUser()&&d.highlightMessage();var g=c;g&&b("setImmediate")(function(){return g()})};d.scrollToBottom=function(a){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);c&&this.scrollToPosition(c.scrollHeight,a)};d.scrollToPosition=function(a,c){var d=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(!d)return;this.$5&&this.$5.stop();c?this.$5=new(b("Animation"))(d).to("scrollTop",a).ease(b("Animation").ease.end).duration(400).go():b("Scroll").setTop(d,a)};d.$23=function(a){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(!c)return!1;a=a===0?0:a||o;return b("Scroll").getTop(c)+c.clientHeight>=c.scrollHeight-a};d.$22=function(){var a=b("ReactDOM").findDOMNode(this.refs.scrollContainer);return!a?!1:b("Scroll").getTop(a)<a.clientHeight};d.$18=function(){var a=this.$6;this.$23()?this.$6=!0:this.$6=!1;a!==this.$6&&(this.$1=b("setImmediate")(this.$26))};d.$11=function(){__p&&__p();var a=this,c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(!c)return;var d=b("isEventSupported")("mousewheel")?"mousewheel":b("isEventSupported")("wheel")?"wheel":"DOMMouseScroll",e=function(){a.$18()},f=function(){c.addEventListener(d,e,{passive:!0})},g=function(){c.removeEventListener(d,e,{passive:!0})};this.$7.addSubscriptions(b("Arbiter").subscribe("overflow-applied-to-body",function(){return a.$13()}),b("Event").listen(c,"mousedown",e),b("Event").listen(c,"mouseup",e),b("Event").listen(c,"mouseenter",f),b("Event").listen(c,"mouseleave",g),{cancel:g},b("Event").listen(c,"scroll",b("throttle")(this.$20,50)));f=b("ScrollBoundaryContain").applyToElem(c);f&&this.$7.addSubscriptions(f)};d.$12=function(){var a=this;this.$7.addSubscriptions(b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").START,function(b,c){a.props.threadID===c&&(a.$28(!1),window.clearInterval(a.$4),a.$4=window.setInterval(function(){a.$28(!1)},50))}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_ANIMATION,function(b){window.clearInterval(a.$4)}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_EMOJI_ANIMATION,function(b){window.clearInterval(a.$4)}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").REMOVE,function(b){a.props.threadID===b&&window.clearInterval(a.$4)}))};d.$30=function(){return b("CurrentUser").isWorkUser()?l(this.props.messages):b("MessengerMessageArray.bs").size(this.props.messages)===0};d.$31=function(){return b("CurrentUser").isWorkUser()?l(this.props.messages):!1};d.render=function(){__p&&__p();var a=this,c=this.props,d=c.forGameChat,e=c.hasFetchedAll,f=c.isEmptyLocalThread,g=c.messages,h=c.showContextBanner,i=c.thread;c=c.threadID;var l=b("CurrentUser").getID();f=f||e||h;e=this.state.loadingMessages||!i?b("React").createElement("div",{className:"_1xdl"},b("React").createElement(b("XUISpinner.react"),{background:"light",className:"loading",size:"small"})):null;e||(this.$29(),this.$29=b("emptyFunction"));h=function(){return a.$13()};var m=this.$30()?b("React").createElement(b("FantaPageGreetingLoader.react"),{thread:i,threadID:c}):null;f=f?b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("MessengerContextBannerContainer.react").__setRef("FantaConversationScroller.react"),isContinuation:!1,location:b("MercuryShareAttachmentRenderLocations").CHAT,viewer:l,thread:i,threadID:c}):null;var n=b("React").createElement("div",{className:b("joinClasses")("accessible_elem","_2kwv")},j._("Chat conversation start")),o=b("React").createElement("div",{className:b("joinClasses")("accessible_elem","_2kwv")},j._("Chat conversation end")),p=null,q=this.state.searchResults;if(q&&q.messages){var r=j._("Load more...");p=b("React").createElement(b("React").Fragment,null,q.upExhausted?null:b("React").createElement("div",{className:"_7fim"},b("React").createElement(b("XUIButton.react"),{className:"_41jf",label:r,onClick:function(){return b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().getMoreSearchContext(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP,a.props.threadID)},type:"primary",use:"default"})),b("React").createElement(b("FantaConversation.react"),{forGameChat:d,onAttachmentLoad:h,scrollbarPadding:this.state.scrollbarPadding,ref:"conversation",messages:q.messages,onLoadMoreMessages:b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().getMoreSearchContext,hasFetchedAll:this.props.hasFetchedAll,isFocused:this.props.isFocused,onFocus:this.props.onFocus,readReceipts:this.props.readReceipts,showContextBanner:this.props.showContextBanner,thread:this.props.thread,threadID:this.props.threadID}),q.downExhausted?null:b("React").createElement("div",{className:"_7fim"},b("React").createElement(b("XUIButton.react"),{className:"_41jf",label:r,onClick:function(){return b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().getMoreSearchContext(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_DOWN,a.props.threadID)},type:"primary",use:"default"})),b("React").createElement(k,{threadID:c,indicatorClass:void 0,indicatorsWillShow:b("emptyFunction"),indicatorsDidShow:function(){return a.setState({hideLastMessageIndicator:!0},function(){a.$13(!0)})},indicatorsDidHide:function(){return a.setState({hideLastMessageIndicator:!1})},rootClassName:void 0,viewer:l}))}else p=b("React").createElement(b("React").Fragment,null,b("React").createElement(b("FantaConversation.react"),babelHelpers["extends"]({forGameChat:d,onAttachmentLoad:h,scrollbarPadding:this.state.scrollbarPadding,ref:"conversation"},this.props)),b("React").createElement(b("MercuryQuickReply.react"),{lastMessage:b("MessengerMessageArray.bs").size(g)>0?b("MessengerMessageArray.bs").last(g):void 0,threadID:c,quickReplyDidShow:function(){return a.$13(!0)},viewer:l,quickCamOriginLocation:b("MessengerQuickCamOrigins").CHAT_TAB}),b("React").createElement(k,{threadID:c,indicatorClass:void 0,indicatorsWillShow:b("emptyFunction"),indicatorsDidShow:function(){return a.setState({hideLastMessageIndicator:!0},function(){a.$13(!0)})},indicatorsDidHide:function(){return a.setState({hideLastMessageIndicator:!1})},rootClassName:void 0,viewer:l}),this.renderGroupWave(),this.maybeRenderNullStateWave(),b("React").createElement(b("MercuryLastMessageIndicator.react"),{isTyping:this.state.hideLastMessageIndicator,indicatorDidShow:function(){a.$13(!0)},indicatorWillShow:b("emptyFunction"),lastMessage:b("MessengerMessageArray.bs").size(g)>0?b("MessengerMessageArray.bs").last(g):null,readReceipts:this.props.readReceipts,thread:i,threadID:c}));b("React").createElement("div",{className:"_1xdm"+(e?" _1xdw":"")},b("React").createElement("div",{className:"_1xdx"},b("React").createElement("div",{className:"_1xe8"})),n,f,e,b("React").createElement("div",{style:b("MessengerMessageArray.bs").size(g)>0?{height:"176px"}:e?{height:"168px"}:{height:"192px"},className:"_1xdm"},this.$31()?null:p,b("gkx")("678591")&&b("React").createElement(b("ErrorBoundary.react"),{project:"omnim"},b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("OmniMSuggestionsContainer.react").__setRef("FantaConversationScroller.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:this.props.threadID,trackBottom:function(){return a.$13(!0)}})}))),o);return b("React").createElement(b("FantaThread.react"),{onClick:this.$32,spacerContent:b("React").createElement(b("React").Fragment,null,n,f,m,e),scrollRef:function(b){a.refs.scrollContainer=b}},p,b("gkx")("678591")&&b("React").createElement(b("ErrorBoundary.react"),{project:"omnim"},b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("OmniMSuggestionsContainer.react").__setRef("FantaConversationScroller.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:this.props.threadID,trackBottom:function(){return a.$13(!0)}})})),o,this.$33())};d.$33=function(){var a=this;return this.state.searchResults&&this.state.searchResults.messages?b("React").createElement(b("Link.react"),{className:"_2llh",onClick:function(){b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().updateThreadState(a.props.threadID,null),a.$6=!0}},b("React").createElement(b("Image.react"),{className:"_2llt",src:g("415098")})):null};d.$19=function(){var a=this,c=this.props.jumpToMessage;if(!c)return;this.props.messages.some(function(a){return a.message_id===c})||this.state.searchResults&&this.state.searchResults.messages&&this.state.searchResults.messages.some(function(a){return a.message_id===c})?this.$25(c,function(){return b("FantaTabActions").wipeJumpToMessage(a.props.threadID)}):b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().updateThreadState(this.props.threadID,c)};d.$21=function(){var a=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(!a)return;var c=b("getElementPosition")(a);b("Arbiter").inform("chatScrolled/"+this.props.threadID,{scrollTop:b("Scroll").getTop(a),top:c.y,viewHeight:c.height})};d.$28=function(a){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);c&&this.$34(c.scrollHeight,a)};d.$34=function(a,c){var d=b("ReactDOM").findDOMNode(this.refs.scrollContainer);this.$5&&this.$5.stop();if(!d)return;c===!0?this.$5=new(b("Animation"))(d).to("scrollTop",a).ease(b("Animation").ease.end).duration(400).go():b("Scroll").setTop(d,a)};return c}(b("React").Component);c.propTypes={forGameChat:a.bool.isRequired,hasFetchedAll:a.bool.isRequired,isEmptyLocalThread:a.bool.isRequired,isFocused:a.bool.isRequired,onFocus:a.func,onLoadMoreMessages:a.func.isRequired,showContextBanner:a.bool,thread:a.object,threadID:a.string.isRequired,jumpToMessage:a.string};e.exports=c}),null);
__d("FantaDragAndDrop.react",["Bootloader","JSResource","MercuryShareAttachmentRenderLocations","MessengerEnvironment","React","emptyFunction","ifRequired","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=960;a=b("React").PropTypes;var h=b("lazyLoadComponent")(b("JSResource")("MercurySharePreview.react").__setRef("FantaDragAndDrop.react"));c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$2=function(a){var b=c.props.composer;c.$5(function(c){c.removeSharePreview(a,b)})},c.$3=function(a,b){var d=c.props.composer;c.$5(function(c){c.loadedShareData(a,b,d)})},c.$4=function(a){var b=c.props.composer;c.$5(function(c){c.loadingShareData(a,b)})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){b("MessengerEnvironment").messengerui?b("Bootloader").loadModules(["MessengerActions"],b("emptyFunction"),"FantaDragAndDrop.react"):b("Bootloader").loadModules(["FantaMessageActions"],b("emptyFunction"),"FantaDragAndDrop.react")};d.shouldComponentUpdate=function(a){var b=this.props,c=b.composer,d=a.composer;c=c.sharePreview;d=d.sharePreview;return b.threadID!==a.threadID||!!(!c&&d)||!!(c&&d&&!c.equals(d))};d.render=function(){var a=this.props,c=a.composer;a=a.threadID;c=c.sharePreview;var d=c.share;c=c.uri;return b("React").createElement("div",{className:"fbNubFlyoutAttachments"},b("React").createElement("div",{className:"chatAttachmentShelf"},d||c?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(h,{onClose:this.$2,onLoaded:this.$3,onLoading:this.$4,threadID:a,imageSize:{width:g,height:g},location:b("MercuryShareAttachmentRenderLocations").CHAT_PREVIEW,share:d,uri:c})):null))};d.$5=function(a){b("MessengerEnvironment").messengerui?b("ifRequired")("MessengerActions",function(b){a(b)},function(){b("Bootloader").loadModules(["MessengerActions"],function(b){a(b)},"FantaDragAndDrop.react")}):b("ifRequired")("FantaMessageActions",function(b){a(b)},function(){b("Bootloader").loadModules(["FantaMessageActions"],function(b){a(b)},"FantaDragAndDrop.react")})};return c}(b("React").Component);c.propTypes={composer:a.object.isRequired,threadID:a.string.isRequired};e.exports=c}),null);
__d("FantaMercuryTabOverflowBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("gkx")("697231")?b("JSResource")("FantaM4TabOverflow.react").__setRef("FantaMercuryTabOverflowBootloader.react"):b("JSResource")("FantaMercuryTabOverflow.react").__setRef("FantaMercuryTabOverflowBootloader.react");return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{items:this.props.items,tabContents:this.props.tabContents}),loader:a,placeholder:b("React").createElement("div",null)})};return c}(b("React").Component);e.exports=a}),null);
__d("FantaTab.react",["cx","EventProfiler","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=!1,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){b("EventProfiler").informManualInteractionTimestamp(["MessageJewelListItem","ChatSideBarLink"],!0,"click")};d.render=function(){var a=this.props,c=a.isFocused,d=a.isLastTab,e=a.isLastTabOfType,f=a.MainComponent,g=a.messengerState,h=a.MinimizedComponent,i=a.nonMinimizedRaisedTabCount,j=a.tab,k=a.tabContent,l=a.messages,m=a.forGameChat;a=a.hasFetchedAll;h=j.isMinimized?h:f;f=j.id+(j.isMinimized?"-minimized":"-maximized");var n=this.$1&&!j.isMinimized;this.$1=j.isMinimized;return b("React").createElement("div",{className:"_5qi9 _5qib"+(this.props.isFocused?" _5qic":"")+(j.isMinimized?" _3001":"")},b("React").createElement(h,{isFocused:c,isHovered:j.isHovered||n,isLastTab:d,isLastTabOfType:e,key:f,messengerState:g,nonMinimizedRaisedTabCount:i,tab:j,tabContent:k,messages:l,forGameChat:m,hasFetchedAll:a}))};return c}(b("React").Component);e.exports=a}),null);
__d("FantaTabGroup.react",["cx","CurrentUser","FantaTab.react","MessengerState.bs","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a){return!this.props.tabGroup.equals(a.tabGroup)||this.props.messengerState!==a.messengerState||!!(!this.props.tabContents&&a.tabContents)||!!(this.props.tabContents&&a.tabContents&&!this.props.tabContents.equals(a.tabContents))};d.render=function(){__p&&__p();var a=this.props,c=a.isLastOfTypeChecker,d=a.MainComponent,e=a.messengerState,f=a.MinimizedComponent,g=a.OverflowComponent,h=a.tabContents;a=a.tabGroup;var i=a.focusedTabID,j=a.getRaisedandUnraisedTabs(),k=j.raisedTabs;j=j.unraisedTabs;var l;c&&(l=k.findLastKey(function(a){return c(a)&&a.id}));a=a.allowedRaisedTabs===0?null:this.$1(j,g);var m=k.filter(function(a){return!a.isMinimized}).count();return b("React").createElement("div",{className:"_59v1"},a,k.map(function(a){var c=h&&h.get(a.id),g=c&&c.threadPreviewID||a.id;return b("React").createElement(b("FantaTab.react"),{forGameChat:!1,isFocused:a.id===i,isLastTab:a===k.last(),isLastTabOfType:a.id===l,key:a.id,messengerState:e,MainComponent:d,MinimizedComponent:f,nonMinimizedRaisedTabCount:m,tab:a,tabContent:c,messages:b("MessengerState.bs").getCurrentlyLoadedMessages(b("CurrentUser").getID(),g),hasFetchedAll:b("MessengerState.bs").hasLoadedAllMessages(b("CurrentUser").getID(),g)})}).toArray())};d.$1=function(a,c){return!a.isEmpty()?b("React").createElement("div",{className:"_1kws"},b("React").createElement(c,{items:a,tabContents:this.props.tabContents})):null};return c}(b("React").Component);c.propTypes={MainComponent:a.func.isRequired,messengerState:a.array,MinimizedComponent:a.func.isRequired,OverflowComponent:a.func.isRequired,tabContents:a.object,tabGroup:a.object.isRequired};e.exports=c}),null);
__d("FantaPendingActions.react",["Bootloader","BootloadOnRender.react","FantaTabActions","JSResource","LazyComponent.react","MercuryThreadActions","MessengerMessageRequestsTypedLogger","MessageRequestUtils","MessagingTag","React","MercuryIDs","CurrentUser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreadActions").get();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$3=function(){var a=d.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);var c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.threadID,c);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(c).setEntryPoint(null).log()},d.$4=function(a){var c=d.props.thread;c=!!c&&b("MessageRequestUtils").isFiltered(c);var e=b("CurrentUser").getID();e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.threadID,e);a==="hide"&&new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID)).setSurface("thread").setFolderType(c?"other":"pending").setThreadKey(e).setEntryPoint("inbox_banner").log()},d.$1=function(){__p&&__p();var a=d.props,c=a.thread,e=a.threadID;a=!!c&&b("MessageRequestUtils").isFiltered(c);var f=b("CurrentUser").getID();f=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.threadID,f);if(a)b("Bootloader").loadModules(["WebMessengerDeleteThreadDialog"],function(a){a.show(e,d.$3,d.$4,function(){return b("FantaTabActions").closeTab(e)})},"FantaPendingActions.react");else{var g=b("MercuryIDs").isGroupChat(e);b("Bootloader").loadModules(["WebMessengerDeclineMRDialog"],function(a){a.show(c.folder,e,function(){return b("FantaTabActions").closeTab(e)},g)},"FantaPendingActions.react")}new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(f).setEntryPoint(null).log()},d.$2=function(){var a=d.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);var c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.threadID,c);g.changeFolder(d.props.threadID,b("MessagingTag").INBOX);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_accept_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(c).setEntryPoint(null).log()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);return b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("ChatPendingActions.react").__setRef("FantaPendingActions.react"),placeholder:b("React").createElement("div",{style:{height:27}}),component:b("React").createElement(b("LazyComponent.react"),{isFiltered:a,onDeleteClick:this.$1,onReplyClick:this.$2})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FantaTabComposer.react",["ChatTabComposerContainer.react","MessengerState.bs","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$2=function(a){c.$1=a},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this.props.participants;this.props.isFocused&&a.length>0&&!this.props.isEmptyLocalThread&&this.focusInput()};d.componentDidUpdate=function(a){this.props.isFocused&&this.props.isFocused!==a.isFocused&&!this.props.isEmptyLocalThread&&this.focusInput()};d.shouldComponentUpdate=function(a){var b=this.props;return!b.composer.equals(a.composer)||b.disableInput!==a.disableInput||!b.fileUploader&&!!a.fileUploader||b.fileUploader&&!b.fileUploader.equals(a.fileUploader)||b.isEmptyLocalThread!==a.isEmptyLocalThread||b.isFocused!==a.isFocused||b.isNewEmptyLocalThread!==a.isNewEmptyLocalThread||b.threadID!==a.threadID||b.viewer!==a.viewer||b.forGameChat!==a.forGameChat||b.participants.length!==a.participants.length};d.render=function(){var a=this,c=this.props,d=c.participants,e=c.threadID,f=c.viewer,g=c.isFocused;return d.length===0?b("React").createElement("div",null):b("React").createElement(b("MessengerState.bs").jsComponent,{fbid:f},function(c){return b("React").createElement(b("ChatTabComposerContainer.react"),{blockedIDs:a.props.blockedIDs,composer:a.props.composer,disableInput:a.props.disableInput,fileUploader:a.props.fileUploader,isFocused:g,onEscape:a.props.onEscape,onSelectSticker:a.props.onSelectSticker,onSendHotLike:a.props.onSendHotLike,onSendPhoto:a.props.onSendPhoto,onTab:a.props.onTab,onSendMessage:a.props.onSendMessage,isNewEmptyLocalThread:a.props.isNewEmptyLocalThread,ref:a.$2,thread:b("MessengerState.bs").threads(c)[e],threadID:e,viewer:f,forGameChat:a.props.forGameChat})})};d.focusInput=function(){this.$1&&this.$1.focusInput()};d.hasEmptyInput=function(){var a=this.$1;return!a?!1:a.hasEmptyInput()};return c}(b("React").Component);e.exports=a}),null);
__d("FantaTabSheetPlaceholder.react",["cx","React","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return b("React").createElement("div",{className:"_w_z"},b("React").createElement(b("XUISpinner.react"),null))};e.exports=a}),null);
__d("FantaTabSheet.react",["cx","BootloadedComponent.react","FantaTabSheetPlaceholder.react","JSResource","LazyComponent.react","MercuryIDs","MercurySheetPolicy","MessengerParticipants.bs","React","ReasonBootloadOnRender.react","ReasonResource","emptyFunction","lazyLoadComponent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("lazyLoadComponent")(b("JSResource")("ChatGroupsSyncTabSheet.react").__setRef("FantaTabSheet.react")),i=b("lazyLoadComponent")(b("JSResource")("ChatGroupNameComposerTabSheet.react").__setRef("FantaTabSheet.react")),j=b("lazyLoadComponent")(b("JSResource")("ChatIntegrityLandingScreenSheet.react").__setRef("FantaTabSheet.react"));a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a){var b=this.props;return b.threadID!==a.threadID||!b.tabContent.equals(a.tabContent)};d.maybeRenderMontage=function(){var a=this.props,c=a.threadID;a=a.tabContent;return a.isMontageOpen?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatMontageSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:"Montage",threadID:c,onResize:b("emptyFunction")}):null};d.render=function(){__p&&__p();var a=this.props,c=a.threadID,d=a.tabContent,e=a.composerComponent,f=a.pageUser;a=a.isGroupChat;var g=d.loggingID,k=d.openSheet,l=d.privacyController,m=d.thread,n=d.typeahead,o,p;switch(k){case b("MercurySheetPolicy").sheets.ChatThreadIsMutedTabSheet:o=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetChatThreadIsMuted.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:k,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatNameConversationTabSheet:o=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetNameConversation.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement(b("FantaTabSheetPlaceholder.react"),null),key:k,thread:m,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatUserBlockedTabSheet:p=b("MercuryIDs").getUserIDFromThreadID(c);if(p){var q=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(p));q&&l&&(o=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUserBlockedTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),gender:q.gender,key:k,privacyActionController:l,shortName:q.short_name}))}break;case b("MercurySheetPolicy").sheets.ChatOfflineTabSheet:o=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetOffline.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:k,privacyController:l,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatReadOnlyTabSheet:case b("MercurySheetPolicy").sheets.ChatReadOnlyPermanentTabSheet:o=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetReadOnly.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:k,threadID:c});break;case b("MercurySheetPolicy").sheets.FantaAddFriendsSheet:o=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetAddFriends.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement(b("FantaTabSheetPlaceholder.react"),null),key:k,loggingID:g,thread:m,threadID:c,typeahead:n,composerComponent:e,tabContent:d});break;case b("MercurySheetPolicy").sheets.FantaAddMoreFriendsSheet:o=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetAddMoreFriends.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement(b("FantaTabSheetPlaceholder.react"),null),key:k,loggingID:g,thread:m,threadID:c,typeahead:n});break;case b("MercurySheetPolicy").sheets.ChatThreadIsMessageBlockedSheet:p=b("MercuryIDs").getUserIDFromThreadID(c);if(p){q=b("MercuryIDs").getParticipantIDFromUserID(p);l=b("MessengerParticipants.bs").getNow(q);l&&(o=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetMessageBlocked.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),isGroupChat:a,key:k,pageUser:f,participants:d.participants,shortName:l.short_name,threadID:c}))}break;case b("MercurySheetPolicy").sheets.ChatUserFocusSheet:o=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUserFocusSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:k,thread:m,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatUserFocusBypassSheet:o=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUserFocusBypassSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:k});break;case b("MercurySheetPolicy").sheets.ChatUploadWarningTabSheet:o=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUploadWarningTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:k});break;case b("MercurySheetPolicy").sheets.ChatNoRecipientsTabSheet:b("MercuryIDs").isCanonical(c)||(o=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatNoRecipientsTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:k}));break;case b("MercurySheetPolicy").sheets.ChatNewMessagesTabSheet:o=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaNewMessagesTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:k,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatEmployeeAwaySheet:o=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatEmployeeAwaySheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:k});break;case b("MercurySheetPolicy").sheets.ChatEventReminderTabSheet:o=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaEventReminderTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:k,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatJoinCallSheet:if(m){g=m.rtc_call_data;n=m.thread_fbid;o=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatJoinCallSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:k,rtcCallData:g,threadFBID:n})}break;case b("MercurySheetPolicy").sheets.ChatRoomAssociatedObjectSheet:if(m){p=m.associated_object;o=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatRoomAssociatedObjectSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:k,associatedObject:p})}break;case b("MercurySheetPolicy").sheets.ChatMentorshipProgramSheet:m&&(o=b("React").createElement(b("ReasonBootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{thread:m}),loader:b("ReasonResource")(b("JSResource")("MentorshipProgramSheet.bs").__setRef("FantaTabSheet.react")),placeholder:b("React").createElement("div",null)}));break;case b("MercurySheetPolicy").sheets.ChatGroupsSyncTabSheet:m&&m.work_associated_group&&(o=b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null),key:k},b("React").createElement(h,{group:m.work_associated_group,imageURL:m.image_src,name:m.name})));break;case b("MercurySheetPolicy").sheets.ChatGroupNameComposerTabSheet:o=b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null),key:k},b("React").createElement(i,{threadID:c,composerComponent:e}));break;case b("MercurySheetPolicy").sheets.ChatIntegrityLandingScreenSheet:f&&(o=b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null),key:k},b("React").createElement(j,{pageUser:f,threadID:c})));break}q=this.maybeRenderMontage();if(o)return b("React").createElement("div",{className:"_1sk5"},b("React").createElement("div",{className:"_1sk6"},o));else if(q)return q;return null};return c}(b("React").Component);c.propTypes={threadID:a.string.isRequired,tabContent:a.object.isRequired};e.exports=c}),null);
__d("FantaTabMain.react",["cssVar","cx","fbt","invariant","Bootloader","ChatBehavior","ChatConfig","ChatTabBlinking","CurrentUser","DragDropTarget","Event","FantaChatHeaderContainer.react","FantaConversationScroller.react","FantaDispatcher","FantaDragAndDrop.react","FantaMessageActions","FantaPendingActions.react","FantaTabActions","FantaTabComposer.react","FantaTabSheet.react","FantaWebDriverIDs","FBIDCheck","JSResource","Keys","MercuryIDs","MercurySheetPolicy","MessageRequestUtils","MessagingTagConstants","MessengerBotMenuDataFetcher","MessengerColors","MessengerCustomColorUtils.bs","MessengerMessageArray.bs","MessengerParticipants.bs","MessengerParticipantUtils.bs","MessengerPresenceProvider.bs","MessengerState.bs","MNCommercePageSetting","Parent","React","ReactDOM","ShortProfiles","SimpleXUIDialog","TrackingNodes","WorkBotLandingPageHelper","WorkChatAvailabilityStatusLoader","WorkFileUploadsGating","XUISpinner.react","clearTimeout","convertMIGColorToFIGColor","getPageIDFromThreadID","getVendorPrefixedEventName","gkx","immutable","joinClasses","lazyLoadComponent","performanceAbsoluteNow","promiseDone","setTimeout","throttle"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("MessengerPresenceProvider.bs").jsComponent,l=b("WorkBotLandingPageHelper").shouldShowBotLandingPageArray,m=b("lazyLoadComponent")(b("JSResource")("MarketplaceMessengerContextBanner.react").__setRef("FantaTabMain.react")),n=b("lazyLoadComponent")(b("JSResource")("ChatJoinableInterstitialPreview.react").__setRef("FantaTabMain.react")),o=b("lazyLoadComponent")(b("JSResource")("P2PChatThreadBannerContainer.react").__setRef("FantaTabMain.react")),p=b("lazyLoadComponent")(b("JSResource")("MessengerGameBotPlayButton.react").__setRef("FantaTabMain.react")),q=b("lazyLoadComponent")(b("JSResource")("FantaPageComposerNullState.react").__setRef("FantaTabMain.react")),r=/\D+/g,s=b("gkx")("697231");a=b("React").PropTypes;var t=function(a){a=b("MercuryIDs").getUserIDFromThreadID(a.tab.id);return a&&b("gkx")("678573")&&b("WorkChatAvailabilityStatusLoader").isLoaded()?b("WorkChatAvailabilityStatusLoader").getStoreEnforce().getIsDoNotDisturb(a):!1};c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$11=null,d.state={closing:!1,disableInput:!1,isDoNotDisturb:t(d.props)},d.$25=function(a){__p&&__p();var c=!!b("Parent").byClass(a.target,"fantaTabMain-"+d.props.tab.id);a=!!b("Parent").byClass(a.relatedTarget,"fantaTabMain-"+d.props.tab.id);if(!c||!a){if(d.$10){b("clearTimeout")(d.$10);d.$10=null;return}b("FantaTabActions").hoveredTab(d.props.tab.id)}},d.$26=function(a){var c=!!b("Parent").byClass(a.target,"fantaTabMain-"+d.props.tab.id);a=!!b("Parent").byClass(a.relatedTarget,"fantaTabMain-"+d.props.tab.id);(!c||!a)&&(d.$10&&b("clearTimeout")(d.$10),d.$10=b("setTimeout")(function(){d.$10=null,b("FantaTabActions").unhoveredTab(d.props.tab.id)},500))},d.$24=function(a){var c=!!b("Parent").byClass(a.target,"fantaTabMain-"+d.props.tab.id),e=!!b("Parent").byClass(a.relatedTarget,"fantaTabMain-"+d.props.tab.id);(!c||!e)&&(!a.relatedTarget||!a.target?d.$8=b("setTimeout")(function(){d.$8=null,d.$27(d.props.tab.id)},100):d.$27(d.props.tab.id))},d.$23=function(a){if(d.$8){b("clearTimeout")(d.$8);d.$8=null;return}var c=!!b("Parent").byClass(a.target,"fantaTabMain-"+d.props.tab.id),e=!!b("Parent").byClass(a.relatedTarget,"fantaTabMain-"+d.props.tab.id);a=a.target;a&&a.classList&&(a.classList.contains("_3olu")||a.classList.contains("_61td")||a.classList.contains("_7jbw")||a.classList.contains("_4zs3"))||(!c||!e)&&(b("FantaDispatcher").isDispatching()||b("FantaTabActions").focusTab(d.props.tab.id))},d.$29=function(a){b("FantaMessageActions").linkPreview(d.props.tab.id,a)},d.$28=function(a){var c=d.props.tabContent;c=c||{};c=c.composer;var e=d.props.tab.id;c&&b("FantaMessageActions").prepareFilesForSend(e,a,c)},d.$19=function(a){a.keyCode===b("Keys").ESC&&(d.$2(!0),a.preventDefault(),a.stopPropagation())},d.$20=function(a){a.keyCode===b("Keys").TAB&&d.$21(a)},d.$21=function(a){var b=d.props.nonMinimizedRaisedTabCount;b>1&&(a.preventDefault(),d.$3(a.ctrlKey,a.shiftKey))},d.$2=function(a){var c=d.props,e=c.tab;c=c.tabContent;!c||c&&c.composer.text.length===0&&!d.$30()?(d.$31(),a?b("FantaTabActions").closeAndTabNext(e.id):b("FantaTabActions").closeTab(e.id)):d.$32();d.$33()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.$2=b("throttle")(this.$2,100),this.$3=b("throttle")(this.$3,100)};d.componentDidMount=function(){var a=this,c=b("performanceAbsoluteNow")();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(d,e){d.markerPoint(e.FIRSTCHATTABOPEN_WWW,"mount_fanta_main",JSON.stringify({messageSize:a.props.messages?b("MessengerMessageArray.bs").size(a.props.messages):0,hasThread:!!a.props.thread}),0,c)},"FantaTabMain.react");this.$12();this.$13();this.$14(this.props.tab.id);this.$15();this.$16();this.$17()};d.componentDidUpdate=function(a){this.$13();if(b("gkx")("678573")&&b("WorkChatAvailabilityStatusLoader").isLoaded()&&a.thread!==this.props.thread){var c=b("MercuryIDs").getUserIDFromThreadID(this.props.tab.id);a=b("MercuryIDs").getUserIDFromThreadID(a.tab.id);var d=b("WorkChatAvailabilityStatusLoader").getActionsEnforce();a&&d.unsubscribeUser(a,this);c&&(d.subscribeUser(c,this),b("WorkChatAvailabilityStatusLoader").getStoreEnforce().fetchUsers([c]))}};d.componentWillUnmount=function(){this.$4&&this.$4.disable();this.$11&&this.$11.remove();var a=b("MercuryIDs").getUserIDFromThreadID(this.props.tab.id);a&&b("WorkChatAvailabilityStatusLoader").isLoaded()&&b("WorkChatAvailabilityStatusLoader").getActionsEnforce().unsubscribeUser(a,this)};d.shouldComponentUpdate=function(a,b){var c=this.props,d=this.state;return c.hasFetchedAll!==a.hasFetchedAll||c.isFocused!==a.isFocused||c.isHovered!==a.isHovered||c.isLastGroupTab!==a.isLastGroupTab||!c.tab.equals(a.tab)||!c.tabContent&&!!a.tabContent||c.tabContent&&!c.tabContent.equals(a.tabContent)||c.thread!==a.thread||c.fbid!==a.fbid||c.blockedIDs!==a.blockedIDs||c.readReceipts!==a.readReceipts||c.ignoredIds!==a.ignoredIds||d.closing!==b.closing||d.disableInput!==b.disableInput||d.isDoNotDisturb!==b.isDoNotDisturb};d.$13=function(){__p&&__p();var a=this;if(b("gkx")("697231"))return;var c=this.props,d=c.tab;c=c.thread;d=d.id;if(!c)return;var e=this.$7&&b("ReactDOM").findDOMNode(this.$7);if(!e)return;c=c.unread_count;if(c!==void 0){c=!!c&&(!b("ChatBehavior").showsTabUnreadUI||b("ChatBehavior").showsTabUnreadUI());c?b("ChatTabBlinking").blinkTab(d,{getTabElem:function(){return e},isFocused:function(){return a.props.isFocused},isHovered:function(){return!1}}):b("ChatTabBlinking").unblinkTab(d)}};d.$18=function(){var a=this.props.tabContent&&this.props.tabContent.nullStateCTA;if(!a)return!1;if(this.props.thread&&this.props.thread.message_count===0)return!0;return b("CurrentUser").isWorkUser()?l(this.props.messages):!1};d.render=function(){__p&&__p();var a=this,c=this.props,d=c.blockedIDs,e=c.forGameChat,f=c.hasFetchedAll,g=c.isFocused,h=c.isHovered,l=c.isLastGroupTab,r=c.messages,t=c.onLoadMoreMessages,u=c.onSelectSticker,v=c.onSendHotLike,w=c.onSendMessage,x=c.onSendPhoto,y=c.readReceipts,z=c.showContextBanner,A=c.tab,B=c.tabContent,C=c.thread,D=A.id,E=b("CurrentUser").getID();c=B&&B.composer.fileUploader;A=C&&b("convertMIGColorToFIGColor")(C.header_color);var F=B&&B.nullStateCTA,G=this.$18(),H=C&&C.participants||[],I=B&&B.threadPreviewRecipients||b("immutable").List();H=H.length>0?H:I.toArray();I=(I=this.props)!=null?(I=I.thread)!=null?I.other_user_fbid:I:I;I=I?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(I)):null;var J=b("getPageIDFromThreadID")(this.props.tab.id),K=b("MessengerState.bs").isEmptyLocalThread(E,D),L=b("MessengerState.bs").isNewEmptyLocalThread(E,D);G=C&&b("MessageRequestUtils").shouldShowComposerPendingActions(C)?b("React").createElement(b("FantaPendingActions.react"),{thread:C,threadID:D}):G&&F?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",{className:"_2xh0"},b("React").createElement("div",{className:"_2xh4 _59w_"},b("React").createElement(b("XUISpinner.react"),{size:"small"})))},b("React").createElement(q,{threadID:D,nullStateCTA:F,pageName:I&&I.short_name})):B?b("React").createElement("div",{className:"fbNubFlyoutFooter"+(this.state.disableInput?" fbNubFlyoutComposerDisabled":""),"data-testid":b("FantaWebDriverIDs").COMPOSER_ROOT},b("React").createElement(b("FantaTabComposer.react"),{blockedIDs:d,composer:B.composer,disableInput:this.state.disableInput,fileUploader:c,forGameChat:e,isEmptyLocalThread:K,isFocused:g,isNewEmptyLocalThread:L,onEscape:this.$19,onKeyDown:this.$19,onKeyPress:this.$20,onSelectSticker:u,onSendHotLike:v,onSendMessage:w,onSendPhoto:x,onTab:this.$21,participants:H,ref:"composer",threadID:D,viewer:E})):null;var M;F=b("MercuryIDs").getUserIDFromThreadID(D);F&&(M=b("ShortProfiles").getNow(F));var N=M&&M.is_messenger_only;!B&&j(0,6156);I=this.$22();c=!1;if(D){c=B.isNewMessageTab?((C==null?void 0:(L=C.participants)==null?void 0:L.length)||0)>2:b("MercuryIDs").isGroupChat(D)}var O;u=b("React").createElement(b("FantaTabSheet.react"),{tabContent:B,threadID:D,composerComponent:this.refs.composer,pageUser:I,isGroupChat:c});I&&B.openSheet===b("MercurySheetPolicy").sheets.ChatIntegrityLandingScreenSheet&&(O=b("React").createElement("div",{className:"fbNubFlyoutFooter"},u,G));w=(v=C)!=null?v.marketplace_thread_data:v;H=(x=w)!=null?x.for_sale_item:x;c=(L=w)!=null?L.buyer_fbid:L;v=(I=w)!=null?I.seller_fbid:I;var P;H&&c&&v&&(P=b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(m,{buyerID:c,forSaleItem:H,renderLocation:"chat",sellerID:v})));x=C&&b("ChatConfig").getBool("chat_tab_has_gradients")?b("MessengerColors").makeLinearGradient(C.gradient_colors,C.solid_color,b("MessengerCustomColorUtils.bs").defaultColor()):void 0;L=B&&B.isMultiCompany;w=!!B&&!!B.openSheet;var Q=B&&B.joinableInterstitialData?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(n,{data:B.joinableInterstitialData,isActive:g,onClose:this.$2})):b("React").createElement("div",{className:(w?"_6vu4":"")+(s?" _6vu5":"")+(b("gkx")("697231")?" _6z9d":"")+" fbNubFlyoutInner _6vu1"},b("React").createElement(b("FantaChatHeaderContainer.react"),{blockedIDs:d,composer:B.composer,customColor:A,highlightNewMessage:B&&B.highlightNewMessage,isDoNotDisturb:this.state.isDoNotDisturb,isFocused:g,isLastGroupTab:l,isMultiCompany:L,isNewMessageTab:B&&B.isNewMessageTab,membershipParticipants:B.membershipParticipants,onClose:this.$2,pageIndicatorDescription:B.pageIndicatorDescription,participants:B.participants,thread:C,threadHref:B&&B.threadHref,threadID:D,uri:B.uri,viewer:E,focusOnClick:this.$23}),b("React").createElement("div",{className:"_1ia _2sz2",ref:function(b){a.$5=b},style:x},O?b("React").createElement("div",null):u,b("React").createElement(b("FantaConversationScroller.react"),{forGameChat:e,hasFetchedAll:f,isFocused:g,isEmptyLocalThread:K,messages:r,onFocus:function(){return a.refs.composer&&a.refs.composer.focusInput()},onLoadMoreMessages:t,readReceipts:y,showContextBanner:z,thread:C,threadID:D,viewer:E,jumpToMessage:B.jumpToMessage}),b("React").createElement("div",{className:"_2hc2"},b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},F?b("React").createElement(o,{isVisible:!0,otherUserID:F,threadID:D}):b("React").createElement(o,{isVisible:!0,threadID:D}))),b("React").createElement("div",{className:"_4g6x"},b("React").createElement("div",{className:"_4g6y"},b("React").createElement("div",{className:"_4g6z _4g71"},i._("Drag Link\/Files Here")),b("React").createElement("div",{className:"_4g6z _4g6- _4g6_"},i._("Drop Files Here")),b("React").createElement("div",{className:"_4g6z _4g6- _4g70"},i._("Drop Link Here")))),O?O:J?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(p,{originalElement:G,pageID:J,playLinkClassName:"_2xh6 _2h_r",showGameImage:!0,threadFBID:(I=this.props)!=null?(I=I.thread)!=null?I.thread_fbid:I:I,threadID:D})):G,b("React").createElement(b("FantaDragAndDrop.react"),{composer:B.composer,threadID:D}),P));return b("React").createElement(k,{subscribeToIDs:[E]},function(c){return b("React").createElement("div",{className:b("joinClasses")((a.state.closing?"_2suj":"")+" _3_9e _s0f _50mz _50m_"+(C&&!N&&b("MessengerParticipantUtils.bs").findIntersection(E,c,C).length>0&&!a.state.isDoNotDisturb?" _4-0b":"")+(a.state.isDoNotDisturb?" _1oh2":"")+" fbNub _50-v"+(g?" focusedTab":"")+(h?" hoveredTab":"")+" opened _27_3","fantaTabMain-"+D),"data-ft":b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.CHAT_FLYOUT),onBlur:a.$24,onFocus:a.$23,onKeyDown:a.$19,onKeyPress:a.$20,onMouseEnter:a.$25,onMouseLeave:a.$26,ref:function(b){return a.$7=b}},b("React").createElement("div",{className:"fbNubFlyout fbDockChatTabFlyout uiContextualLayerParent",role:"complementary"},b("React").createElement("div",{className:"fbNubFlyoutOuter"},Q)))})};d.$16=function(){var a=this,c=b("MercuryIDs").getUserIDFromThreadID(this.props.tab.id);c&&b("gkx")("678573")&&b("promiseDone")(b("WorkChatAvailabilityStatusLoader").load(),function(b){var d=b.store;b._;a.$11=d.addListener(function(){a.setState({isDoNotDisturb:d.getIsDoNotDisturb(c)})})})};d.$27=function(a){b("FantaDispatcher").isDispatching()||b("FantaTabActions").blurTab(this.props.tab.id),this.$10&&(b("clearTimeout")(this.$10),this.$10=null),b("setTimeout")(function(){b("FantaTabActions").unhoveredTab(a)})};d.$17=function(){var a=this,c=b("getPageIDFromThreadID")(this.props.tab.id);c&&b("MessengerBotMenuDataFetcher").getHasPageSetting(c,function(b){a.setState({disableInput:b})},function(){a.setState({disableInput:!1})},b("MNCommercePageSetting").COMPOSER_INPUT_DISABLED)};d.$12=function(){__p&&__p();if(b("WorkFileUploadsGating").canUploadFiles&&!this.$4){var a=b("ReactDOM").findDOMNode(this.$5);if(a){a=new(b("DragDropTarget"))(a);this.$4=a;a.setOnFilesDropCallback(this.$28);a.setOnURLDropCallback(this.$29);a.enable()}}};d.$3=function(a,c){a||(c?b("FantaTabActions").focusPreviousTab():b("FantaTabActions").focusNextTab())};d.$31=function(){var a=this.props.tab.id;b("Bootloader").loadModules(["MessengerShareFilePreviewFunnelLogger"],function(b){return b.endFunnel(a)},"FantaTabMain.react")};d.$30=function(){return this.$34()||this.$35()};d.$34=function(){var a,b=this.props.tabContent;a=((a=b)!=null?(a=a.composer)!=null?(a=a.fileUploader)!=null?a.uploadedFiles:a:a:a)||{size:0};b=((b=b)!=null?(b=b.composer)!=null?(b=b.fileUploader)!=null?b.uploadingFiles:b:b:b)||{size:0};return a.size>0||b.size>0};d.$35=function(){var a=this.props.tabContent;a=(a=a)!=null?(a=a.composer)!=null?a.sharePreview:a:a;return!!(a&&a.params&&a.type)};d.$22=function(){var a=this.props,c=a.tab;a=a.tabContent;a=a==null?void 0:a.participants;a&&(a=a.toList().toArray());var d=b("getPageIDFromThreadID")(c.id);return!d||!a||!((c=a)==null?void 0:c.length)?null:a.find(function(a){return a.fbid===d})};d.$36=function(a){var c=this,d=this.props.tab,e=b("ReactDOM").findDOMNode(this.$7);this.$1=b("setTimeout")(function(){return a?b("FantaTabActions").closeAndTabNext(d.id):b("FantaTabActions").closeTab(d.id)},1.2*Number("200ms".replace(r,"")));if(e)var f=b("Event").listen(e,b("getVendorPrefixedEventName")("animationend"),function(e){e.animationName==="closeChatTab"&&(a?b("FantaTabActions").closeAndTabNext(d.id):b("FantaTabActions").closeTab(d.id),b("clearTimeout")(c.$1),f.remove())});this.$33();this.setState({closing:!0})};d.$32=function(a){var c=this,d=this.props.tab,e=d.id;b("FantaTabActions").blurTab(e);d=i._("Are you sure you want to close this chat window?");var f=i._("You haven't sent your message.");b("SimpleXUIDialog").showConfirm(d,f,function(d){d?(c.$31(),a?b("FantaTabActions").closeAndTabNext(e):b("FantaTabActions").closeTab(e)):b("FantaTabActions").focusTab(e)},{autofocusConfirm:!0,useReactFocusBehavior:!0})};d.$15=function(){this.$9=Math.floor(Date.now()/1e3)};d.$33=function(){var a=this.props,c=a.thread,d=a.tab,e=c?c.other_user_fbid:null,f=Math.floor(Date.now()/1e3),g=this.$9;c&&e&&!b("FBIDCheck").isUser_deprecated(e)&&b("Bootloader").loadModules(["PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","PagesEventObserver","PagesEventType"],function(a,b,h,i,j){a.log(e,b.CLICK,h.MESSAGE_FANTA_TAB_CLOSE,"",["pages_surface_team"],{open_tab_timestamp:g,close_tab_timestamp:f,last_message_timestamp:c.last_message_timestamp,message_count:c.message_count,snippet_sender:c.snippet_sender,participants:c.participants,entrypoint:d.entryPoint}),i.notify(j.MESSAGES_FANTA_TAB_CLOSE,e,{open_tab_timestamp:g,close_tab_timestamp:f,last_message_timestamp:c.last_message_timestamp,message_count:c.message_count,snippet_sender:c.snippet_sender,participants:c.participants,entrypoint:d.entryPoint})},"FantaTabMain.react")};d.$14=function(a){__p&&__p();var c=this;if(!b("MercuryIDs").isValidThreadID(a))return;b("Bootloader").loadModules(["GroupChatMessageBlockAlert","GroupChatMessageIgnoreAlert","MercuryIgnoredBlockedParticipants.bs","MercuryThreadActions"],function(d,e,f,g){__p&&__p();var h=g.get();b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),a,function(g){var i=c.props,j=i.fbid,k=i.ignoredIds;b("MessengerState.bs").compute(j,function(c){c=c.blocked_ids;f.isPresentInGroupThread(j,c,g)?d.show(f.participantsInGroupThread(j,c,g),function(){b("FantaTabActions").focusTab(a)},function(){b("FantaTabActions").closeTab(a),b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),a)||h.leaveGroup(a)}):b("MessengerParticipantUtils.bs").areParticipantsInGroupThread(j,k,g)&&g.folder==="inbox"&&e.show(b("MessengerParticipantUtils.bs").participantsInGroupThread(j,k,g),b("MercuryIDs").getThreadFBIDFromThreadID(a),function(){b("FantaTabActions").focusTab(a)},function(){b("FantaTabActions").closeTab(a),b("Bootloader").loadModules(["IgnoreMessagesTypedLogger","IgnoreMessagesLoggingEvent","IgnoreMessagesPlatforms"],function(c,d,e){h.changeFolder(a,b("MessagingTagConstants").other),new c().setEvent(d.IGNORE_CONFIRMED).setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a)).setPlatform(e.CHAT_TABS).log()},"FantaTabMain.react")})})})},"FantaTabMain.react")};return c}(b("React").Component);c.propTypes={hasFetchedAll:a.bool.isRequired,isFocused:a.bool.isRequired,isHovered:a.bool.isRequired,isLastGroupTab:a.bool.isRequired,onLoadMoreMessages:a.func.isRequired,onSelectSticker:a.func.isRequired,onSendHotLike:a.func.isRequired,onSendMessage:a.func.isRequired,onSendPhoto:a.func.isRequired,nonMinimizedRaisedTabCount:a.number,showContextBanner:a.bool,tab:a.object.isRequired,tabContent:a.object,thread:a.object,forGameChat:a.bool.isRequired};e.exports=c}),null);
__d("FantaTabMainLoader.react",["Bootloader","CurrentUser","FantaAppStore","FantaGetMessageActions","FantaMessageActions","FantaTabMain.react","MercuryThreadActions","MessageRequestUtils","MessagingTag","MessengerMessageArray.bs","MessengerState.bs","React","TimeSlice","emptyFunction","requestIdleCallback","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;function g(a){return!!a.preview_attachments[0].preview_url}var h=function(a){__p&&__p();b("FantaAppStore").addReducers(a);a=b("FantaAppStore").getState();a=(a=a)!=null?(a=a.mercury)!=null?a.tabContents:a:a;if(a){var c=a.reduce(function(a,b){b=b.thread;b&&a.push(b);return a},[]);b("setImmediate")(function(){return b("FantaGetMessageActions").threadsUpdated(c)})}h=b("emptyFunction")};c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){var a=d.props.tab;b("MessengerState.bs").fetchMoreMessages(b("CurrentUser").getID(),a.id,0,b("MessengerMessageArray.bs").size(d.props.messages)+10,b("emptyFunction"))},d.$2=function(a,c){var e=d.props.tab;b("FantaMessageActions").sendSticker(e.id,a,c)},d.$3=function(a,c,e,f){var g=d.props.tab;b("FantaMessageActions").sendHotLike(g.id,a,c,e,f)},d.$4=function(a,c,e){var f=d.props.tabContent.thread,g=d.props.tab;f&&b("MessageRequestUtils").isMessageRequest(f)&&b("MercuryThreadActions").get().changeFolder(f.thread_id,b("MessagingTag").INBOX);b("FantaMessageActions").sendMessage(g.id,a,c,e)},d.$5=function(a,c){var e=d.props.tab;g(a)?b("FantaMessageActions").sendGif(e.id,a,c):b("FantaMessageActions").sendPhoto(e.id,a,c)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.shouldComponentUpdate=function(a){var b=this.props;return b.isFocused!==a.isFocused||b.isHovered!==a.isHovered||b.isLastTabOfType!==a.isLastTabOfType||b.messengerState!==a.messengerState||!b.tab.equals(a.tab)||!b.tabContent.equals(a.tabContent)};d.componentDidMount=function(){var a=function(){b("Bootloader").loadModules(["FantaReducersTabSheets"],h,"FantaTabMainLoader.react")};b("TimeSlice").guard(function(){b("requestIdleCallback")(a)},"additional request not needed for initial display",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};d.render=function(){var a=this.props,c=a.isFocused,d=a.isHovered,e=a.isLastTabOfType,f=a.messengerState,g=a.nonMinimizedRaisedTabCount,h=a.tab,i=a.tabContent,j=a.forGameChat,k=a.messages;a=a.hasFetchedAll;var l=i.showContextBanner,m=i.thread,n=i.threadPreviewID;n=n?h.id+"-"+n:h.id;return!i?b("React").createElement("div",{key:"noContent-"+n}):b("React").createElement(b("FantaTabMain.react"),{blockedIDs:b("MessengerState.bs").blockedIds(f),fbid:b("MessengerState.bs").fbid(f),forGameChat:j,hasFetchedAll:a,ignoredIds:b("MessengerState.bs").ignoredIds(f),isFocused:c,isHovered:d,isLastGroupTab:e,key:n,messages:k,onLoadMoreMessages:this.$1,onSelectSticker:this.$2,onSendHotLike:this.$3,onSendMessage:this.$4,onSendPhoto:this.$5,nonMinimizedRaisedTabCount:g,readReceipts:b("MessengerState.bs").readReceiptsPerThread(f),showContextBanner:l,tab:h,tabContent:i,thread:m})};return c}(b("React").Component);c.propTypes={isFocused:a.bool.isRequired,isHovered:a.bool.isRequired,isLastTabOfType:a.bool.isRequired,messengerState:a.array,nonMinimizedRaisedTabCount:a.number,tab:a.object.isRequired,tabContent:a.object};e.exports=c}),null);
__d("XUIBadgeReact.bs",["ReasonReact.bs","XUIBadge.react","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a!==void 0)if(a)return"regular";else return"special"}function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("XUIBadge.react"),{className:b("bs_js_null_undefined").fromOption(c),count:b("bs_js_null_undefined").fromOption(d),maxcount:b("bs_js_null_undefined").fromOption(e),type:b("bs_js_null_undefined").fromOption(g(a))},f)}f.stringOfBadgeType=g;f.make=a}),null);
__d("FantaM4HeaderMinimized.bs",["cx","fbt","bs_block","bs_curry","React","gkx","qex","bs_belt_Set","bs_belt_Option","ReasonReact.bs","bs_js_primitive","FantaM4Header.bs","ParticipantId.bs","XUIBadgeReact.bs","ChatThreadName.bs","ChatDetailStack.bs","MercuryThreadInfo","FantaProfilePresence.bs","FantaCloseActionButton.bs","MessengerCustomColorUtils.bs","MessengerParticipantUtils.bs","MessengerPresenceProvider.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponentWithRetainedProps("FantaM4HeaderMinimized");function j(a,c,d,e,f,g,j,k,l){__p&&__p();return[i[0],i[1],i[2],i[3],i[4],function(a){var c=a[1];if(!a[0][2][0]&&c[2][0]){b("bs_curry")._1(c[3],0);setTimeout(function(){return b("bs_curry")._1(c[3],1)},1e3);return 0}else return 0},i[6],i[7],function(i){__p&&__p();var l=b("FantaM4Header.bs").getProfileImages(f,e,g),m=f!==void 0?b("bs_js_primitive").valFromOption(f).unread_count:0,n=b("FantaM4Header.bs").getTooltip(f);if(f!==void 0){var o=b("bs_js_primitive").valFromOption(f).header_color;o=o==null?b("MessengerCustomColorUtils.bs").defaultColor(0):o}else o=b("MessengerCustomColorUtils.bs").defaultColor(0);var p=a&&i[1][0],q,r=0;p?o!==void 0?q=[0,o,"_69pt _2mgn _6d6l"]:r=1:o!==void 0?q=[2,"","_69pt _6d6l"]:r=1;r===1&&(q=[1,"","_69pt _6d6l"]);var s=q[1];if(f!==void 0){p=b("bs_js_primitive").valFromOption(f);o=[p.thread_fbid,p.is_canonical]}else o=[null,!0];var t=o[1],u=o[0];r=b("bs_belt_Option").map(f,function(a){return b("bs_belt_Set").fromArray(a.participants,[b("ParticipantId.bs").cmp])});var v=function(){return 0};if(j)p=null;else{o={children:function(a){return b("ReasonReact.bs").element(void 0,void 0,b("FantaProfilePresence.bs").make(l,20,f!==void 0?b("MessengerParticipantUtils.bs").areParticipantsInThread(g,a,b("bs_js_primitive").valFromOption(f))&&!k:!1,!0,"",n,s,!1,void 0,t,u==null?void 0:b("bs_js_primitive").some(u),e,v,[]))}};r!==void 0&&(o.subscribeToIDs=b("bs_js_primitive").valFromOption(r));p=b("React").createElement(b("MessengerPresenceProvider.bs").make,o)}r=j?h._("New message"):b("ReasonReact.bs").element(void 0,void 0,b("ChatThreadName.bs").make(f,"",n,g,"_2mgq",j,v,[]));o=m>0&&!(a&&i[1][0]);i=b("qex")._("830274")||b("gkx")("836108");o=o?i?b("React").createElement("div",{className:"_7joc"},b("React").createElement("div",{className:"_7joj"})):b("ReasonReact.bs").element(void 0,void 0,b("XUIBadgeReact.bs").make(0,"_429n",m,99,[])):null;i=b("bs_belt_Option").mapWithDefault(f,!1,function(a){return b("MercuryThreadInfo").isMuted(a)});return b("React").createElement("div",{className:q[2],style:{backgroundColor:s},onClick:d},b("React").createElement("div",{className:"_66n2"},p,b("React").createElement("div",{className:"_66n3"},b("ReasonReact.bs").element(void 0,void 0,b("ChatDetailStack.bs").make(r,null,[])),b("React").createElement("div",{className:"_69ae"},o,i?b("React").createElement("div",{className:"_66n5"},b("React").createElement("i",{className:"_7kxx"})):null,b("React").createElement("div",{className:"_66n5"},b("ReasonReact.bs").element(void 0,void 0,b("FantaCloseActionButton.bs").make(q[0],c,!1,[])))))))},function(){return[!1]},[a],function(c,a){if(c)return b("bs_block").__(0,[[!1]]);else return b("bs_block").__(0,[[!0]])},i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.highlightNewMessage,a.onClose,a.onHeaderToggle,b("bs_js_primitive").nullable_to_opt(a.participants),b("bs_js_primitive").nullable_to_opt(a.thread),a.viewer,a.isNewMessageTab,a.isMessengerOnlyUser,[])});c=20;d=1e3;f.component=i;f.small_profile_image_size=c;f.blink_threshold_ms=d;f.make=j;f.jsComponent=a}),null);
__d("FantaTabMinimized.react",["cx","fbt","Bootloader","ChatBehavior","ChatTabBlinking","ChatTabHeaderContainer.react","CurrentUser","FantaAvailableStatus","FantaM4HeaderMinimized.bs","FantaTabActions","MercuryIDs","React","ReactDOM","ShortProfiles","SimpleXUIDialog","emptyFunction","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("FantaM4HeaderMinimized.bs").jsComponent,j=b("gkx")("697231");a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={closing:!1},d.$5=function(a){a=d.props;var c=a.tab;a=a.tabContent;!a||a&&a.composer.text.length===0&&!d.$7()?(d.$8(),b("FantaTabActions").closeTab(c.id)):d.$9()},d.$6=function(a){var c=a.target;c&&c.classList&&!c.classList.contains("button")&&(a.stopPropagation(),b("FantaTabActions").unminimizeTab(d.props.tab.id),b("FantaTabActions").focusTab(d.props.tab.id))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$3()};d.componentDidUpdate=function(){this.$3()};d.shouldComponentUpdate=function(a){var b=this.props;return!b.tab.equals(a.tab)||!b.tabContent&&!!a.tabContent||!!b.tabContent&&!b.tabContent.equals(a.tabContent)};d.$3=function(){__p&&__p();if(j)return;var a=this.props,c=a.tab;a=a.tabContent;c=c.id;if(!a)return;a=a.thread;if(!a)return;var d=this.refs.root&&b("ReactDOM").findDOMNode(this.refs.root);if(!d)return;a=a.unread_count;if(a!==void 0){a=!!a&&(!b("ChatBehavior").showsTabUnreadUI||b("ChatBehavior").showsTabUnreadUI());a?b("ChatTabBlinking").blinkTab(c,{getTabElem:function(){return d},isFocused:function(){return!1},isHovered:function(){return!1}}):b("ChatTabBlinking").unblinkTab(c)}};d.$4=function(){var a=this.props.tabContent,c=a&&a.thread,d=a&&a.thread&&a.thread.header_color,e=d?{color:d}:null,f=b("CurrentUser").getID();if(j){var g=a?b("MercuryIDs").getUserIDFromThreadID(a.id):null;g=g?b("ShortProfiles").getNow(g):null;g=g&&g.is_messenger_only;return b("React").createElement("div",{className:"clearfix titlebar"},b("React").createElement(i,{highlightNewMessage:a&&a.highlightNewMessage,isNewMessageTab:a&&a.isNewMessageTab,onClose:this.$5,onHeaderToggle:this.$6,isMessengerOnlyUser:g,participants:a&&a.participants,thread:c,viewer:f}))}return b("React").createElement("div",{className:(this.state.closing?"_2suj":"")+" clearfix fbNubFlyoutTitlebar titlebar"+(d?" _1m34":""),style:e},b("React").createElement(b("ChatTabHeaderContainer.react"),{attachmentsShelf:document.createElement("div"),hasBlockedMessages:!1,href:a&&a.threadHref,isActive:!1,isNewMessageTab:!!(a&&a.isNewMessageTab),isRaised:!1,isTyping:!1,membershipParticipants:a&&a.membershipParticipants,onClick:this.$6,onCloseClick:this.$5,onRTCNuxCloseButtonClick:b("emptyFunction"),participants:a&&a.participants,pageUnsubscribeStatus:!1,rtcNuxShown:!1,sheetController:{},showMessengerReportNux:!1,showAddFriend:b("emptyFunction"),thread:c,threadID:this.props.tab.id,viewer:f}))};d.render=function(){var a=this.props,c=a.tab;a=a.tabContent;c=c.id;a=a&&!!a.thread&&b("FantaAvailableStatus").isAvailable(a.thread,c);return b("React").createElement("div",{className:"_4cd8 _50mz _50m_ fbNub _50-v"+(a?" _4-0b":"")+" _27_3",ref:"root"},this.$4())};d.$8=function(){var a=this.props.tab.id;b("Bootloader").loadModules(["MessengerShareFilePreviewFunnelLogger"],function(b){return b.endFunnel(a)},"FantaTabMinimized.react")};d.$7=function(){return this.$10()||this.$11()};d.$10=function(){var a,b=this.props.tabContent;a=((a=b)!=null?(a=a.composer)!=null?(a=a.fileUploader)!=null?a.uploadedFiles:a:a:a)||{size:0};b=((b=b)!=null?(b=b.composer)!=null?(b=b.fileUploader)!=null?b.uploadingFiles:b:b:b)||{size:0};return a.size>0||b.size>0};d.$11=function(){var a=this.props.tabContent;a=(a=a)!=null?(a=a.composer)!=null?a.sharePreview:a:a;return!!(a&&a.params&&a.type)};d.$9=function(){var a=this.props.tab,c=h._("Are you sure you want to close this chat window?");b("FantaTabActions").blurTab(a.id);var d=h._("You haven't sent your message.");b("SimpleXUIDialog").showConfirm(c,d,function(c){c?b("FantaTabActions").closeTab(a.id):b("FantaTabActions").focusTab(a.id)},{autofocusConfirm:!0,useReactFocusBehavior:!0})};return c}(b("React").Component);c.propTypes={tab:a.object.isRequired,tabContent:a.object};e.exports=c}),null);
__d("FantaMercuryTabsWithMain.react",["Bootloader","CurrentUser","FantaAppStore","FantaCookieUtil","FantaMercuryTabOverflowBootloader.react","FantaTabActions","FantaTabGroup.react","FantaTabMainLoader.react","FantaTabMinimized.react","FluxContainer","LazyComponent.react","LoadOnRender.react","MercuryIDs","MessengerState.bs","PresenceState","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerState.bs").jsComponent,h=function(a){b("Bootloader").loadModules(["MessengerReasonDialogContainerReact.bs"],function(b){b=b.jsComponent;return a(b)},"FantaMercuryTabsWithMain.react")};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("FantaAppStore")]};c.calculateState=function(){return{tabGroup:b("FantaAppStore").getState().tabGroup,tabContents:b("FantaAppStore").getState().mercury.tabContents}};var d=c.prototype;d.componentDidMount=function(){this.props.loadDataOnMount&&b("FantaTabActions").loadFromData(b("FantaCookieUtil").convertCookieData(b("PresenceState").get()))};d.render=function(){var a=this;return b("React").createElement(g,{fbid:b("CurrentUser").getID()},function(c){return[b("React").createElement(b("FantaTabGroup.react"),{key:"tabgroup",messengerState:c,MainComponent:b("FantaTabMainLoader.react"),MinimizedComponent:b("FantaTabMinimized.react"),OverflowComponent:b("FantaMercuryTabOverflowBootloader.react"),tabGroup:a.state.tabGroup,tabContents:a.state.tabContents,isLastOfTypeChecker:a.$1}),b("React").createElement(b("LoadOnRender.react"),{key:"dialog",component:b("React").createElement(b("LazyComponent.react"),null),loader:h,placeholder:b("React").createElement("span",null)})]})};d.$1=function(a){return b("MercuryIDs").isGroupChat(a.id)};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a)}),null);
__d("FantaTabsReactApp",["ChatPerfInstrumentation","FantaMercuryTabsWithMain.react","FantaTabsAppBase","React","ReactDOM","UserActivity","gkx","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=500,h;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var e=c.prototype;e.initializeFantaData=function(a){__p&&__p();d(["FantaAppStore","FantaCookieUtil","FantaGetMessageActions","FantaTabActions","MercuryThreadInformer","PresenceState"],function(c,d,e,f,i,j){__p&&__p();f.loadFromData(d.convertCookieData(j.get(),null,a)),j.registerStateLoader(function(b){f.loadFromData(d.convertCookieData(b,c.getState().tabGroup,a))}),j.registerStateStorer(function(a){if(!b("UserActivity").isOnTab()&&!b("UserActivity").isActive(g)&&!b("gkx")("678595"))return a;var e=c.getState().tabGroup;if(!h||h&&!h.equals(e)){h=e;return d.createCookieData(e,a)}else return a}),i.get().subscribe("threads-updated",function(a,c){Object.keys(c).forEach(function(a){b("setImmediate")(function(){e.refreshThread(a)})})}),b("ChatPerfInstrumentation").logInitData()})};e.initializeFantaUI=function(){__p&&__p();var a=this;d(["FantaAppStore","FantaMercuryThreadEventsBootloaded","FantaMessageActions","FantaTabActions","FantaTabViewportManager","FBRTCMessageHandler","MercuryBrowserAlerts"],function(c,d,e,f,g,h,i){__p&&__p();h.init();i.init();b("ReactDOM").render(a.getViewComponent(),a.tabsElem);f=function(a,c){b("setImmediate")(function(){e.receivedNewMessage(a,c)})};d.registerForNewLogMessage(f);d.registerForNewMessage(f);g.init(a.tabsElem);b("ChatPerfInstrumentation").logInitUI();h=c.getState().tabGroup.tabs;h.toArray().length===0&&b("ChatPerfInstrumentation").logDisplayDone()})};e.getViewComponent=function(){return b("React").createElement(b("FantaMercuryTabsWithMain.react"),{loadDataOnMount:!1})};return c}(b("FantaTabsAppBase"));e.exports=new a()}),null);
__d("StickerAssetType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IMAGE:"BestEffortImage",SPRITE:"SpriteImage",PADDED_SPRITE:"PaddedSpriteImage"})}),null);
__d("XStickerAssetController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stickers/asset/",{sticker_id:{type:"Int",required:!0},image_type:{type:"Enum",defaultValue:"BestEffortImage",enumType:1}})}),null);
__d("MessengerHotLikeUtils",["EmojiLikeConstants","StickerAssetType","StickerConstants","XStickerAssetController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={SizeTimes:{small:1e3,medium:2e3,large:3e3},getStickerIDForTime:function(a){var c=b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID;switch(!0){case a<this.SizeTimes.small:c=b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID;break;case a<this.SizeTimes.medium:c=b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID;break;case a<this.SizeTimes.large:c=b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID;break}return c},getEmojiSizeForTime:function(a){var c=b("EmojiLikeConstants").size.SMALL;a<this.SizeTimes.small?c=b("EmojiLikeConstants").size.SMALL:a<this.SizeTimes.medium?c=b("EmojiLikeConstants").size.MEDIUM:a<this.SizeTimes.large&&(c=b("EmojiLikeConstants").size.LARGE);return c},getMetadataForHotLike:function(a){__p&&__p();var c;switch(a){case b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID:c=120;break;case b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID:c=84;break;case b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID:c=35;break;case b("EmojiLikeConstants").size.LARGE:c=64;break;case b("EmojiLikeConstants").size.MEDIUM:c=64;break;case b("EmojiLikeConstants").size.SMALL:c=32;break}return c?{height:c,width:c}:void 0},getPreviewURI:function(){return b("XStickerAssetController").getURIBuilder().setInt("sticker_id",b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID).setEnum("image_type",b("StickerAssetType").IMAGE).getURI().toString()},getURIWithID:function(a){return b("XStickerAssetController").getURIBuilder().setInt("sticker_id",a).setEnum("image_type",b("StickerAssetType").IMAGE).getURI().toString()},getCustomEmojiFromThread:function(a){return a&&a.custom_like_icon}};e.exports=a}),null);
__d("MessengerUploadFilesUtil.bs",["bs_array","bs_curry","FantaTypeFileUploader"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e=(d={},d[b("FantaTypeFileUploader").fileTypes.ANIMATED_IMAGE]="gif_ids",d[b("FantaTypeFileUploader").fileTypes.AUDIO]="audio_ids",d[b("FantaTypeFileUploader").fileTypes.FILE]="file_ids",d[b("FantaTypeFileUploader").fileTypes.GENERIC_ATTACHMENT]="generic_attachment_ids",d[b("FantaTypeFileUploader").fileTypes.IMAGE]="image_ids",d[b("FantaTypeFileUploader").fileTypes.VIDEO]="video_ids",d);function a(a,b){if(a==null)return null;else{a=a.getTypeIDs(b);if(a.length!==0)return a;else return null}}function g(a){__p&&__p();if(a==null)return void 0;else{a=a.get("uploadedFiles");var b=[],c=[],d=[];a.forEach(function(a,e,f){__p&&__p();e=a.file;if(e.type.startsWith("image/")){b.push(e);return 0}else if(e.type.startsWith("video/")){c.push(e);return 0}else{d.push(e);return 0}});return[b,c,d]}}function h(a,c){if(c.length!==0)return b("bs_curry")._1(a,c);else return 0}function c(a,c){__p&&__p();if(a==null||c==null)return 0;else{a=g(a);if(a!==void 0){a=a;b("bs_array").iter(function(a){return h(c,[a])},a[1]);h(c,a[0]);return h(c,a[2])}else return 0}}f.supportAttachments=e;f.getAttachmentIDs=a;f.getAttachments=g;f.sendAttchment=h;f.sendAttchments=c}),null);
__d("getVisibleValueForContentStateWithMessengerEmoji",["EmojiFormat.bs","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.getBlockMap().map(function(c){__p&&__p();var d=c.getText(),e="";c.findEntityRanges(b("emptyFunction").thatReturnsTrue,function(f,g){__p&&__p();var h=c.getEntityAt(f);if(!h)e+=d.slice(f,g);else{h=a.getEntity(h);if(h.getType()==="EMOTICON")e+=h.getData().originalEmoticon;else if(h.getType()==="EMOJI"){h=h.getData().type;h=b("EmojiFormat.bs").codeStringToCodeArray(h);e+=String.fromCodePoint.apply(String,h)}else e+=d.slice(f,g)}});return e});return c.join("\n")}e.exports=a}),null);
__d("StickersDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationDispatcher"))({strict:!1})}),null);
__d("StickersActions",["StickersDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({ADD_RECENT_STICKER:null,HIDE_FLYOUT:null,LOAD_CUSTOM_STICKER_PACK:null,LOAD_RECENT_STICKERS:null,SELECT_AVATAR_STICKERS:null,SELECT_STORE_PACK:null,SELECT_TRAY_PACK:null,SHOW_FLYOUT:null,TRAY_LOADED:null});a={Types:g,addRecentSticker:function(a){b("StickersDispatcher").dispatch({type:g.ADD_RECENT_STICKER,sticker:a})},hideStickerFlyout:function(){b("StickersDispatcher").dispatch({type:g.HIDE_FLYOUT})},loadCustomStickerPack:function(a,c){b("StickersDispatcher").dispatch({type:g.LOAD_CUSTOM_STICKER_PACK,pack:a,nuxContent:c})},loadRecentStickers:function(a){b("StickersDispatcher").dispatch({type:g.LOAD_RECENT_STICKERS,stickers:a})},selectAvatarStickers:function(){b("StickersDispatcher").dispatch({type:g.SELECT_AVATAR_STICKERS})},selectStorePack:function(a){b("StickersDispatcher").dispatch({type:g.SELECT_STORE_PACK,packID:a})},selectTrayPack:function(a){b("StickersDispatcher").dispatch({type:g.SELECT_TRAY_PACK,packID:a})},showStickerFlyout:function(a){b("StickersDispatcher").dispatch({type:g.SHOW_FLYOUT,threadID:a})},trayLoaded:function(){b("StickersDispatcher").dispatch({type:g.TRAY_LOADED})}};e.exports=a}),null);
__d("replaceSelectionWithMention",["DraftModifier","EditorState"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){e=e(c.getCurrentContent(),a);var g=e.getLastCreatedEntityKey();f=f?f(a):a.getTitle();a=b("DraftModifier").replaceText(e,d,f,c.getCurrentInlineStyle(),g);return b("EditorState").push(c,a,"insert-fragment")}e.exports=a}),null);
__d("isWebGLEnabled",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;function h(){try{var a=document.createElement("canvas");return Boolean(window.WebGLRenderingContext)&&Boolean(a.getContext("webgl")||a.getContext("experimental-webgl"))}catch(a){return!1}}function a(){g===null&&(g=h());return g}e.exports=a}),null);